<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="2021/06/04/shi-xian-ao-tu-zi/"/>
      <url>2021/06/04/shi-xian-ao-tu-zi/</url>
      
        <content type="html"><![CDATA[<h1 id="å®ç°å‡¹å‡¸å­—"><a href="#å®ç°å‡¹å‡¸å­—" class="headerlink" title="å®ç°å‡¹å‡¸å­—"></a>å®ç°å‡¹å‡¸å­—</h1><pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;    &lt;meta charset="UTF-8"&gt;    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;    &lt;title&gt;Document&lt;/title&gt;    &lt;style&gt;        body {            background-color: gray;        }        div:nth-child(1) {            width: 600;            height: 200px;            text-align: center;            font-size: 100px;            margin: 100px auto;            font-weight: bold;            color: gray;            text-shadow:                -1px -1px 1px white,                1px 1px 1px black        }        div:nth-child(2) {            width: 600;            height: 200px;            text-align: center;            font-size: 100px;            margin: 100px auto;            font-weight: bold;            color: gray;            text-shadow:                -1px -1px 1px black,                1px 1px 1px white        }    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div&gt;æˆ‘æ˜¯å¥½ç¨‹åºå‘˜&lt;/div&gt;    &lt;div&gt;æˆ‘æ˜¯å¥½ç¨‹åºå‘˜&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>build-hexo</title>
      <link href="2021/05/15/build-hexo/"/>
      <url>2021/05/15/build-hexo/</url>
      
        <content type="html"><![CDATA[<h1 id="Macç¯å¢ƒä¸‹åŸºäºhexo-githubæ­å»ºä¸ªäººåšå®¢"><a href="#Macç¯å¢ƒä¸‹åŸºäºhexo-githubæ­å»ºä¸ªäººåšå®¢" class="headerlink" title="Macç¯å¢ƒä¸‹åŸºäºhexo+githubæ­å»ºä¸ªäººåšå®¢"></a>Macç¯å¢ƒä¸‹åŸºäºhexo+githubæ­å»ºä¸ªäººåšå®¢</h1><h2 id="1å®‰è£…HomeBrew"><a href="#1å®‰è£…HomeBrew" class="headerlink" title="1å®‰è£…HomeBrew"></a><code>1å®‰è£…HomeBrew</code></h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ: brew â€“version</p><h3 id="å®‰è£…git"><a href="#å®‰è£…git" class="headerlink" title="å®‰è£…git"></a>å®‰è£…git</h3><p>ç”¨brewå®‰è£…Git,å¦‚æœå·²å®‰è£…,åˆ™å¿½ç•¥è¯¥æ­¥éª¤</p><pre class="line-numbers language-none"><code class="language-none">git --version //æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ä½¿ç”¨brew-å®‰è£…nvm"><a href="#ä½¿ç”¨brew-å®‰è£…nvm" class="headerlink" title="ä½¿ç”¨brew å®‰è£…nvm"></a>ä½¿ç”¨brew å®‰è£…nvm</h3><p><code>brew install nvm</code></p><h3 id="åˆ›å»º-nvmæ–‡ä»¶"><a href="#åˆ›å»º-nvmæ–‡ä»¶" class="headerlink" title="åˆ›å»º.nvmæ–‡ä»¶"></a>åˆ›å»º.nvmæ–‡ä»¶</h3><p><code>mkdir ~/.nvm</code></p><p>åœ¨ ~/.bash_profile æˆ–è€… ~/.zshrc ä¸­æ·»åŠ ä¸‹é¢å‘½ä»¤</p><pre class="line-numbers language-none"><code class="language-none">export NVM_DIR="$HOME/.nvm"[ -s "/usr/local/opt/nvm/nvm.sh" ] &amp;&amp; . "/usr/local/opt/nvm/nvm.sh"  # This loads nvm[ -s "/usr/local/opt/nvm/etc/bash_completion" ] &amp;&amp; . "/usr/local/opt/nvm/etc/bash_completion"  # This loads nvm bash_completion<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>sourceä¸€ä¸‹</p><pre class="line-numbers language-none"><code class="language-none">Source ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-å®‰è£…node"><a href="#4-å®‰è£…node" class="headerlink" title="4.å®‰è£…node"></a>4.å®‰è£…node</h3><p>é€šè¿‡nvmå®‰è£…node</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">nvm ls-remote                   #æŸ¥çœ‹nodeæ‰€æœ‰ç‰ˆæœ¬nvm install v12.12.0            #å®‰è£…ä½ è¦çš„ç‰ˆæœ¬nvm use v12.12.0                #ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬nvm alias default v12.12.0      #é»˜è®¤ç‰ˆæœ¬ï¼Œæ¯æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œéƒ½è‡ªåŠ¨ä½¿ç”¨è¯¥ç‰ˆæœ¬<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å®‰è£…æ˜¯å¦æˆåŠŸï¼šnode -v ã€npm -v</p><p>æŸ¥çœ‹nvmä½¿ç”¨å¸®åŠ©:</p><pre class="line-numbers language-none"><code class="language-none">nvm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="5-å®‰è£…é…ç½®Hexo"><a href="#5-å®‰è£…é…ç½®Hexo" class="headerlink" title="5.å®‰è£…é…ç½®Hexo"></a>5.å®‰è£…é…ç½®Hexo</h3><h6 id="åˆ©ç”¨npmå‘½ä»¤å®‰è£…"><a href="#åˆ©ç”¨npmå‘½ä»¤å®‰è£…" class="headerlink" title="åˆ©ç”¨npmå‘½ä»¤å®‰è£…"></a>åˆ©ç”¨npmå‘½ä»¤å®‰è£…</h6><pre class="line-numbers language-none"><code class="language-none">npm install -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h6 id="åˆå§‹åŒ–Hexo"><a href="#åˆå§‹åŒ–Hexo" class="headerlink" title="åˆå§‹åŒ–Hexo"></a>åˆå§‹åŒ–Hexo</h6><p>åˆ›å»ºæ–‡ä»¶å¤¹æ¥å­˜æ”¾åšå®¢ <code>mkdir [folder]</code></p><pre class="line-numbers language-none"><code class="language-none">mkdir MyHexoBlog<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h6 id="hexoåˆå§‹åŒ–"><a href="#hexoåˆå§‹åŒ–" class="headerlink" title="hexoåˆå§‹åŒ–"></a>hexoåˆå§‹åŒ–</h6><pre class="line-numbers language-none"><code class="language-none">hexo init MyHexoBlog<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æœ¬åœ°å¯åŠ¨"><a href="#æœ¬åœ°å¯åŠ¨" class="headerlink" title="æœ¬åœ°å¯åŠ¨"></a>æœ¬åœ°å¯åŠ¨</h3><pre class="line-numbers language-none"><code class="language-none">hexo ghexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æœ¬åœ°å¯åŠ¨æ•ˆæœå¦‚ä¸‹"><a href="#æœ¬åœ°å¯åŠ¨æ•ˆæœå¦‚ä¸‹" class="headerlink" title="æœ¬åœ°å¯åŠ¨æ•ˆæœå¦‚ä¸‹:"></a>æœ¬åœ°å¯åŠ¨æ•ˆæœå¦‚ä¸‹:</h3><pre class="line-numbers language-none"><code class="language-none">å¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š http:localhost:4000<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="image-20210515161040198-Users-xiekecheng-Library-Application-Support-typora-user-images-image-20210515161040198-png"><a href="#image-20210515161040198-Users-xiekecheng-Library-Application-Support-typora-user-images-image-20210515161040198-png" class="headerlink" title="![image-20210515161040198](/Users/xiekecheng/Library/Application Support/typora-user-images/image-20210515161040198.png)"></a>![image-20210515161040198](/Users/xiekecheng/Library/Application Support/typora-user-images/image-20210515161040198.png)</h3><h3 id="hexoå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹"><a href="#hexoå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹" class="headerlink" title="hexoå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹"></a>hexoå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹</h3><pre class="line-numbers language-none"><code class="language-none">#æœåŠ¡å™¨hexo init                       #åˆå§‹åŒ–hexohexo g                          #ç­‰äºhexo generate =&gt;ç”Ÿæˆé™æ€é¡µé¢åˆ°publicç›®å½•hexo s                          #ç­‰äºhexo server =&gt;å¯åŠ¨hexoæœåŠ¡ï¼Œé€šè¿‡4000ç«¯å£è®¿é—®ã€‚hexo n æ–‡ç« åç§°                  #ç­‰äºhexo new "æ–‡ç« åç§°" =&gt;æ–°å»ºæ–‡ç« ã€‚hexo p                          #ç­‰äºhexo publishhexo d                          #ç­‰äºhexo deploy =&gt;ç›®å½•éƒ¨ç½²åˆ°GitHubã€‚hexo clean                      #æ¸…é™¤ç¼“å­˜ï¼Œç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¿½ç•¥æ­¤æ¡å‘½ä»¤hexo generate --watch           #ç›‘è§†æ–‡ä»¶å˜åŠ¨hexo d -g                       #ç”Ÿæˆéƒ¨ç½²åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-å…³è”github"><a href="#6-å…³è”github" class="headerlink" title="6.å…³è”github"></a>6.å…³è”github</h3><p>github.com ç”³è¯·è´¦æˆ·</p><p>åˆ›å»ºä»“åº“ Repository name: <code>xiekecheng.github.io</code>  ä¸ç”¨æˆ·åä¸€è‡´</p><h3 id="å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶"><a href="#å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶" class="headerlink" title="å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶"></a>å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶</h3><pre class="line-numbers language-none"><code class="language-none">npm install hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å‘å¸ƒåˆ°Githubä¸­"><a href="#å‘å¸ƒåˆ°Githubä¸­" class="headerlink" title="å‘å¸ƒåˆ°Githubä¸­"></a>å‘å¸ƒåˆ°Githubä¸­</h4><p>ä¿®æ”¹ _config.ymlæ–‡ä»¶ é…ç½®</p><pre class="line-numbers language-none"><code class="language-none"># Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type: git  branch: master  repo: https://github.com/gallenzhang/gallenzhang.github.io.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”Ÿæˆé™æ€ç½‘é¡µå¹¶éƒ¨ç½²</p><pre class="line-numbers language-none"><code class="language-none">hexo d -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="é”™è¯¯æç¤º"><a href="#é”™è¯¯æç¤º" class="headerlink" title="é”™è¯¯æç¤º"></a>é”™è¯¯æç¤º</h3><p>å¦‚æœéƒ¨ç½²çš„æ—¶å€™å‡ºç° â€œERROR Deployer not found: gitâ€ é”™è¯¯æç¤ºï¼Œé‚£æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…<code>hexo-deployer-git</code>æ’ä»¶ã€‚è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå®‰è£…ä¸‹æ’ä»¶é‡æ–°è¯•ä¸€ä¸‹å°±å¥½äº†ã€‚</p><pre class="line-numbers language-none"><code class="language-none">npm install hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="7-é€šè¿‡Githubç½‘å€æ¥è®¿é—®"><a href="#7-é€šè¿‡Githubç½‘å€æ¥è®¿é—®" class="headerlink" title="7.é€šè¿‡Githubç½‘å€æ¥è®¿é—®"></a>7.é€šè¿‡Githubç½‘å€æ¥è®¿é—®</h3><p>æµè§ˆå™¨ä¸­è¾“å…¥ xiekecheng.github.io å¯ä»¥çœ‹åˆ°å·²éƒ¨ç½²æˆåŠŸ</p><p>![image-20210515170312113](/Users/xiekecheng/Library/Application Support/typora-user-images/image-20210515170312113.png)</p><h3 id="8-åšæ–‡å‚è€ƒ"><a href="#8-åšæ–‡å‚è€ƒ" class="headerlink" title="8.åšæ–‡å‚è€ƒ"></a>8.åšæ–‡å‚è€ƒ</h3><p>hexoæ­å»ºå‚è€ƒäº<code>https://zhuanlan.zhihu.com/p/192376753</code></p><p><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2021/05/15/hello-world/"/>
      <url>2021/05/15/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxä¸‹å®‰è£…jdk1.8</title>
      <link href="2019/11/28/linux-install-jdk1-8/"/>
      <url>2019/11/28/linux-install-jdk1-8/</url>
      
        <content type="html"><![CDATA[<p>##1.è¿›å…¥Oracleè·å–ä¸‹è½½åœ°å€</p><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><h2 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2.å®‰è£…"></a>2.å®‰è£…</h2><ol><li>åˆ›å»ºå®‰è£…ç›®å½•</li></ol><p><code>mkdir /usr/local/java/</code></p><ol start="2"><li>è§£å‹è‡³å®‰è£…ç›®å½•</li></ol><p><code>tar -zxvf jdk-8u171-linux-x64.tar.gz -C /usr/local/java/</code></p><h2 id="3-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#3-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3.è®¾ç½®ç¯å¢ƒå˜é‡"></a>3.è®¾ç½®ç¯å¢ƒå˜é‡</h2><p><code>vim /etc/profile</code></p><p>åœ¨è¡Œå°¾æ·»åŠ </p><pre class="line-numbers language-none"><code class="language-none">export JAVA_HOME=/usr/local/java/jdk1.8.0_171export JRE_HOME=${JAVA_HOME}/jreexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/libexport PATH=${JAVA_HOME}/bin:$PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><p><code>source /etc/profile</code></p><p>æ·»åŠ è½¯é“¾æ¥</p><p><code>ln -s /usr/local/java/jdk1.8.0_171/bin/java /usr/bin/java</code></p><p>æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆ</p><p><code>java -versioin</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpirngBootæ•´åˆSwagger2</title>
      <link href="2019/11/20/spirngboot-integrate-swagger/"/>
      <url>2019/11/20/spirngboot-integrate-swagger/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootæ•´åˆSwagger2"><a href="#SpringBootæ•´åˆSwagger2" class="headerlink" title="#SpringBootæ•´åˆSwagger2"></a>#SpringBootæ•´åˆSwagger2</h1><ol><li><p>é¡¹ç›®ç»“æ„</p><p>![image-20191120101922913](/Users/xiekc/Library/Application Support/typora-user-images/image-20191120101922913.png)</p></li><li><p>æ–°å»ºSpringBooté¡¹ç›®ï¼Œå¼•å…¥ç›¸å…³ä¾èµ–ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--swargger2--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--swarggerUI--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç¼–å†™Swaggeré…ç½®ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableSwagger2</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token class-name">Docket</span> <span class="token function">docket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.xiekc.vhr.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"æ¥å£æµ‹è¯•æ–‡æ¡£"</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token string">"xiekc"</span><span class="token punctuation">,</span><span class="token string">"xiekecheng.github.io"</span><span class="token punctuation">,</span><span class="token string">"kc.xie@foxmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"v1.0"</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"APIæµ‹è¯•æ–‡æ¡£"</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token string">"Apache2.0"</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">licenseUrl</span><span class="token punctuation">(</span><span class="token string">"http://www . apache.org/licenses/LICENSE-2.0"</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç¼–å†™Controller</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/User"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"getUser"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/User"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"addUser"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ‰“å¼€localhost:8080/swagger-ui.html å¯æŸ¥çœ‹æ¥å£</p><p>![image-20191120101639701](/Users/xiekc/Library/Application Support/typora-user-images/image-20191120101639701.png)</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue</title>
      <link href="2019/09/19/vue/"/>
      <url>2019/09/19/vue/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>vhr é¡¹ç›®è®°å½•</title>
      <link href="2019/09/09/vhr-project/"/>
      <url>2019/09/09/vhr-project/</url>
      
        <content type="html"><![CDATA[<h2 id="Vhré¡¹ç›®è®°å½•"><a href="#Vhré¡¹ç›®è®°å½•" class="headerlink" title="Vhré¡¹ç›®è®°å½•"></a>Vhré¡¹ç›®è®°å½•</h2><h3 id="æ¶‰åŠæŠ€æœ¯"><a href="#æ¶‰åŠæŠ€æœ¯" class="headerlink" title="æ¶‰åŠæŠ€æœ¯"></a>æ¶‰åŠæŠ€æœ¯</h3><ol><li>SpringBoot</li><li>Spring Security</li><li>Redis</li><li>POI/é‚®ä»¶å‘é€/æ¶ˆæ¯ä¸­é—´ä»¶</li><li>MySQL</li><li>Vue</li><li>axios</li><li>ElementUI</li><li>Vues</li></ol><p>Vue å­¦ä¹ è§„åˆ’</p><ol><li>æ²¡æœ‰å¿…è¦ä¹°ä¹¦</li><li>jQueryï¼ŒJavaScript</li><li>å®˜ç½‘å­¦ä¹ Vue</li></ol><h3 id="Vueç»„ä»¶"><a href="#Vueç»„ä»¶" class="headerlink" title="Vueç»„ä»¶"></a>Vueç»„ä»¶</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaboy</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaboy</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'javaboy'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>        template<span class="token operator">:</span> <span class="token string">'&lt;h1&gt;hello world&lt;/h1&gt;'</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>    data<span class="token operator">:</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SpringBootä¸­ï¼Œæ—¥æœŸçš„åŒºåˆ«ï¼š</p><p>[<code>@JsonFormat](https://github.com/JsonFormat)(pattern="yyyy-MM-dd hh:mm:ss", locale="zh", timezone="GMT+8")</code></p><p>yyyy-MM-dd HH:mm:ss  è¿™æ˜¯24å°æ—¶åˆ¶</p><p>yyyy-MM-dd HH:mm:ss  è¿™æ˜¯12å°æ—¶åˆ¶</p><p>åœ¨æ ‡å‡†çš„SQLè¯­å¥ä¸­ï¼Œä¸€æ¬¡æ’å…¥ä¸€æ¡è®°å½•çš„INSERTè¯­å¥åªæœ‰ä¸€ç§å½¢å¼ã€‚</p><p>æ‰¹é‡æ’å…¥æ•ˆç‡é«˜</p><p>INSERT INTO tablename(åˆ—åâ€¦) VALUES(åˆ—å€¼);</p><p>è€Œåœ¨MySQLä¸­è¿˜æœ‰å¦å¤–ä¸€ç§å½¢å¼ï¼Œå°±æ˜¯set</p><p>å•æ¡æ’å…¥æ•ˆç‡é«˜ï¼š</p><p>INSERT INTO tablename SET column_name1 = value1, column_name2 = value2ï¼Œâ€¦;</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆMybatisPlus</title>
      <link href="2019/09/06/mybtais-plus/"/>
      <url>2019/09/06/mybtais-plus/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringBootæ•´åˆMybatisPlus"><a href="#SpringBootæ•´åˆMybatisPlus" class="headerlink" title="SpringBootæ•´åˆMybatisPlus"></a>SpringBootæ•´åˆMybatisPlus</h2><p>sqlå»ºè¡¨ä»¥åŠæ•°æ®</p> <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- ------------------------------ Table structure for user-- ----------------------------DROP TABLE IF EXISTS `user`;CREATE TABLE `user` (  `id` bigint(20) NOT NULL COMMENT 'ä¸»é”®',  `name` varchar(30) DEFAULT NULL COMMENT 'å§“å',  `age` int(11) DEFAULT NULL COMMENT 'å¹´é¾„',  `email` varchar(50) DEFAULT NULL COMMENT 'é‚®ç®±',  `manager_id` bigint(20) DEFAULT NULL COMMENT 'ç›´å±ä¸Šçº§id',  `create_time` datetime DEFAULT NULL COMMENT 'åˆ›å»ºæ—¶é—´',  PRIMARY KEY (`id`),  KEY `manager_fk` (`manager_id`),  CONSTRAINT `manager_fk` FOREIGN KEY (`manager_id`) REFERENCES `user` (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;-- ------------------------------ Records of user-- ----------------------------BEGIN;INSERT INTO `user` VALUES (1087982257332887553, 'å¤§boss', 40, 'boss@baomidou.com', NULL, '2019-01-11 14:20:20');INSERT INTO `user` VALUES (1088248166370832385, 'ç‹å¤©é£', 25, 'wtf@baomidou.com', 1087982257332887553, '2019-02-05 11:12:22');INSERT INTO `user` VALUES (1088250446457389058, 'æè‰ºä¼Ÿ', 28, 'lyw@baomidou.com', 1088248166370832385, '2019-02-14 08:31:16');INSERT INTO `user` VALUES (1094590409767661570, 'å¼ é›¨çª', 31, 'zjq@baomidou.com', 1088248166370832385, '2019-01-14 09:15:15');INSERT INTO `user` VALUES (1094592041087729666, 'åˆ˜çº¢é›¨', 32, 'lhm@baomidou.com', 1088248166370832385, '2019-01-14 09:48:16');COMMIT;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–°å»ºSpringBooté¡¹ç›®ï¼Œå¼•å…¥ç›¸å…³ä¾èµ–</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.baomidou/mybatis-plus-boot-starter --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨application.ymlä¸­é…ç½®æ•°æ®æº</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é…ç½®æ•°æ®æº</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mp<span class="token punctuation">?</span>useSSL=false<span class="token important">&amp;serverTimeZone=GMT%2B8</span>    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™Userç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token comment">//ä¸»é”®</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>    <span class="token comment">//å§“å</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//å¹´é¾„</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token comment">//é‚®ç®±</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>    <span class="token comment">//ç®¡ç†å‘˜ID</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> managerId<span class="token punctuation">;</span>    <span class="token comment">//åˆ›å»ºæ—¶é—´</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™UserMapperæ¥å£ ï¼Œåªéœ€è¦ç»§æ‰¿BaseMapperæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•ï¼Œä½¿ç”¨selectList(null)è¾“å‡ºæ‰€æœ‰æ•°æ®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MpApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>users<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>docker command</title>
      <link href="2019/08/19/docker-command/"/>
      <url>2019/08/19/docker-command/</url>
      
        <content type="html"><![CDATA[<h2 id="Dockerå‘½ä»¤"><a href="#Dockerå‘½ä»¤" class="headerlink" title="Dockerå‘½ä»¤"></a>Dockerå‘½ä»¤</h2><ul><li><p><code>docker pull      è·å–images</code></p></li><li><p><code>docker build    åˆ›å»ºimage</code></p></li><li><p><code>docker images</code></p></li><li><p><code>docker run     è¿è¡Œcontainer</code></p></li><li><p><code>docker ps     åˆ—å‡ºcontainer</code></p></li><li><p><code>docker rm     åˆ é™¤container</code></p></li><li><p><code>docker rmi     åˆ é™¤image</code></p></li><li><p><code>docker cp       åœ¨houstå’Œcontainerä¹‹é—´æ‹·è´æ–‡ä»¶</code></p></li><li><p><code>docker commit      ä¿å­˜æ”¹åŠ¨ä¸ºæ–°çš„image</code></p></li></ul><h3 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h3><pre class="line-numbers language-none"><code class="language-none">FROM UBUNTUMAINTAINER xiekcRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/source.listRUN apt-get updateRUN apt-get install -y nginxCOPY index.html /var/www/htmlENTRYPOINT ["/usr/sbin/nginx","-g","daemon off;"]EXPOSE 80<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ„å»ºindex.html</p><pre class="line-numbers language-none"><code class="language-none">touch index.htmlvim index.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ„å»ºé•œåƒ</p><pre class="line-numbers language-none"><code class="language-none">docker build -t xiekc/hello_nginx .<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>.ä»£è¡¨æ˜¯åœ¨å½“å‰ç›®å½•çš„ä¸Šä¸‹æ–‡</p><h2 id="Docker-è¯­æ³•"><a href="#Docker-è¯­æ³•" class="headerlink" title="Docker è¯­æ³•"></a>Docker è¯­æ³•</h2><pre class="line-numbers language-none"><code class="language-none">FROM base imageRUN  æ‰§è¡Œå‘½ä»¤ADD  æ·»åŠ æ–‡ä»¶COPY  æ‹·è´æ–‡ä»¶CMD  æ‰§è¡Œå‘½ä»¤EXPOSE   æš´éœ²ç«¯å£WORKDIRæŒ‡å®šè·¯å¾„MAINTAINER  ç»´æŠ¤è€…ENV   è®¾å®šç¯å¢ƒå˜é‡ENTRYPOINTå®¹å™¨å…¥å£USERæŒ‡å®šç”¨æˆ·VOLUMEmount point<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>docker exec -it nginx /bin/bash</code>   è¿›å…¥å®¹å™¨</p><h2 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h2><pre class="line-numbers language-none"><code class="language-none">host  å®¿ä¸»æœºimageé•œåƒcontainerå®¹å™¨registryä»“åº“daemonå®ˆæŠ¤è¿›ç¨‹clientå®¢æˆ·ç«¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœç´¢é•œåƒ</p><pre class="line-numbers language-none"><code class="language-none">docker search docker pulldocker push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹å®¹å™¨"><a href="#æŸ¥çœ‹å®¹å™¨" class="headerlink" title="æŸ¥çœ‹å®¹å™¨"></a>æŸ¥çœ‹å®¹å™¨</h3><p><code>docker ps</code> æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><p><code>docker ps -a</code> æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</p><p>æŸ¥çœ‹å®¹å™¨æ—¶æ¶‰åŠåˆ°çš„å‚æ•°ï¼š</p><ul><li>CONTAINER ID:CONTAINER IDæ˜¯æŒ‡å®¹å™¨çš„idï¼Œæ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦,è¿™æ˜¯ä¸€ä¸ª64ä½çš„åå…­è¿›åˆ¶æ•´æ•°ï¼Œåœ¨ä¸ä¼šæ··æ·†çš„æƒ…å†µä¸‹å¯ä»¥åªé‡‡ç”¨idçš„å‰å‡ ä½è¿›è¡Œæ ‡è¯†ä¸€ä¸ªå®¹å™¨ã€‚</li><li>IMAGE:IMAGEè¡¨ç¤ºåˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨çš„é•œåƒã€‚</li><li>COMMAND:COMMANDè¡¨ç¤ºå®¹å™¨æœ€åè¿è¡Œçš„å‘½ä»¤ã€‚</li><li>CREATED:åˆ›å»ºå®¹å™¨çš„æ—¶é—´ã€‚</li><li>STATUS:å®¹å™¨çš„çŠ¶æ€ï¼Œè¿™é‡Œå¯èƒ½æ˜¾ç¤ºä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶é—´ï¼Œä¹Ÿèƒ½æ˜¾ç¤ºå®¹å™¨å…³é—­æ—¶é—´ã€‚å…·ä½“æ˜¾ç¤ºå“ªä¸ªè¦çœ‹å®¹å™¨å½“å‰çš„çŠ¶æ€ã€‚</li><li>PORTS:å®¹å™¨å¯¹å¤–å¼€æ”¾çš„ç«¯å£ã€‚</li><li>NAMES:å®¹å™¨çš„åå­—ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„åå­—ã€‚</li></ul><h3 id="æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„å®¹å™¨"><a href="#æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„å®¹å™¨" class="headerlink" title="æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„å®¹å™¨"></a>æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„å®¹å™¨</h3><p><code>docker ps -l</code></p><h3 id="æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„nä¸ªå®¹å™¨"><a href="#æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„nä¸ªå®¹å™¨" class="headerlink" title="æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„nä¸ªå®¹å™¨"></a>æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„nä¸ªå®¹å™¨</h3><p><code>docker ps -n=xxx</code></p><h3 id="å®¹å™¨åœæ­¢"><a href="#å®¹å™¨åœæ­¢" class="headerlink" title="å®¹å™¨åœæ­¢"></a>å®¹å™¨åœæ­¢</h3><p>é€šè¿‡<code>docker stop</code>å‘½ä»¤å¯ä»¥ç»ˆæ­¢ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥é€šè¿‡nameæˆ–è€…idç»ˆæ­¢ä¸€ä¸ªå®¹å™¨</p><h3 id="å®¹å™¨åˆ é™¤"><a href="#å®¹å™¨åˆ é™¤" class="headerlink" title="å®¹å™¨åˆ é™¤"></a>å®¹å™¨åˆ é™¤</h3><p>å¦‚æœå®¹å™¨åœæ­¢åï¼Œä¸åœ¨éœ€è¦è¿™ä¸ªå®¹å™¨ï¼Œå¯ä»¥æ‰§è¡Œ<code>docker rm</code>å‘½ä»¤åˆ é™¤ä¸€ä¸ªå®¹å™¨ã€‚åˆ é™¤å®¹å™¨æ—¶ï¼Œåªèƒ½åˆ é™¤å·²ç»åœæ­¢çš„å®¹å™¨ï¼Œä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQå¯åŠ¨å¤±è´¥</title>
      <link href="2019/08/16/rabbitmq-boot-fail/"/>
      <url>2019/08/16/rabbitmq-boot-fail/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨brew install rabbitmqå®‰è£…rabbitmqä¹‹åï¼Œç”¨<code>rabbitmq-server</code>å‘½ä»¤å¯åŠ¨å¤±è´¥</p><p>ä»¥ä¸‹æ˜¯æŠ¥é”™ä¿¡æ¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">##  ##  ##  ##      RabbitMQ 3.7.16. Copyright (C) 2007-2019 Pivotal Software, Inc.  ##########  Licensed under the MPL.  See https://www.rabbitmq.com/  ######  ##  ##########  Logs: /usr/local/var/log/rabbitmq/rabbit@localhost.log                    /usr/local/var/log/rabbitmq/rabbit@localhost_upgrade.log              Starting broker...BOOT FAILED===========Error description:    init:do_boot/3    init:start_em/1    rabbit:start_it/1 line 478    rabbit:broker_start/0 line 354    rabbit:start_apps/2 line 572    app_utils:manage_applications/6 line 126    lists:foldl/3 line 1263    rabbit:'-handle_app_error/1-fun-0-'/3 line 693throw:{could_not_start,rabbitmq_mqtt,       {rabbitmq_mqtt,        {{shutdown,          {failed_to_start_child,'rabbit_mqtt_listener_sup_:::1883',           {shutdown,            {failed_to_start_child,             {ranch_listener_sup,{acceptor,{0,0,0,0,0,0,0,0},1883}},             {shutdown,              {failed_to_start_child,ranch_acceptors_sup,               {listen_error,                {acceptor,{0,0,0,0,0,0,0,0},1883},                eaddrinuse}}}}}}},         {rabbit_mqtt,start,[normal,[]]}}}}Log file(s) (may contain more information):   /usr/local/var/log/rabbitmq/rabbit@localhost.log   /usr/local/var/log/rabbitmq/rabbit@localhost_upgrade.log{"init terminating in do_boot",{could_not_start,rabbitmq_mqtt,{rabbitmq_mqtt,{{shutdown,{failed_to_start_child,'rabbit_mqtt_listener_sup_:::1883',{shutdown,{failed_to_start_child,{ranch_listener_sup,{acceptor,{0,0,0,0,0,0,0,0},1883}},{shutdown,{failed_to_start_child,ranch_acceptors_sup,{listen_error,{acceptor,{0,0,0,0,0,0,0,0},1883},eaddrinuse}}}}}}},{rabbit_mqtt,start,[normal,[]]}}}}}init terminating in do_boot ({could_not_start,rabbitmq_mqtt,{rabbitmq_mqtt,{{shutdown,{_}},{rabbit_mqtt,start,[_]}}}})Crash dump is being written to: /usr/local/var/log/rabbitmq/erl_crash.dump...done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŸå› æ˜¯1883ç«¯å£è¢«å ç”¨äº†ï¼Œä½¿ç”¨<code>lsof -i:1883</code> å¯æ‰¾åˆ°å ç”¨è¯¥ç«¯å£çš„è¿›ç¨‹ï¼Œç„¶åæ€æ­»è¯¥è¿›ç¨‹å³å¯ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-none"><code class="language-none">lsof -i:1883<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">COMMAND  PID  USER   FD   TYPE             DEVICE SIZE/OFF NODE NAMEjava    9705 xiekc  138u  IPv6 0xb5b23c47a591fc29      0t0  TCP *:ibm-mqisdp (LISTEN)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ€æ­»PIDä¸º  9705çš„è¿›ç¨‹ï¼Œå†æ‰§è¡Œ<code>rabbitmq-server</code> å³å¯æ­£å¸¸å¯åŠ¨rabbitmq</p><p><code>rabbitmq-server</code></p><pre class="line-numbers language-none"><code class="language-none">##  ## ##  ##      RabbitMQ 3.7.16. Copyright (C) 2007-2019 Pivotal Software, Inc. ##########  Licensed under the MPL.  See https://www.rabbitmq.com/ ######  ## ##########  Logs: /usr/local/var/log/rabbitmq/rabbit@localhost.log                   /usr/local/var/log/rabbitmq/rabbit@localhost_upgrade.log             Starting broker...completed with 6 plugins.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æµè§ˆå™¨è¾“å…¥<code>http://localhost:15672/</code> å¯è¿›å…¥rabbitmqç™»é™†é¡µé¢</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g61bkmoz9tj322y0kmq46.jpg" alt="image-20190816104026071"></p>]]></content>
      
      
      <categories>
          
          <category> RabbitMQ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>dock run privoxy</title>
      <link href="2019/08/16/dock-run-privoxy/"/>
      <url>2019/08/16/dock-run-privoxy/</url>
      
        <content type="html"><![CDATA[<p>é…ç½®å¥½SSRåï¼Œåªèƒ½åœ¨æµè§ˆå™¨å’Œåº”ç”¨ä¸Šç¿»å¢™ï¼Œä½†æ˜¯macçš„å‘½ä»¤è¡Œè¿˜æ— æ³•ç¿»å¢™ï¼Œæ‰€ä»¥éœ€è¦é…ç½®privoxyè®©å‘½ä»¤è¡Œå¯ä»¥ç¿»å¢™ã€‚</p><ol><li><p>å®‰è£…privoxy</p><p><code>brew install privoxy</code></p></li><li><p>é…ç½®privoxyï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶  /usr/local/etc/privoxy/config</p><pre class="line-numbers language-none"><code class="language-none">vim /usr/local/etc/privoxy/config<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨æœ«å°¾æ·»åŠ ä¸¤é¡¹é…ç½®</p><pre class="line-numbers language-none"><code class="language-none">listen-address 0.0.0.0:8118forward-socks5 / localhost:1080 .<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>å¯åŠ¨privoxy</p><p><code>sudo /usr/local/sbin/privoxy /usr/local/etc/privoxy/config</code></p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>springboot integrate AMQP</title>
      <link href="2019/08/15/springboot-integrate-amqp/"/>
      <url>2019/08/15/springboot-integrate-amqp/</url>
      
        <content type="html"><![CDATA[<h2 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h2><ol><li><p>RabbitMQç®€ä»‹</p><p>RabbitMQæ˜¯ä¸€ä¸ªå®ç°äº†AMQPçš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½¿ç”¨é«˜æ€§èƒ½Erlangç¼–å†™ã€‚RabbitMQå…·æœ‰å¯é æ€§ã€æ”¯æŒå¤šç§åè®®ã€é«˜å¯ç”¨ã€æ”¯æŒæ¶ˆæ¯é›†ç¾¤ä»¥åŠå¤šè¯­è¨€å®¢æˆ·ç«¯çš„ç‰¹ç‚¹ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜å‚¨è½¬å‘æ¶ˆæ¯ï¼Œå…·æœ‰ä¸é”™çš„æ€§èƒ½è¡¨ç°ã€‚</p></li><li><p>RabbitMQçš„å®‰è£…</p><p>ç”±äºRabbitMQä½¿ç”¨Erlangç¼–å†™ï¼Œå› æ­¤éœ€è¦å…ˆå®‰è£…Erlangç¯å¢ƒ</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆJMS</title>
      <link href="2019/08/15/springboot-integrate-activemq/"/>
      <url>2019/08/15/springboot-integrate-activemq/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‹è½½å®‰è£…ActiveMQ"><a href="#ä¸‹è½½å®‰è£…ActiveMQ" class="headerlink" title="ä¸‹è½½å®‰è£…ActiveMQ"></a>ä¸‹è½½å®‰è£…ActiveMQ</h2><pre class="line-numbers language-none"><code class="language-none">tar -zxvf è§£å‹cd apache-activemq-5.15.4./activemq start   å¯åŠ¨ActiveMQ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è®¿é—®ActiveMQï¼Œ8161æ˜¯ActiveMQçš„ç«¯å£</p><p><code>localhost:8161    </code></p><p>å•æœºManage ActiveMQ brokerè¿›å…¥ç®¡ç†ç•Œé¢ï¼Œç”¨æˆ·åå¯†ç éƒ½æ˜¯admin</p><h2 id="æ•´åˆSpringboot"><a href="#æ•´åˆSpringboot" class="headerlink" title="æ•´åˆSpringboot"></a>æ•´åˆSpringboot</h2><p>1ã€åˆ›å»ºSpringBooté¡¹ç›®ï¼Œæ·»åŠ ActiveMQä¾èµ–</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¼•å…¥activeMQä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-activemq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€åœ¨application.properties ä¸­é…ç½®activeMQ</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#activemqé…ç½®ä¿¡æ¯</span><span class="token comment">#é…ç½®brokeråœ°å€ï¼Œé»˜è®¤ç«¯å£æ˜¯61616</span><span class="token attr-name">spring.activemq.broker-url</span><span class="token punctuation">=</span><span class="token attr-value">tcp://localhost:61616</span><span class="token comment">#é…ç½®ä¿¡ä»»æ‰€æœ‰çš„åŒ…ï¼Œç›®çš„æ˜¯æ”¯æŒå‘é€å¯¹è±¡ä¿¡æ¯</span><span class="token attr-name">spring.activemq.packages.trust-all</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token comment">#é…ç½®ç”¨æˆ·åå’Œå¯†ç </span><span class="token attr-name">spring.activemq.user</span><span class="token punctuation">=</span><span class="token attr-value">admin</span><span class="token attr-name">spring.activemq.password</span><span class="token punctuation">=</span><span class="token attr-value">admin</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3ã€åœ¨é¡¹ç›®é…ç½®ç±»ä¸­æä¾›ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—Beanï¼Œè¯¥Beançš„å®ä¾‹ç”±ActiveMQæä¾›</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActivemqtestApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ActivemqtestApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token class-name">Queue</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ActiveMQQueue</span><span class="token punctuation">(</span><span class="token string">"amq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4ã€åˆ›å»ºä¸€ä¸ªJMSç»„ä»¶æ¥å®Œæˆæ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JmsComponent</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token class-name">JmsMessagingTemplate</span> messagingTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token class-name">Queue</span> queue<span class="token punctuation">;</span>    <span class="token comment">/**     * messagingTemplate   JMSæ¶ˆæ¯å‘é€æ¨¡æ¿     * this.queueæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œmsgæ˜¯æ¶ˆæ¯     * @param msg     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">Message</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>        messagingTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">,</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯     * @param message     */</span>    <span class="token annotation punctuation">@JmsListener</span><span class="token punctuation">(</span>destination<span class="token operator">=</span><span class="token string">"amq"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"receive:"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">public class Message implements Serializable {    private String content;    private Date date;    //çœç•¥getterå’Œsetteræ–¹æ³•}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxå‘½ä»¤æ€»ç»“</title>
      <link href="2019/08/15/linux-command/"/>
      <url>2019/08/15/linux-command/</url>
      
        <content type="html"><![CDATA[<p><code>ls /</code></p><p>æ˜¾ç¤ºæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶</p><p><code>ll</code>æˆ–<code>ls -l</code>  æŸ¥çœ‹æ–‡ä»¶å±æ€§</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>delete openJDK and install jdk</title>
      <link href="2019/08/14/delete-openjdk-and-install-jdk/"/>
      <url>2019/08/14/delete-openjdk-and-install-jdk/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å¸è½½openJDK"><a href="#ä¸€ã€å¸è½½openJDK" class="headerlink" title="ä¸€ã€å¸è½½openJDK"></a>ä¸€ã€å¸è½½openJDK</h2><p><strong>1ã€è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å·²å®‰è£…çš„openJDKç‰ˆæœ¬</strong></p><p><code> rpm -qa|grep jdk</code></p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g5zcj9xfofj30ug060764.jpg" alt="image-20190814174239091"></p><p><strong>2ã€è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ é™¤å·²æœ‰çš„openJDK</strong></p><p><code>yum -y remove</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CentOS å…³é—­é˜²ç«å¢™</title>
      <link href="2019/08/14/centos-shut-down-firewall/"/>
      <url>2019/08/14/centos-shut-down-firewall/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³é—­é˜²ç«å¢™å‘½ä»¤"><a href="#å…³é—­é˜²ç«å¢™å‘½ä»¤" class="headerlink" title="å…³é—­é˜²ç«å¢™å‘½ä»¤"></a>å…³é—­é˜²ç«å¢™å‘½ä»¤</h2><pre class="line-numbers language-none"><code class="language-none">firewall-cmd --state #æŸ¥çœ‹é»˜è®¤é˜²ç«å¢™çŠ¶æ€ï¼ˆå…³é—­åæ˜¾ç¤ºnot runningï¼Œå¼€å¯åæ˜¾ç¤ºrunningï¼‰systemctl stop firewalld.service #åœæ­¢firewallsystemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>docker run -d --hostname my-rabbit --name xiekc-rabbit -p 5672:5672 -p 15672:15672 rabbitmq:3-management</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaçŸ¥è¯†æ•´ç†</title>
      <link href="2019/08/05/interview/"/>
      <url>2019/08/05/interview/</url>
      
        <content type="html"><![CDATA[<p>å£°æ˜ï¼šä»å›¢é•¿å…¬ä¼—å·æ•´ç†æ¥çš„</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMTY0NDU3Nw==&amp;mid=2651938314&amp;idx=1&amp;sn=f0578deb60a719b5ec71c6a0fcea4420&amp;chksm=8d0f3144ba78b8522d85329f6575eea356b4da9732dd7c7fb4dc5189ee0d551c6b159bc2e706&amp;scene=21#wechat_redirect">Javaå›¢é•¿</a></p><p><strong>1ã€JDKä¸JREçš„åŒºåˆ«</strong></p><ul><li>JDKï¼š Javaå¼€å‘å·¥å…·åŒ…ï¼Œæä¾›Javaå¼€å‘ç¯å¢ƒå’Œè¿è¡Œç¯å¢ƒ</li><li>JREï¼š Javaè¿è¡Œç¯å¢ƒ</li></ul><p><strong>2ã€==ä¸equals åŒºåˆ«ï¼Ÿ</strong></p><p>== ï¼š æ ¹æ®åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œ==åˆ¤æ–­çš„æ ‡å‡†ä¸ä¸€æ ·</p><ul><li>åŸºæœ¬ç±»å‹ï¼šæ¯”è¾ƒå€¼æ˜¯å¦ç›¸åŒ</li><li>å¼•ç”¨ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¼•ç”¨æ˜¯å¦ç›¸åŒ</li></ul><p>equals ï¼š</p><ul><li>è‹¥é‡å†™äº†equalsæ–¹æ³•ï¼Œåˆ™æ¯”è¾ƒå€¼æ˜¯å¦ç›¸åŒ</li><li>è‹¥æœªé‡å†™equalsæ–¹æ³•ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸åŒ</li></ul><p><strong>3ã€è‹¥ä¸¤ä¸ªå¯¹è±¡çš„hashCode()ç›¸åŒï¼Œåˆ™equalsä¹Ÿä¸€å®šä¸ºtrueï¼Œå¯¹å—ï¼Ÿ</strong></p><p>ä¸å¯¹ï¼Œä¸¤ä¸ªå¯¹è±¡çš„hashCode()ç›¸åŒï¼Œequals()ä¸ä¸€å®šä¸ºtrue</p><p><strong>4ã€finalåœ¨javaä¸­çš„ä½œç”¨</strong></p><ul><li>finalä¿®é¥°ç±»å«æœ€ç»ˆç±»ï¼Œè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿</li><li>finalä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™</li><li>finalä¿®é¥°çš„å˜é‡å«å¸¸é‡ï¼Œå¸¸é‡å¿…é¡»åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åï¼Œå€¼ä¸èƒ½è¢«ä¿®æ”¹</li></ul><p><strong>5ã€Javaä¸­çš„Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ</strong></p><p>ç­‰äº-1ï¼ŒMath.round å››èˆäº”å…¥ï¼Œå‘ä¸Šå–æ•´</p><p><strong>6ã€Stringå±äºåŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ</strong></p><p>Stringä¸å±äºåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹æœ‰8ä¸­ï¼šintã€shortã€byteã€longã€doubleã€floatã€charã€booleanï¼Œè€ŒStringå±äºå¯¹è±¡</p><p><strong>7ã€Javaä¸­æ“ä½œå­—ç¬¦ä¸²æœ‰å“ªäº›ç±»ï¼Ÿä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>æ“ä½œå­—ç¬¦ä¸²çš„æœ‰ä¸‰ç±»ï¼šStringã€StringBufferã€StringBuilder</p><p>Stringä¸StringBufferã€StringBuilderçš„åŒºåˆ«æ˜¯ï¼šStringç”Ÿå‘½çš„æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„Stringå¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„Stringå¯¹è±¡</p><p><strong>8ã€String str = â€œiâ€ ä¸String str = new String(â€œiâ€) æ˜¯ä¸€æ ·çš„å—ï¼Ÿ</strong></p><p>ä¸ä¸€æ ·ï¼Œå› ä¸ºå†…å­˜çš„åˆ†é…æ–¹å¼ä¸ä¸€æ ·ã€‚String str = â€œiâ€çš„æ–¹æ³•ï¼Œjavaè™šæ‹Ÿæœºä¼šå°†å…¶åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼Œè€ŒString str = new String(â€œiâ€) åˆ™ä¼šè¢«åˆ†é…åˆ°å †å†…å­˜ä¸­ã€‚</p><p><strong>9ã€å¦‚æœå°†å­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿ</strong></p><p>ä½¿ç”¨StringBufferæˆ–StringBuilderçš„reverse()æ–¹æ³•ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//StringBufferçš„reverseæ–¹æ³•å®ç°å­—ç¬¦ä¸²ç¿»è½¬</span><span class="token class-name">StringBuffer</span> sbf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sbf<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"abcdefg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sbf<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//gfedcba</span><span class="token comment">//StringBuilderçš„reverseæ–¹æ³•å®ç°å­—ç¬¦ä¸²åè½¬</span><span class="token class-name">StringBuilder</span> sbd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sbd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"qwerty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sbd<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ytrewq</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>10ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</strong></p><p>indexOf() :  è¿”å›æŒ‡å®šå­—ç¬¦ä¸²çš„ç´¢å¼•ã€‚</p><p>charAt() :  è¿”å›æŒ‡å®šç´¢å¼•çš„å­—ç¬¦ä¸²ã€‚</p><p>replace() :   å­—ç¬¦ä¸²æ›¿æ¢ã€‚</p><p>trim() :  å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ç©ºç™½ã€‚</p><p>split() :  åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚</p><p>getBytes() :  è¿”å›å­—ç¬¦ä¸²çš„biteç±»å‹æ•°ç»„ã€‚</p><p>length() :  è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</p><p>toLowerCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå°å†™å­—æ¯ã€‚</p><p>toUpperCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå¤§å†™å­—ç¬¦ã€‚</p><p>substring()ï¼šæˆªå–å­—ç¬¦ä¸²ã€‚</p><p>equals()ï¼šå­—ç¬¦ä¸²æ¯”è¾ƒã€‚</p><p><strong>11ã€æŠ½è±¡ç±»å¿…é¡»è¦æœ‰æŠ½è±¡æ–¹æ³•å—ï¼Ÿ</strong></p><p>ä¸éœ€è¦ã€æŠ½è±¡ç±»ä¸ä¸€å®šéè¦æœ‰æŠ½è±¡æ–¹æ³•ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cat can eat food"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŠ½è±¡ç±»æ²¡æœ‰æŠ½è±¡æ–¹æ³•ä½†å¯æ­£å¸¸è¿è¡Œ</p><p><strong>12ã€æ™®é€šç±»ä¸æŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</strong></p><p>æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚</p><p>æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œä½†æ™®é€šç±»å¯ä»¥å®ä¾‹åŒ–ã€‚</p><p><strong>13ã€æŠ½è±¡ç±»èƒ½ç”¨finalä¿®é¥°å—ï¼Ÿ</strong></p><p>ä¸èƒ½ï¼Œå®šä¹‰æŠ½è±¡ç±»å°±æ˜¯è®©å…¶ä»–ç±»ç»§æ‰¿çš„ï¼Œå¦‚æœå®šä¹‰ä¸ºfinalè¯¥ç±»å°±ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¿™æ ·å½¼æ­¤å°±ä¼šäº§ç”ŸçŸ›ç›¾ï¼Œæ‰€ä»¥finalä¸èƒ½ä¿®é¥°æŠ½è±¡ç±»ã€‚å½“æŠ½è±¡ç±»ç”¨finalä¿®é¥°æ—¶ï¼Œç¼–è¾‘å™¨ä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5pkzd1691j31100923zo.jpg" alt="image-20190806065911302"></p><p><strong>14ã€æŠ½è±¡ç±»ä¸æ¥å£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>é»˜è®¤æ–¹æ³•å®ç°ï¼šæŠ½è±¡ç±»å¯ä»¥æœ‰é»˜è®¤çš„æ–¹æ³•æ¥å®ç°ï¼›æ¥å£ä¸èƒ½æœ‰é»˜è®¤çš„æ–¹æ³•æ¥å®ç°ã€‚</p><p>å®ç°ï¼šæŠ½è±¡ç±»çš„å­ç±»ä½¿ç”¨extends æ¥ç»§æ‰¿ï¼›æ¥å£å¿…é¡»ç”¨implements æ¥å®ç°æ¥å£ã€‚</p><p>æ„é€ å‡½æ•°ï¼šæŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼Œæ¥å£æ²¡æœ‰æ„é€ å‡½æ•°ã€‚</p><p>mainæ–¹æ³•ï¼šæŠ½è±¡ç±»å¯æœ‰mainæ–¹æ³•ï¼Œï¼›æ¥å£ä¸èƒ½æœ‰mainæ–¹æ³•ã€‚</p><p>å®ç°æ•°é‡ï¼šç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</p><p>è®¿é—®ä¿®é¥°ç¬¦ï¼šæ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤ä½¿ç”¨publicä¿®é¥°ï¼›æŠ½è±¡ç±»çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ã€‚</p><p><strong>15ã€Javaä¸­çš„IOæµåˆ†ä¸ºå‡ ç§ï¼Ÿ</strong></p><p>æŒ‰åŠŸèƒ½æ¥åˆ†: è¾“å…¥æµï¼ˆinputï¼‰ã€è¾“å‡ºæµï¼ˆoutputï¼‰</p><p>æŒ‰ç±»å‹åŒºåˆ†ï¼šâ‘ å­—èŠ‚æµ  â‘¡å­—ç¬¦æµ</p><p>å­—èŠ‚æµä¸å­—ç¬¦æµçš„åŒºåˆ«ï¼šå­—èŠ‚æµæŒ‰8ä½ä¼ è¾“ä»¥å­—èŠ‚ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®ï¼Œå­—ç¬¦æµæŒ‰16ä½ä¼ è¾“ä»¥å­—ç¬¦ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®</p><p><strong>16ã€BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>BIOï¼šBlock IO åŒæ­¥é˜»å¡IOï¼Œå°±æ˜¯å¹³å¸¸ä½¿ç”¨çš„ä¼ ç»ŸIOï¼Œç‰¹ç‚¹æ˜¯æ¨¡å¼ç®€å•ä½¿ç”¨æ–¹ä¾¿ï¼Œç¼ºç‚¹æ˜¯å¹¶å‘å¤„ç†èƒ½åŠ›ä½ã€‚</p><p>NIIOï¼šNew IO åŒæ­¥éé˜»å¡IOï¼Œæ˜¯ä¼ ç»ŸIOçš„å‡çº§ï¼Œå®ç°äº†å¤šè·¯å¤ç”¨ã€‚</p><p>AIOï¼š Asynchronous IO æ˜¯NIO çš„å‡çº§ï¼Œä¹Ÿå«NIO2ï¼Œå®ç°å¼‚æ­¥éé˜»å¡ IOï¼Œå¼‚æ­¥IOçš„æ“ä½œåŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶ã€‚</p><p><strong>17ã€Filesçš„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</strong></p><ul><li>Files.exists()ï¼šæ£€æµ‹æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</li><li>Files.createFile()ï¼šåˆ›å»ºæ–‡ä»¶ã€‚</li><li>Files.createDirectory()ï¼šåˆ›å»ºæ–‡ä»¶å¤¹ã€‚</li><li>Files.delete()ï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li>Files.copy()ï¼šå¤åˆ¶æ–‡ä»¶ã€‚</li><li>Files.move()ï¼šç§»åŠ¨æ–‡ä»¶ã€‚</li><li>Files.size()ï¼šæŸ¥çœ‹æ–‡ä»¶ä¸ªæ•°ã€‚</li><li>Files.read()ï¼šè¯»å–æ–‡ä»¶ã€‚</li><li>Files.write()ï¼šå†™å…¥æ–‡ä»¶ã€‚</li></ul><p><strong>18ã€Javaå®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ</strong></p><p>å¸¸è§å®¹å™¨çš„å›¾å½•ï¼š</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5se9j5986j30k00ehmxy.jpg" alt="WechatIMG89"></p><p><strong>19ã€Collectionå’ŒCollectionsæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>Java.util.Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ï¼ˆé›†åˆçš„ä¸€ä¸ªé¡¶çº§æ¥å£ï¼‰ã€‚å®ƒæä¾›å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚å…¶ç›´æ¥ç»§æ‰¿æ¥å£æœ‰Listå’ŒSetã€‚</li><li>Collections åˆ™æ˜¯é›†åˆç±»çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºå¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œæ’åºã€æœç´¢ä»¥åŠçº¿ç¨‹å®‰å…¨ç­‰å„ç§æ“ä½œã€‚</li></ul><p><strong>20ã€Listã€Setã€Map ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p><strong>21ã€ HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>hashMapå»æ‰äº†HashTableçš„containsæ–¹æ³•ï¼Œä½†æ˜¯åŠ ä¸Šäº†containsValueï¼ˆï¼‰å’ŒcontainsKeyï¼ˆï¼‰æ–¹æ³•ã€‚</li><li>hashTableæ˜¯åŒæ­¥çš„ï¼Œè€ŒHashMapæ˜¯éåŒæ­¥çš„ï¼Œæ•ˆç‡ä¸Šæ¯”HashTableé«˜ã€‚</li><li>HashMapå…è®¸ç©ºé”®å€¼ï¼Œè€ŒHashTableä¸å…è®¸ã€‚</li></ul><p><strong>22ã€å¦‚ä½•å†³å®šä½¿ç”¨HashMapè¿˜æ˜¯TreeMapï¼Ÿ</strong></p><p>å¯¹äºåœ¨Mapä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œï¼ŒHashMapæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œå¦‚æœéœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„keyé›†åˆè¿›è¡Œéå†ï¼Œåˆ™é€‰æ‹©TreeMap</p><p><strong>23ã€è¯´ä¸€ä¸‹HashMapçš„å®ç°åŸç†ï¼Ÿ</strong></p><p>HashMapæ¦‚è¿°ï¼š HashMapæ˜¯åŸºäºå“ˆå¸Œè¡¨çš„Mapæ¥å£çš„éåŒæ­¥å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨nullå€¼å’Œnullé”®ã€‚æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚ </p><p>HashMapçš„æ•°æ®ç»“æ„ï¼š åœ¨javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œæ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨è¿™ä¸¤ä¸ªåŸºæœ¬ç»“æ„æ¥æ„é€ çš„ï¼ŒHashMapä¹Ÿä¸ä¾‹å¤–ã€‚HashMapå®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œé“¾è¡¨æ•£åˆ—â€çš„æ•°æ®ç»“æ„ï¼Œå³æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ã€‚</p><p>å½“æˆ‘ä»¬å¾€Hashmapä¸­putå…ƒç´ æ—¶,é¦–å…ˆæ ¹æ®keyçš„hashcodeé‡æ–°è®¡ç®—hashå€¼,æ ¹ç»hashå€¼å¾—åˆ°è¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®(ä¸‹æ ‡),å¦‚æœè¯¥æ•°ç»„åœ¨è¯¥ä½ç½®ä¸Šå·²ç»å­˜æ”¾äº†å…¶ä»–å…ƒç´ ,é‚£ä¹ˆåœ¨è¿™ä¸ªä½ç½®ä¸Šçš„å…ƒç´ å°†ä»¥é“¾è¡¨çš„å½¢å¼å­˜æ”¾,æ–°åŠ å…¥çš„æ”¾åœ¨é“¾å¤´,æœ€å…ˆåŠ å…¥çš„æ”¾å…¥é“¾å°¾.å¦‚æœæ•°ç»„ä¸­è¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ,å°±ç›´æ¥å°†è¯¥å…ƒç´ æ”¾åˆ°æ•°ç»„çš„è¯¥ä½ç½®ä¸Šã€‚</p><p>éœ€è¦æ³¨æ„Jdk 1.8ä¸­å¯¹HashMapçš„å®ç°åšäº†ä¼˜åŒ–,å½“é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°æ®è¶…è¿‡å…«ä¸ªä¹‹å,è¯¥é“¾è¡¨ä¼šè½¬ä¸ºçº¢é»‘æ ‘æ¥æé«˜æŸ¥è¯¢æ•ˆç‡,ä»åŸæ¥çš„O(n)åˆ°O(logn)ã€‚</p><p><strong>24ã€è¯´ä¸€ä¸‹HashSetçš„å®ç°åŸç†ï¼Ÿ</strong></p><ul><li>HashSetçš„åº•å±‚ç”±HashMapå®ç°ã€‚</li><li>HashSetçš„å€¼å­˜æ”¾äºHashMapçš„keyä¸Š</li><li>HashMapçš„valueç»Ÿä¸€ä¸ºPRESENT</li></ul><p><strong>25ã€ArrayListå’ŒLinkedListçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>æœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯ArrayListçš„åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚LinkedListçš„åº•å±‚æ•°æ®ç»“æ„æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ã€‚ä½¿ç”¨ä¸‹æ ‡è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼ŒArrayListçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1),è€ŒLinkedListçš„æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆnï¼‰ã€‚</p><p><strong>26ã€å¦‚ä½•å®ç°æ•°ç»„å’ŒListä¹‹é—´çš„è½¬æ¢ï¼Ÿ</strong></p><ul><li>Listè½¬æ¢æˆæ•°ç»„ï¼šè°ƒç”¨ArrayListçš„toArrayæ–¹æ³•ã€‚</li><li>æ•°ç»„è½¬æ¢æˆListï¼šè°ƒç”¨Arraysçš„asListæ–¹æ³•ã€‚</li></ul><p><strong>27ã€ArrayListå’ŒVectorçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>Vectoræ˜¯åŒæ­¥çš„ï¼Œè€ŒArrayListæ˜¯éåŒæ­¥çš„ã€‚</li><li>ArrayListæ¯”Vectorå¿«ï¼Œå®ƒå› ä¸ºæœ‰åŒæ­¥ï¼Œä¸ä¼šè¿‡è½½ã€‚ </li><li>ArrayListæ›´åŠ é€šç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collectionså·¥å…·ç±»è½»æ˜“åœ°è·å–åŒæ­¥åˆ—è¡¨å’Œåªè¯»åˆ—è¡¨ã€‚</li></ul><p><strong>28ã€Arrayå’ŒArrayListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>Arrayå¯ä»¥å®¹çº³æ¯•æœ¬ç±»å‹å’Œå¯¹è±¡ï¼Œè€ŒArrayListåªèƒ½å®¹çº³å¯¹è±¡ã€‚</li><li>Arrayæ˜¯å¯ä»¥æŒ‡å®šå¤§å°çš„ï¼Œè€ŒArrayListçš„å¤§å°æ˜¯å›ºå®šçš„</li><li>Arrayæ²¡æœ‰æä¾›ArrayListé‚£ä¹ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚addAllã€removeAllå’Œiteratorç­‰ã€‚</li></ul><p><strong>29ã€åœ¨Queueä¸­pollï¼ˆï¼‰å’Œremoveï¼ˆï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><p>ä¸¤è€…éƒ½æ˜¯ä»é˜Ÿåˆ—ä¸­å»å…ƒç´ ï¼Œä½†pollï¼ˆï¼‰åœ¨è·å–å…ƒç´ å¤±è´¥çš„æ—¶å€™ä¼šè¿”å›ç©ºï¼Œè€Œremoveï¼ˆï¼‰è·å–å…ƒç´ å¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p><strong>30ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</strong></p><ul><li>vectorï¼šå°±æ¯”ArrayListå¤šäº†ä¸ªåŒæ­¥åŒ–æœºåˆ¶ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ï¼Œå› ä¸ºæ•ˆç‡è¾ƒä½ï¼Œç°åœ¨å·²ç»ä¸å¤ªå»ºè®®ä½¿ç”¨ï¼Œåœ¨webåº”ç”¨ä¸­ï¼Œç‰¹åˆ«æ˜¯å‰å°é¡µé¢ï¼Œæ•ˆç‡æœ€ä¼˜å…ˆè€ƒè™‘ã€‚</li><li>stackï¼šå †æ ˆç±»ï¼Œå…ˆè¿›åå‡ºã€‚</li><li>hashtableï¼šæ¯”hashmapå¤šäº†ä¸ªçº¿ç¨‹å®‰å…¨ã€‚</li><li>enumerationï¼šæšä¸¾ç±»ï¼Œç›¸å½“äºè¿­ä»£å™¨ã€‚</li></ul><p><strong>31ã€è¿­ä»£å™¨Iteratoræ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>è¿­ä»£å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥éå†å¹¶é€‰æ‹©åºåˆ—ä¸­çš„å¯¹è±¡ï¼Œè€Œå¼€å‘äººå‘˜ä¸éœ€è¦äº†è§£è¯¥åºåˆ—çš„åº•å±‚ç»“æ„ã€‚è¿­ä»£å™¨é€šå¸¸è¢«ç§°ä¸ºè½»é‡çº§å¯¹è±¡ï¼Œå› ä¸ºåˆ›å»ºå®ƒçš„ä»£ä»·å°ã€‚</p><p><strong>32ã€Iteratoræ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</strong></p><p>Javaä¸­çš„IteratoråŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”åªèƒ½å•å‘ç§»åŠ¨ï¼š</p><p>ã€€ã€€</p><p>(1) ä½¿ç”¨æ–¹æ³•iterator()è¦æ±‚å®¹å™¨è¿”å›ä¸€ä¸ªIteratorã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨Iteratorçš„next()æ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æ³¨æ„ï¼šiterator()æ–¹æ³•æ˜¯java.lang.Iterableæ¥å£,è¢«Collectionç»§æ‰¿ã€‚</p><p>ã€€ã€€</p><p>(2) ä½¿ç”¨next()è·å¾—åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p><p>ã€€ã€€</p><p>(3) ä½¿ç”¨hasNext()æ£€æŸ¥åºåˆ—ä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ ã€‚</p><p>ã€€ã€€</p><p>(4) ä½¿ç”¨remove()å°†è¿­ä»£å™¨æ–°è¿”å›çš„å…ƒç´ åˆ é™¤ã€‚</p><p>ã€€ã€€</p><p>Iteratoræ˜¯Javaè¿­ä»£å™¨æœ€ç®€å•çš„å®ç°ï¼Œä¸ºListè®¾è®¡çš„ListIteratorå…·æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä»ä¸¤ä¸ªæ–¹å‘éå†Listï¼Œä¹Ÿå¯ä»¥ä»Listä¸­æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚</p><p><strong>33ã€Iteratorå’ŒListIteratoræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>Iteratorå¯ä»¥ç”¨æ¥éå†Setå’ŒListé›†åˆï¼Œä½†æ˜¯ListIteratoråªç”¨ç”¨æ¥éå†Listã€‚</li><li>Iteratorå¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ŒListIteratoræ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘ã€‚</li><li>ListIteratorå®ç°äº†Iteratoræ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šå¢åŠ å…ƒç´ ï¼Œæ›¿æ¢å…ƒç´ ï¼Œè·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œç­‰ç­‰ã€‚</li></ul><h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><p><strong>35ã€å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>å¹¶è¡Œæ˜¯æŒ‡ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ—¶é—´åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿï¼›å¹¶å‘æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å‘ç”Ÿã€‚</li><li>å¹¶è¡Œæ˜¯æ˜¯åœ¨ä¸åŒå®ä½“çš„å¤šä¸ªäº‹ä»¶ï¼Œå¹¶å‘æ˜¯åŒä¸€å®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ã€‚</li><li>åœ¨ä¸€å°å¤„ç†å™¨ä¸Šâ€œåŒæ—¶â€å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œåœ¨å¤šå°å¤„ç†å™¨ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚å¦‚hadoopåˆ†å¸ƒå¼é›†ç¾¤ã€‚</li></ul><p>æ‰€ä»¥å¹¶å‘ç¼–ç¨‹æ˜¯ç›®æ ‡æ˜¯åˆ©ç”¨å¤„ç†å™¨çš„æ¯ä¸€ä¸ªæ ¸ï¼Œä»¥è¾¾åˆ°æœ€é«˜çš„å¤„ç†æ€§èƒ½ã€‚</p><p><strong>36ã€çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</strong></p><p>ç®€è€Œè¨€ä¹‹ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œå’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜èµ„æºï¼Œå‡å°‘åˆ‡æ¢æ¬¡æ•°ï¼Œä»è€Œæ•ˆç‡æ›´é«˜ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯cpuè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ¯”ç¨‹åºæ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p><p><strong>37ã€å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>å®ˆæŠ¤çº¿ç¨‹ï¼ˆå³daemon threadï¼‰ï¼Œæ˜¯ä¸ªæœåŠ¡çº¿ç¨‹ï¼Œå‡†ç¡®çš„è¯´å°±æ˜¯æœåŠ¡å…¶ä»–çš„çº¿ç¨‹ã€‚</p><p><strong>38ã€åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</strong></p><p>ä¸€ï¼šé€šè¿‡ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»</p><ul><li>å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚</li><li>åˆ›å»ºThreadå­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚</li><li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚</li></ul><p>äºŒï¼šé€šè¿‡Runnable()æ¥å£åˆ›å»ºçº¿ç¨‹ç±»</p><ul><li>å®šä¹‰runnableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³•ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚</li><li>åˆ›å»º Runnableå®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä¾æ­¤å®ä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThreadå¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚</li><li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ã€‚</li></ul><p>ä¸‰ï¼šé€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹</p><ul><li>åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚</li><li>åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›å€¼ã€‚</li><li>ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚</li><li>è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚</li></ul><p><strong>39ã€è¯´ä¸€ä¸‹runnableå’Œcallableçš„åŒºåˆ«ï¼Ÿ</strong></p><ul><li>Runnableæ¥å£ä¸­çš„run()æ–¹æ³•çš„è¿”å›å€¼æ˜¯voidï¼Œå®ƒåšçš„äº‹æƒ…åªæ˜¯çº¯ç²¹çš„å»æ‰§è¡Œrun()æ–¹æ³•ä¸­çš„ä»£ç ã€‚</li><li>Callableæ¥å£çš„call()æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ˜¯ä¸€ä¸ªæ³›å‹ï¼Œå’ŒFutureã€FutureTaské…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœã€‚</li></ul><p><strong>40ã€çº¿ç¨‹æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</strong></p><p>çº¿ç¨‹é€šå¸¸æœ‰äº”ç§çŠ¶æ€ï¼šåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€æ­»äº¡ã€‚</p><ol><li><p>åˆ›å»ºçŠ¶æ€ï¼šåœ¨ç”Ÿæˆçº¿ç¨‹å¯¹è±¡ï¼Œä½†æ²¡æœ‰è°ƒç”¨è¯¥å¯¹è±¡çš„startæ–¹æ³•ï¼Œè¿™æ˜¯çº¿ç¨‹çš„åˆ›å»ºçŠ¶æ€ã€‚</p><ol start="2"><li>å°±ç»ªçŠ¶æ€ï¼šå½“è°ƒç”¨çš„çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ä¹‹åï¼Œè¯¥çº¿ç¨‹å°±è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œä½†æ˜¯æ­¤æ—¶çº¿ç¨‹è°ƒåº¦ç¨‹åºè¿˜æ²¡æœ‰å°†è¯¥çº¿ç¨‹è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼Œæ­¤æ—¶å°±å¤„äºå°±ç»ªçŠ¶æ€ã€‚åœ¨çº¿ç¨‹è¿è¡Œä¹‹åï¼Œä»ç­‰å¾…æˆ–è€…ç¡çœ ä¸­å›æ¥ä¹‹åï¼Œä¹Ÿä¼šå¤„äºå°±ç»ªçŠ¶æ€ã€‚</li><li>è¿è¡ŒçŠ¶æ€ï¼šçº¿ç¨‹è°ƒåº¦ç¨‹åºå°†å°±ç»ªçš„çº¿ç¨‹è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å°±è¿›å…¥äº†è¿è¡ŒçŠ¶æ€ï¼Œå¼€å§‹è¿è¡Œrunå‡½æ•°ä¸­çš„ä»£ç ã€‚</li><li>é˜»å¡çŠ¶æ€ï¼šçº¿ç¨‹æ­£åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¢«æš‚åœï¼Œé€šå¸¸æ˜¯ä¸ºäº†ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼ˆæ¯”å¦‚è¯´æŸé¡¹èµ„æºå°±ç»ªï¼‰ä¹‹åç»§ç»­è¿è¡Œã€‚sleepï¼Œsuspendï¼Œwaitç­‰æ–¹æ³•éƒ½å¯ä»¥å¯¼è‡´çº¿ç¨‹é˜»å¡ã€‚</li><li>æ­»äº¡çŠ¶æ€ï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹çš„runæ–¹æ³•æ‰§è¡Œç»“æŸæˆ–è€…è°ƒç”¨stopæ–¹æ³•åï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ­»äº¡ã€‚å¯¹äºå·²ç»æ­»äº¡çš„çº¿ç¨‹ï¼Œæ— æ³•å†ä½¿ç”¨startæ–¹æ³•ä»¤å…¶è¿›å…¥å°±ç»ªã€‚</li></ol></li></ol><p><strong>41ã€sleep() å’Œ wait() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>Sleep(): æ–¹æ³•æ˜¯çº¿ç¨‹ç±»ï¼ˆThreadï¼‰çš„é™æ€æ–¹æ³•ï¼Œè®©è°ƒç”¨çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œè®©å‡ºæ‰§è¡Œæœºä¼šç»™å…¶ä»–çº¿ç¨‹ï¼Œç­‰åˆ°ä¼‘çœ æ—¶é—´ç»“æŸåï¼Œçº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€å’Œå…¶ä»–çº¿ç¨‹ä¸€èµ·ç«äº‰cpuçš„æ‰§è¡Œæ—¶é—´ã€‚å› ä¸ºsleep()æ˜¯staticé™æ€çš„æ–¹æ³•ï¼Œä»–ä¸èƒ½æ”¹å˜å¯¹è±¡çš„æœºé”ï¼Œå½“ä¸€ä¸ªsynchronizedå—ä¸­è°ƒç”¨äº†sleep()æ–¹æ³•ï¼Œçº¿ç¨‹è™½ç„¶è¿›å…¥äº†ä¼‘çœ ï¼Œä½†æ˜¯å¯¹è±¡çš„æœºé”æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹ä¾ç„¶æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ã€‚</li><li>waitï¼šwait()æ˜¯Objectç±»çš„æ–¹æ³•ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°waitæ–¹æ³•æ—¶ï¼Œå®ƒå°±è¿›å…¥åˆ°ä¸€ä¸ªå’Œè¯¥å¯¹è±¡ç›¸å…³çš„ç­‰å¾…æ± ï¼ŒåŒæ—¶é‡Šæ”¾å¯¹è±¡çš„æœºé”ï¼Œä½¿å¾—å…¶å®ƒçº¿ç¨‹èƒ½å¤Ÿè®¿é—®ï¼Œå¯ä»¥é€šè¿‡notifyï¼ŒnoytifyAllæ–¹æ³•æ¥å”¤é†’ç­‰å¾…çš„çº¿ç¨‹</li></ul><p><strong>42ã€notify()å’ŒnotifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„waitæ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¼šå¤„äºè¯¥çº¿ç¨‹çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</li><li>å½“æœ‰çº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ notifyAll()æ–¹æ³•ï¼ˆå”¤é†’æ‰€æœ‰ wait çº¿ç¨‹ï¼‰æˆ– notify()æ–¹æ³•ï¼ˆåªéšæœºå”¤é†’ä¸€ä¸ª wait çº¿ç¨‹ï¼‰ï¼Œè¢«å”¤é†’çš„çš„çº¿ç¨‹ä¾¿ä¼šè¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ä¸­ï¼Œé”æ± ä¸­çš„çº¿ç¨‹ä¼šå»ç«äº‰è¯¥å¯¹è±¡é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨äº†notifyååªè¦ä¸€ä¸ªçº¿ç¨‹ä¼šç”±ç­‰å¾…æ± è¿›å…¥é”æ± ï¼Œè€ŒnotifyAllä¼šå°†è¯¥å¯¹è±¡ç­‰å¾…æ± å†…çš„æ‰€æœ‰çº¿ç¨‹ç§»åŠ¨åˆ°é”æ± ä¸­ï¼Œç­‰å¾…é”ç«äº‰ã€‚</li><li>ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç«äº‰åˆ°å¯¹è±¡é”çš„æ¦‚ç‡å¤§ï¼Œå‡è‹¥æŸçº¿ç¨‹æ²¡æœ‰ç«äº‰åˆ°è¯¥å¯¹è±¡é”ï¼Œå®ƒè¿˜ä¼šç•™åœ¨é”æ± ä¸­ï¼Œå”¯æœ‰çº¿ç¨‹å†æ¬¡è°ƒç”¨ wait()æ–¹æ³•ï¼Œå®ƒæ‰ä¼šé‡æ–°å›åˆ°ç­‰å¾…æ± ä¸­ã€‚è€Œç«äº‰åˆ°å¯¹è±¡é”çš„çº¿ç¨‹åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œäº† synchronized ä»£ç å—ï¼Œå®ƒä¼šé‡Šæ”¾æ‰è¯¥å¯¹è±¡é”ï¼Œè¿™æ—¶é”æ± ä¸­çš„çº¿ç¨‹ä¼šç»§ç»­ç«äº‰è¯¥å¯¹è±¡é”ã€‚</li></ul><p><strong>43ã€çº¿ç¨‹çš„run()å’Œstart()æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</strong></p><ul><li><p>æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯é€šè¿‡æŸä¸ªç‰¹å®šThreadå¯¹è±¡æ‰€å¯¹åº”çš„æ–¹æ³•run()æ¥æ¥å®Œæˆå…¶æ“ä½œçš„ï¼Œæ–¹æ³•run()ç§°ä¸ºçº¿ç¨‹ä½“ã€‚é€šè¿‡è°ƒç”¨Threadç±»çš„start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p></li><li><p>start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚æ­¤æ—¶æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼›æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€çš„ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ç„¶åé€šè¿‡æ­¤Threadç±»è°ƒç”¨æ–¹æ³•run()æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œè¿™é‡Œrun()ç§°ä¸ºçº¿ç¨‹ä½“ï¼Œå®ƒåŒ…å«äº†è¦æ‰§è¡Œçš„è¿™ä¸ªçº¿ç¨‹çš„å†…å®¹ï¼ŒRunæ–¹æ³•è¿è¡Œç»“æŸï¼Œæ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶åCPUå†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚</p></li><li><p>run()æ–¹æ³•æ˜¯åœ¨æœ¬çº¿ç¨‹é‡Œçš„ï¼Œåªæ˜¯çº¿ç¨‹é‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯å¤šçº¿ç¨‹çš„ã€‚å¦‚æœç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªè¹¼æ³³å‡½æ•°è€Œå·²ï¼Œç›´æ¥ç”¨run()æ–¹æ³•å¿…é¡»ç­‰å¾…run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ‰€ä»¥æ‰§è¡Œè·¯å¾„è¿˜æ˜¯åªæœ‰ä¸€æ¡ï¼Œæ ¹æœ¬å°±æ²¡æœ‰ç°æˆçš„ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶è¦ä½¿ç”¨start()æ–¹æ³•è€Œä¸æ˜¯run()æ–¹æ³•ã€‚</p></li></ul><p><strong>44ã€åˆ›å»ºçº¿ç¨‹æ± æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</strong></p><ol><li><p>newFixedThreadPool(int nThreads) </p><p>åˆ›å»ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œæ¯å½“æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§æ•°é‡ï¼Œè¿™æ—¶çº¿ç¨‹è§„æ¨¡å°†ä¸å†å˜åŒ–ï¼Œå½“çº¿ç¨‹å‘ç”Ÿæœªé¢„æœŸçš„é”™è¯¯è€Œç»“æŸæ—¶ï¼Œçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚</p></li><li><p>newCachedThreadPool() </p><p>åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± çš„è§„æ¨¡è¶…è¿‡äº†å¤„ç†éœ€æ±‚ï¼Œå°†è‡ªåŠ¨å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè€Œå½“éœ€æ±‚å¢åŠ æ—¶ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨æ·»åŠ æ–°çº¿ç¨‹ï¼Œçº¿ç¨‹æ± çš„è§„æ¨¡ä¸å­˜åœ¨ä»»ä½•é™åˆ¶ã€‚</p></li><li><p>newSingleThreadExecutor()</p><p>è¿™æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„Executor,å®ƒåˆ›å»ºå•ä¸ªå·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœè¿™ä¸ªçº¿ç¨‹å¼‚å¸¸ç»“æŸï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥ä»£æ›¿å®ƒï¼›å®ƒçš„ç‰¹ç‚¹æ˜¯èƒ½ç¡®ä¿ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­çš„é¡ºåºæ¥ä¸²è¡Œæ‰§è¡Œã€‚</p></li><li><p>newScheduledThreadPool(int corePoolSize)</p><p>åˆ›å»ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œè€Œä¸”ä»¥å»¶è¿Ÿæˆ–å®šæ—¶çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼äºTimer</p></li></ol><p><strong>45ã€çº¿ç¨‹æ± æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</strong></p><p>çº¿ç¨‹æ± æœ‰5ç§çŠ¶æ€ï¼šRunningã€ShutDownã€Stopã€Tidyingã€Terminatedã€‚</p><p>çº¿ç¨‹æ± å„ä¸ªçŠ¶æ€åˆ‡æ¢æ¡†æ¶å›¾ï¼š</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5zjjhkfkmj30sp0ba0ts.jpg" alt="901565790296_.pic"></p><p>46ã€çº¿ç¨‹æ± ä¸­çš„submit()å’Œexecute()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>æ¥æ”¶çš„å‚æ•°ä¸ä¸€æ ·</li><li>submitæœ‰è¿”å›å€¼ï¼Œè€Œexecuteæ²¡æœ‰</li><li>submitæ–¹ä¾¿Execeptionå¤„ç†</li></ul><p>47ã€åœ¨Javaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ</p><p>çº¿ç¨‹å®‰å…¨åœ¨ä¸‰ä¸ªæ–¹é¢ä½“ç°ï¼š</p><ul><li>åŸå­æ€§ï¼šæä¾›äº’æ–¥è®¿é—®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚</li><li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜çš„ä¿®æ”¹å¯ä»¥åŠæ—¶åœ°è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ã€‚</li><li>æœ‰åºæ€§ï¼šä¸€ä¸ªçº¿ç¨‹è§‚å¯Ÿå…¶ä»–çº¿ç¨‹ä¸­çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºï¼Œç”±äºæŒ‡ä»¤é‡æ’åºï¼Œè¯¥è§‚å¯Ÿç»“æœä¸€èˆ¬æ‚ä¹±æ— åºã€‚</li></ul><p><strong>48ã€å¤šçº¿ç¨‹é”çš„å‡çº§åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>åœ¨Javaä¸­ï¼Œé”å…±æœ‰4ç§çŠ¶æ€ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼šæ— çŠ¶æ€é”ï¼Œåå‘é”ï¼Œè½»é‡çº§é”å’Œé‡é‡çº§é”çŠ¶æ€ï¼Œè¿™å‡ ä¸ªçŠ¶æ€éšç€ç«äº‰æƒ…å†µé€æ¸å‡çº§ã€‚é”å¯ä»¥å‡çº§ä½†ä¸èƒ½é™çº§ã€‚</p><p>é”å‡çº§çš„å›¾ç¤ºè¿‡ç¨‹ï¼š</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5zjs3v3e4j30nq0d5wfy.jpg" alt="911565790802_.pic"></p><p><strong>49ã€ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ</strong></p><p>æ­»é”æ˜¯ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡çš„é€ æˆçš„ä¸€ç§é˜»å¡çº¿ç¨‹ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€ã€‚</p><p><strong>50ã€æ€æ ·é˜²æ­¢æ­»é”ï¼Ÿ</strong></p><p>æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ol><li>äº’æ–¥æ¡ä»¶ï¼š</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</li><li>ä¸å¯å‰¥å¤ºæ¡ä»¶</li><li>ç¯è·¯ç­‰å¾…æ¡ä»¶</li></ol><p><strong>51ã€ThreadLocalæ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</strong></p><p>çº¿ç¨‹å±€éƒ¨å˜é‡æ˜¯å±€é™äºçº¿ç¨‹å†…éƒ¨çš„å˜é‡ï¼Œå±äºçº¿ç¨‹è‡ªèº«æ‰€æœ‰ï¼Œä¸åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«ã€‚Javaæä¾›ThreadLocalç±»æ¥æ”¯æŒçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ˜¯ä¸€ç§å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨ç®¡ç†ç¯å¢ƒä¸‹ï¼ˆå¦‚ web æœåŠ¡å™¨ï¼‰ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·¥ä½œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ¯”ä»»ä½•åº”ç”¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½è¦é•¿ã€‚ä»»ä½•çº¿ç¨‹å±€éƒ¨å˜é‡ä¸€æ—¦åœ¨å·¥ä½œå®Œæˆåæ²¡æœ‰é‡Šæ”¾ï¼ŒJava åº”ç”¨å°±å­˜åœ¨å†…å­˜æ³„éœ²çš„é£é™©ã€‚</p><p><strong>52ã€è¯´ä¸€ä¸‹synchronizedåº•å±‚å®ç°åŸç†ï¼Ÿ</strong></p><p>synchronizedå¯ä»¥ä¿è¯æ–¹æ³•æˆ–è€…ä»£ç å—åœ¨è¿è¡Œæ—¶ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è¿›å…¥åˆ°ä¸´ç•ŒåŒºï¼ŒåŒæ—¶å®ƒè¿˜å¯ä»¥ä¿è¯å…±äº«å˜é‡çš„å†…å­˜å¯è§æ€§ã€‚</p><p>Javaä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œè¿™æ˜¯synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼š</p><ul><li>æ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</li><li>é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„classå¯¹è±¡</li><li>åŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</li></ul><p><strong>53ã€synchronized å’Œ volatile çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>volatileæœ¬è´¨æ˜¯åœ¨å‘Šè¯‰jvmå½“å‰å˜é‡åœ¨å¯„å­˜å™¨ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼› synchronizedåˆ™æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚</li><li>volatileä»…èƒ½ä½¿ç”¨åœ¨å˜é‡çº§åˆ«ï¼›synchronizedåˆ™å¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€å’Œç±»çº§åˆ«çš„ã€‚</li><li>volatileä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œsynchronizedåˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§ã€‚</li><li>volatileä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronizedå¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ã€‚</li><li>volatileæ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronizedæ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</li></ul><p><strong>54ã€synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>é¦–å…ˆsynchronizedæ˜¯javaå†…ç½®å…³é”®å­—ï¼Œåœ¨jvmå±‚é¢ï¼ŒLockæ˜¯ä¸ªjavaç±»ï¼›</li><li>synchronizedæ— æ³•åˆ¤æ–­æ˜¯å¦è·å–é”çš„çŠ¶æ€ï¼ŒLockå¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼›</li><li>synchronizedä¼šè‡ªåŠ¨é‡Šæ”¾é”(a çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ä¼šé‡Šæ”¾é” ï¼›b çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä¼šé‡Šæ”¾é”)ï¼ŒLockéœ€åœ¨finallyä¸­æ‰‹å·¥é‡Šæ”¾é”ï¼ˆunlock()æ–¹æ³•é‡Šæ”¾é”ï¼‰ï¼Œå¦åˆ™å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”ï¼›</li><li>ç”¨synchronizedå…³é”®å­—çš„ä¸¤ä¸ªçº¿ç¨‹1å’Œçº¿ç¨‹2ï¼Œå¦‚æœå½“å‰çº¿ç¨‹1è·å¾—é”ï¼Œçº¿ç¨‹2çº¿ç¨‹ç­‰å¾…ã€‚å¦‚æœçº¿ç¨‹1é˜»å¡ï¼Œçº¿ç¨‹2åˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€ŒLocké”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ï¼Œå¦‚æœå°è¯•è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…å°±ç»“æŸäº†ï¼›</li><li>synchronizedçš„é”å¯é‡å…¥ã€ä¸å¯ä¸­æ–­ã€éå…¬å¹³ï¼Œè€ŒLocké”å¯é‡å…¥ã€å¯åˆ¤æ–­ã€å¯å…¬å¹³ï¼ˆä¸¤è€…çš†å¯ï¼‰ï¼›</li><li>Locké”é€‚åˆå¤§é‡åŒæ­¥çš„ä»£ç çš„åŒæ­¥é—®é¢˜ï¼Œsynchronizedé”é€‚åˆä»£ç å°‘é‡çš„åŒæ­¥é—®é¢˜ã€‚</li></ul><p><strong>55. synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>synchronizedæ˜¯å’Œifã€elseã€forã€whileä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLockæ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚æ—¢ç„¶ReentrantLockæ˜¯ç±»ï¼Œé‚£ä¹ˆå®ƒå°±æä¾›äº†æ¯”synchronizedæ›´å¤šæ›´çµæ´»çš„ç‰¹æ€§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€å¯ä»¥æœ‰æ–¹æ³•ã€å¯ä»¥æœ‰å„ç§å„æ ·çš„ç±»å˜é‡ï¼ŒReentrantLockæ¯”synchronizedçš„æ‰©å±•æ€§ä½“ç°åœ¨å‡ ç‚¹ä¸Šï¼š </p><ul><li>ReentrantLockå¯ä»¥å¯¹è·å–é”çš„ç­‰å¾…æ—¶é—´è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·å°±é¿å…äº†æ­»é” </li><li>ReentrantLockå¯ä»¥è·å–å„ç§é”çš„ä¿¡æ¯</li><li>ReentrantLockå¯ä»¥çµæ´»åœ°å®ç°å¤šè·¯é€šçŸ¥ </li></ul><p>å¦å¤–ï¼ŒäºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„:ReentrantLockåº•å±‚è°ƒç”¨çš„æ˜¯Unsafeçš„parkæ–¹æ³•åŠ é”ï¼Œsynchronizedæ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­mark wordã€‚</p><p><strong>56. è¯´ä¸€ä¸‹ atomic çš„åŸç†ï¼Ÿ</strong></p><p>AtomicåŒ…ä¸­çš„ç±»åŸºæœ¬çš„ç‰¹æ€§å°±æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å•ä¸ªï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»å‹åŠå¼•ç”¨ç±»å‹ï¼‰å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œå…·æœ‰æ’ä»–æ€§ï¼Œå³å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹è¯¥å˜é‡çš„å€¼è¿›è¡Œæ›´æ–°æ—¶ï¼Œä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸï¼Œè€ŒæœªæˆåŠŸçš„çº¿ç¨‹å¯ä»¥å‘è‡ªæ—‹é”ä¸€æ ·ï¼Œç»§ç»­å°è¯•ï¼Œä¸€ç›´ç­‰åˆ°æ‰§è¡ŒæˆåŠŸã€‚</p><p>Atomicç³»åˆ—çš„ç±»ä¸­çš„æ ¸å¿ƒæ–¹æ³•éƒ½ä¼šè°ƒç”¨unsafeç±»ä¸­çš„å‡ ä¸ªæœ¬åœ°æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“ä¸€ä¸ªä¸œè¥¿å°±æ˜¯Unsafeç±»ï¼Œå…¨åä¸ºï¼šsun.misc.Unsafeï¼Œè¿™ä¸ªç±»åŒ…å«äº†å¤§é‡çš„å¯¹Cä»£ç çš„æ“ä½œï¼ŒåŒ…æ‹¬å¾ˆå¤šç›´æ¥å†…å­˜åˆ†é…ä»¥åŠåŸå­æ“ä½œçš„è°ƒç”¨ï¼Œè€Œå®ƒä¹‹æ‰€ä»¥æ ‡è®°ä¸ºéå®‰å…¨çš„ï¼Œæ˜¯å‘Šè¯‰ä½ è¿™ä¸ªé‡Œé¢å¤§é‡çš„æ–¹æ³•è°ƒç”¨éƒ½ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ï¼Œéœ€è¦å°å¿ƒä½¿ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸¥é‡çš„åæœï¼Œä¾‹å¦‚åœ¨é€šè¿‡unsafeåˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œå¦‚æœè‡ªå·±æŒ‡å®šæŸäº›åŒºåŸŸå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç±»ä¼¼C++ä¸€æ ·çš„æŒ‡é’ˆè¶Šç•Œåˆ°å…¶ä»–è¿›ç¨‹çš„é—®é¢˜ã€‚</p><h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><p>57ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</p><p>åå°„ä¸»è¦æ˜¯æŒ‡ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›</p><p>Javaåå°„ï¼š</p><p>åœ¨Javaè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œèƒ½å¦çŸ¥é“è¿™ä¸ªç±»æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¦è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•</p><p>58ã€ä»€ä¹ˆæ˜¯javaåºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ</p><p>ç®€å•è¯´å°±æ˜¯ä¸ºäº†ä¿å­˜åœ¨å†…å­˜ä¸­çš„å„ç§å¯¹è±¡çš„çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹å˜é‡ï¼Œä¸æ˜¯æ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥æŠŠä¿å­˜çš„å¯¹è±¡çŠ¶æ€å†è¯»å‡ºæ¥ã€‚è™½ç„¶ä½ å¯ä»¥ç”¨ä½ è‡ªå·±çš„å„ç§å„æ ·çš„æ–¹æ³•æ¥ä¿å­˜object statesï¼Œä½†æ˜¯Javaç»™ä½ æä¾›ä¸€ç§åº”è¯¥æ¯”ä½ è‡ªå·±å¥½çš„ä¿å­˜å¯¹è±¡çŠ¶æ€çš„æœºåˆ¶ï¼Œé‚£å°±æ˜¯åºåˆ—åŒ–ã€‚</p><p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼š</p><p>aï¼‰å½“ä½ æƒ³æŠŠçš„å†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶å€™ï¼›<br>bï¼‰å½“ä½ æƒ³ç”¨å¥—æ¥å­—åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„æ—¶å€™ï¼›<br>cï¼‰å½“ä½ æƒ³é€šè¿‡RMIä¼ è¾“å¯¹è±¡çš„æ—¶å€™ï¼›</p><p>59ã€åŠ¨æ€ä»£ç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨ï¼Ÿ</p><p>åŠ¨æ€ä»£ç†ï¼š</p><p>å½“æƒ³è¦ç»™å®ç°äº†æŸä¸ªæ¥å£çš„ç±»ä¸­çš„æ–¹æ³•ï¼ŒåŠ ä¸€äº›é¢å¤–çš„å¤„ç†ã€‚æ¯”å¦‚è¯´åŠ æ—¥å¿—ï¼ŒåŠ äº‹åŠ¡ç­‰ã€‚å¯ä»¥ç»™è¿™ä¸ªç±»åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œæ•…åæ€è®®å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œè¿™ä¸ªç±»ä¸ä»…åŒ…å«åŸæ¥ç±»æ–¹æ³•çš„åŠŸèƒ½ï¼Œè€Œä¸”è¿˜åœ¨åŸæ¥çš„åŸºç¡€ä¸Šæ·»åŠ äº†é¢å¤–å¤„ç†çš„æ–°ç±»ã€‚è¿™ä¸ªä»£ç†ç±»å¹¶ä¸æ˜¯å®šä¹‰å¥½çš„ï¼Œæ˜¯åŠ¨æ€ç”Ÿæˆçš„ã€‚å…·æœ‰è§£è€¦æ„ä¹‰ï¼Œçµæ´»ï¼Œæ‰©å±•æ€§å¼ºã€‚</p><p>åŠ¨æ€ä»£ç†çš„åº”ç”¨ï¼š</p><ul><li>Springçš„AOP</li><li>åŠ äº‹åŠ¡</li><li>åŠ æƒé™</li><li>åŠ æ—¥å¿—</li></ul><p>60ã€æ€æ ·å®ç°åŠ¨æ€ä»£ç†ï¼Ÿ</p><p>é¦–å…ˆå¿…é¡»å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè¿˜è¦æœ‰ä¸€ä¸ªInvocationHandler(å°†å®ç°æ¥å£çš„ç±»çš„å¯¹è±¡ä¼ é€’ç»™å®ƒ)å¤„ç†ç±»ã€‚å†æœ‰ä¸€ä¸ªå·¥å…·ç±»Proxy(ä¹ æƒ¯æ€§å°†å…¶ç§°ä¸ºä»£ç†ç±»ï¼Œå› ä¸ºè°ƒç”¨ä»–çš„newInstance()å¯ä»¥äº§ç”Ÿä»£ç†å¯¹è±¡,å…¶å®ä»–åªæ˜¯ä¸€ä¸ªäº§ç”Ÿä»£ç†å¯¹è±¡çš„å·¥å…·ç±»ï¼‰ã€‚åˆ©ç”¨åˆ°InvocationHandlerï¼Œæ‹¼æ¥ä»£ç†ç±»æºç ï¼Œå°†å…¶ç¼–è¯‘ç”Ÿæˆä»£ç†ç±»çš„äºŒè¿›åˆ¶ç ï¼Œåˆ©ç”¨åŠ è½½å™¨åŠ è½½ï¼Œå¹¶å°†å…¶å®ä¾‹åŒ–äº§ç”Ÿä»£ç†å¯¹è±¡ï¼Œæœ€åè¿”å›ã€‚</p><h2 id="å¯¹è±¡æ‹·è´"><a href="#å¯¹è±¡æ‹·è´" class="headerlink" title="å¯¹è±¡æ‹·è´"></a>å¯¹è±¡æ‹·è´</h2><p>61ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ</p><p>æƒ³å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œåˆæƒ³ä¿ç•™åŸæœ‰æ•°æ®è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œï¼Œå°±éœ€è¦å…‹éš†ï¼ŒJavaè¯­è¨€ä¸­å…‹éš†é’ˆå¯¹çš„æ˜¯ç±»çš„å®ä¾‹ã€‚</p><p>62ã€å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ</p><p>æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><p>1). å®ç°Cloneableæ¥å£å¹¶é‡å†™Objectç±»ä¸­çš„clone()æ–¹æ³•ï¼›</p><p>â€ƒâ€ƒ</p><p>2). å®ç°Serializableæ¥å£ï¼Œé€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°å…‹éš†ï¼Œå¯ä»¥å®ç°çœŸæ­£çš„æ·±åº¦å…‹éš†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p><strong>63. æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>æµ…æ‹·è´åªæ˜¯å¤åˆ¶äº†å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¿®æ”¹å…¶ä¸­ä»»æ„çš„å€¼ï¼Œå¦ä¸€ä¸ªå€¼éƒ½ä¼šéšä¹‹å˜åŒ–ï¼Œè¿™å°±æ˜¯æµ…æ‹·è´ï¼ˆä¾‹ï¼šassign()ï¼‰</li><li>æ·±æ‹·è´æ˜¯å°†å¯¹è±¡åŠå€¼å¤åˆ¶è¿‡æ¥ï¼Œä¸¤ä¸ªå¯¹è±¡ä¿®æ”¹å…¶ä¸­ä»»æ„çš„å€¼å¦ä¸€ä¸ªå€¼ä¸ä¼šæ”¹å˜ï¼Œè¿™å°±æ˜¯æ·±æ‹·è´ï¼ˆä¾‹ï¼šJSON.parse()å’ŒJSON.stringify()ï¼Œä½†æ˜¯æ­¤æ–¹æ³•æ— æ³•å¤åˆ¶å‡½æ•°ç±»å‹ï¼‰</li></ul><h2 id="Java-Web"><a href="#Java-Web" class="headerlink" title="Java Web"></a>Java Web</h2><p>64ã€JSPå’ŒServletæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ol><li>jspç»è¿‡ç¼–è¯‘å˜æˆservlet</li><li>jspæ›´æ“…é•¿äºé¡µé¢æ§åˆ¶ï¼Œservletæ›´æ“…é•¿ä¸é€»è¾‘æ§åˆ¶</li><li>servletä¸­æ²¡æœ‰å†…ç½®å¯¹è±¡ï¼Œjspçš„å†…ç½®å¯¹è±¡éƒ½æ˜¯å¿…é¡»é€šè¿‡HttpServletRequestå¯¹è±¡ï¼ŒHttpServletResponseå¯¹è±¡ä»¥åŠHttpServletå¯¹è±¡å¾—åˆ°ã€‚</li><li>Jspæ˜¯Servletçš„ä¸€ç§ç®€åŒ–ï¼Œä½¿ç”¨Jspåªéœ€è¦å®Œæˆç¨‹åºå‘˜éœ€è¦è¾“å‡ºåˆ°å®¢æˆ·ç«¯çš„å†…å®¹ï¼ŒJspä¸­çš„Javaè„šæœ¬å¦‚ä½•é•¶åµŒåˆ°ä¸€ä¸ªç±»ä¸­ï¼Œç”±Jspå®¹å™¨å®Œæˆã€‚è€ŒServletåˆ™æ˜¯ä¸ªå®Œæ•´çš„Javaç±»ï¼Œè¿™ä¸ªç±»çš„Serviceæ–¹æ³•ç”¨äºç”Ÿæˆå¯¹å®¢æˆ·ç«¯çš„å“åº”ã€‚</li></ol><p><strong>65ã€JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>JSPæœ‰9ä¸ªå†…ç½®å¯¹è±¡ï¼š</p><ul><li>requestï¼šå°è£…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªGETæˆ–POSTè¯·æ±‚çš„å‚æ•°ï¼›</li><li>responseï¼šå°è£…æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„å“åº”ï¼›</li><li>pageContextï¼šé€šè¿‡è¯¥å¯¹è±¡å¯ä»¥è·å–å…¶ä»–å¯¹è±¡ï¼›</li><li>sessionï¼šå°è£…ç”¨æˆ·ä¼šè¯çš„å¯¹è±¡ï¼›</li><li>applicationï¼šå°è£…æœåŠ¡å™¨è¿è¡Œç¯å¢ƒçš„å¯¹è±¡ï¼›</li><li>outï¼šè¾“å‡ºæœåŠ¡å™¨å“åº”çš„è¾“å‡ºæµå¯¹è±¡ï¼›</li><li>configï¼šWebåº”ç”¨çš„é…ç½®å¯¹è±¡ï¼›</li><li>pageï¼šJSPé¡µé¢æœ¬èº«ï¼ˆç›¸å½“äºJavaç¨‹åºä¸­çš„thisï¼‰ï¼›</li><li>exceptionï¼šå°è£…é¡µé¢æŠ›å‡ºå¼‚å¸¸çš„å¯¹è±¡ã€‚</li></ul><p><strong>66ã€è¯´ä¸€ä¸‹jspçš„4ç§ä½œç”¨åŸŸï¼Ÿ</strong></p><p>JSPçš„å››ç§ä½œç”¨åŸŸåŒ…æ‹¬pageã€requestã€sessionã€aaplicationï¼š</p><ul><li>pageä»£è¡¨ä¸ä¸€ä¸ªé¡µé¢ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚</li><li>requestä»£è¡¨ä¸Webå®¢æˆ·æœºå‘å‡ºçš„ä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚</li><li>sessionä»£è¡¨æŸä¸ªç”¨æˆ·ä¸æœåŠ¡å™¨å»ºç«‹çš„ä¸€æ¬¡ä¼šè¯ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚è·ŸæŸä¸ªç”¨æˆ·ç›¸å…³çš„æ•°æ®åº”è¯¥æ”¾åœ¨ç”¨æˆ·è‡ªå·±çš„sessionä¸­ã€‚</li><li>applicationä»£è¡¨ä¸æ•´ä¸ªWebåº”ç”¨ç¨‹åºç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ï¼Œå®ƒå®è´¨ä¸Šå¸‚è·¨è¶Šæ•´ä¸ªWebåº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å¤šä¸ªé¡µé¢ï¼Œè¯·æ±‚å’Œä¼šè¯çš„ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸã€‚</li></ul><p>67ã€Sessionå’ŒCookieæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>ç”±äºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥æœåŠ¡ç«¯éœ€è¦è®°å½•ç”¨æˆ·çš„çŠ¶æ€æ—¶ï¼Œå°±éœ€è¦ç”¨æŸç§æœºåˆ¶æ¥è¯†å…·ä½“çš„ç”¨æˆ·ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯Session.å…¸å‹çš„åœºæ™¯æ¯”å¦‚è´­ç‰©è½¦ï¼Œå½“ä½ ç‚¹å‡»ä¸‹å•æŒ‰é’®æ—¶ï¼Œç”±äºHTTPåè®®æ— çŠ¶æ€ï¼Œæ‰€ä»¥å¹¶ä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œæ‰€ä»¥æœåŠ¡ç«¯è¦ä¸ºç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºäº†ç‰¹å®šçš„Sessionï¼Œç”¨ç”¨äºæ ‡è¯†è¿™ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”è·Ÿè¸ªç”¨æˆ·ï¼Œè¿™æ ·æ‰çŸ¥é“è´­ç‰©è½¦é‡Œé¢æœ‰å‡ æœ¬ä¹¦ã€‚è¿™ä¸ªSessionæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„ï¼Œæœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚åœ¨æœåŠ¡ç«¯ä¿å­˜Sessionçš„æ–¹æ³•å¾ˆå¤šï¼Œå†…å­˜ã€æ•°æ®åº“ã€æ–‡ä»¶éƒ½æœ‰ã€‚é›†ç¾¤çš„æ—¶å€™ä¹Ÿè¦è€ƒè™‘Sessionçš„è½¬ç§»ï¼Œåœ¨å¤§å‹çš„ç½‘ç«™ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸“é—¨çš„SessionæœåŠ¡å™¨é›†ç¾¤ï¼Œç”¨æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯ï¼Œè¿™ä¸ªæ—¶å€™ Session ä¿¡æ¯éƒ½æ˜¯æ”¾åœ¨å†…å­˜çš„ï¼Œä½¿ç”¨ä¸€äº›ç¼“å­˜æœåŠ¡æ¯”å¦‚Memcachedä¹‹ç±»çš„æ¥æ”¾ Sessionã€‚</li><li>æ€è€ƒä¸€ä¸‹æœåŠ¡ç«¯å¦‚ä½•è¯†åˆ«ç‰¹å®šçš„å®¢æˆ·ï¼Ÿè¿™ä¸ªæ—¶å€™Cookieå°±ç™»åœºäº†ã€‚æ¯æ¬¡HTTPè¯·æ±‚çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šå‘é€ç›¸åº”çš„Cookieä¿¡æ¯åˆ°æœåŠ¡ç«¯ã€‚å®é™…ä¸Šå¤§å¤šæ•°çš„åº”ç”¨éƒ½æ˜¯ç”¨ Cookie æ¥å®ç°Sessionè·Ÿè¸ªçš„ï¼Œç¬¬ä¸€æ¬¡åˆ›å»ºSessionçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šåœ¨HTTPåè®®ä¸­å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œéœ€è¦åœ¨ Cookie é‡Œé¢è®°å½•ä¸€ä¸ªSession IDï¼Œä»¥åæ¯æ¬¡è¯·æ±‚æŠŠè¿™ä¸ªä¼šè¯IDå‘é€åˆ°æœåŠ¡å™¨ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯è°äº†ã€‚æœ‰äººé—®ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æµè§ˆå™¨ç¦ç”¨äº† Cookie æ€ä¹ˆåŠï¼Ÿä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ä¸€ç§å«åšURLé‡å†™çš„æŠ€æœ¯æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªï¼Œå³æ¯æ¬¡HTTPäº¤äº’ï¼ŒURLåé¢éƒ½ä¼šè¢«é™„åŠ ä¸Šä¸€ä¸ªè¯¸å¦‚ sid=xxxxx è¿™æ ·çš„å‚æ•°ï¼ŒæœåŠ¡ç«¯æ®æ­¤æ¥è¯†åˆ«ç”¨æˆ·ã€‚</li><li>Cookieå…¶å®è¿˜å¯ä»¥ç”¨åœ¨ä¸€äº›æ–¹ä¾¿ç”¨æˆ·çš„åœºæ™¯ä¸‹ï¼Œè®¾æƒ³ä½ æŸæ¬¡ç™»é™†è¿‡ä¸€ä¸ªç½‘ç«™ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™ä¸æƒ³å†æ¬¡è¾“å…¥è´¦å·äº†ï¼Œæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªä¿¡æ¯å¯ä»¥å†™åˆ°Cookieé‡Œé¢ï¼Œè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œç½‘ç«™é¡µé¢çš„è„šæœ¬å¯ä»¥è¯»å–è¿™ä¸ªä¿¡æ¯ï¼Œå°±è‡ªåŠ¨å¸®ä½ æŠŠç”¨æˆ·åç»™å¡«äº†ï¼Œèƒ½å¤Ÿæ–¹ä¾¿ä¸€ä¸‹ç”¨æˆ·ã€‚è¿™ä¹Ÿæ˜¯Cookieåç§°çš„ç”±æ¥ï¼Œç»™ç”¨æˆ·çš„ä¸€ç‚¹ç”œå¤´ã€‚æ‰€ä»¥ï¼Œæ€»ç»“ä¸€ä¸‹ï¼šSessionæ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼›Cookieæ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç°Sessionçš„ä¸€ç§æ–¹å¼ã€‚</li></ul><p>68ã€è¯´ä¸€ä¸‹Sessionçš„å·¥ä½œåŸç†ï¼Ÿ</p><p>å…¶å®sessionæ˜¯ä¸€ä¸ªå­˜åœ¨æœåŠ¡å™¨ä¸Šçš„ç±»ä¼¼äºä¸€ä¸ªæ•£åˆ—è¡¨æ ¼çš„æ–‡ä»¶ã€‚é‡Œé¢å­˜æœ‰æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼Œåœ¨æˆ‘ä»¬éœ€è¦ç”¨çš„æ—¶å€™å¯ä»¥ä»é‡Œé¢å–å‡ºæ¥ã€‚ç±»ä¼¼äºä¸€ä¸ªå¤§å·çš„mapå§ï¼Œé‡Œé¢çš„é”®å­˜å‚¨çš„æ˜¯ç”¨æˆ·çš„sessionidï¼Œç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ä¼šå¸¦ä¸Šè¿™ä¸ªsessionidã€‚è¿™æ—¶å°±å¯ä»¥ä»ä¸­å–å‡ºå¯¹åº”çš„å€¼äº†ã€‚</p><p>69ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢cookieèƒ½å®ç°sessionè¿˜èƒ½ç”¨å—ï¼Ÿ</p><p>Cookieä¸ Sessionï¼Œä¸€èˆ¬è®¤ä¸ºæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸œè¥¿ï¼ŒSessioné‡‡ç”¨çš„æ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆï¼Œè€ŒCookieé‡‡ç”¨çš„æ˜¯åœ¨å®¢æˆ·ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆã€‚ä½†ä¸ºä»€ä¹ˆç¦ç”¨Cookieå°±ä¸èƒ½å¾—åˆ°Sessionå‘¢ï¼Ÿå› ä¸ºSessionæ˜¯ç”¨Session IDæ¥ç¡®å®šå½“å‰å¯¹è¯æ‰€å¯¹åº”çš„æœåŠ¡å™¨Sessionï¼Œè€ŒSession IDæ˜¯é€šè¿‡Cookieæ¥ä¼ é€’çš„ï¼Œç¦ç”¨Cookieç›¸å½“äºå¤±å»äº†Session IDï¼Œä¹Ÿå°±å¾—ä¸åˆ°Sessionäº†ã€‚</p><p>å‡å®šç”¨æˆ·å…³é—­Cookieçš„æƒ…å†µä¸‹ä½¿ç”¨Sessionï¼Œå…¶å®ç°é€”å¾„æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>è®¾ç½®php.inié…ç½®æ–‡ä»¶ä¸­çš„â€œsession.use_trans_sid = 1â€ï¼Œæˆ–è€…ç¼–è¯‘æ—¶æ‰“å¼€æ‰“å¼€äº†â€œâ€“enable-trans-sidâ€é€‰é¡¹ï¼Œè®©PHPè‡ªåŠ¨è·¨é¡µä¼ é€’Session IDã€‚</li><li>æ‰‹åŠ¨é€šè¿‡URLä¼ å€¼ã€éšè—è¡¨å•ä¼ é€’Session IDã€‚</li><li>ç”¨æ–‡ä»¶ã€æ•°æ®åº“ç­‰å½¢å¼ä¿å­˜Session IDï¼Œåœ¨è·¨é¡µè¿‡ç¨‹ä¸­æ‰‹åŠ¨è°ƒç”¨ã€‚</li></ol><p>70ã€SpringMVCå’ŒStrutsçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>æ‹¦æˆªæœºåˆ¶ä¸åŒ</li></ul><p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å°±ä¼šåˆ›å»ºä¸€ä¸ªActionï¼Œå’ŒSpringæ•´åˆæ—¶Struts2çš„ActionBeanæ³¨å…¥ä½œç”¨åŸŸæ˜¯åŸå‹æ¨¡å¼prototypeï¼Œç„¶åé€šè¿‡setterï¼Œgetterå§requestæ•°æ®æ³¨å…¥åˆ°å±æ€§ã€‚Struts2ä¸­ï¼Œä¸€ä¸ªActionå¯¹åº”ä¸€ä¸ªrequestï¼Œresponseä¸Šä¸‹æ–‡ï¼Œåœ¨æ¥æ”¶å‚æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡å±æ€§æ¥æ”¶ï¼Œè¿™è¯´æ˜å±æ€§å‚æ•°æ˜¯è®©å¤šä¸ªæ–¹æ³•å…±äº«çš„ã€‚Struts2ä¸­Actionçš„ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¯¹åº”ä¸€ä¸ªurlï¼Œè€Œå…¶ç±»å±æ€§å´è¢«æ‰€æœ‰æ–¹æ³•å…±äº«ï¼Œè¿™ä¹Ÿå°±æ— æ³•ç”¨æ³¨è§£æˆ–å…¶ä»–æ–¹å¼æ ‡è¯†å…¶æ‰€å±æ–¹æ³•äº†ï¼Œåªèƒ½è®¾è®¡ä¸ºå¤šä¾‹ã€‚</p><p>ã€€ã€€</p><p>SpringMVCæ˜¯æ–¹æ³•çº§åˆ«çš„æ‹¦æˆªï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªRequestä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æ–¹æ³•ç›´æ¥åŸºæœ¬ä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œç‹¬äº«requestï¼Œresponseæ•°æ®ã€‚è€Œæ¯ä¸ªæ–¹æ³•åŒæ—¶åˆä½•ä¸€ä¸ªurlå¯¹åº”ï¼Œå‚æ•°çš„ä¼ é€’æ˜¯ç›´æ¥æ³¨å…¥åˆ°æ–¹æ³•ä¸­çš„ï¼Œæ˜¯æ–¹æ³•æ‰€ç‹¬æœ‰çš„ã€‚å¤„ç†ç»“æœé€šè¿‡ModeMapè¿”å›ç»™æ¡†æ¶ã€‚åœ¨Springæ•´åˆæ—¶ï¼ŒSpringMVCçš„Controller Beané»˜è®¤å•ä¾‹æ¨¡å¼Singletonï¼Œæ‰€ä»¥é»˜è®¤å¯¹æ‰€æœ‰çš„è¯·æ±‚ï¼Œåªä¼šåˆ›å»ºä¸€ä¸ªControllerï¼Œæœ‰åº”ä¸ºæ²¡æœ‰å…±äº«çš„å±æ€§ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœè¦æ”¹å˜é»˜è®¤çš„ä½œç”¨åŸŸï¼Œéœ€è¦æ·»åŠ @Scopeæ³¨è§£ä¿®æ”¹ã€‚</p><p>ã€€ã€€</p><p>Struts2æœ‰è‡ªå·±çš„æ‹¦æˆªInterceptoræœºåˆ¶ï¼ŒSpringMVCè¿™æ˜¯ç”¨çš„æ˜¯ç‹¬ç«‹çš„Aopæ–¹å¼ï¼Œè¿™æ ·å¯¼è‡´Struts2çš„é…ç½®æ–‡ä»¶é‡è¿˜æ˜¯æ¯”SpringMVCå¤§ã€‚</p><ul><li>åº•å±‚æ¡†æ¶ä¸åŒ</li></ul><p>Struts2é‡‡ç”¨Filterï¼ˆStrutsPrepareAndExecuteFilterï¼‰å®ç°ï¼ŒSpringMVCï¼ˆDispatcherServletï¼‰åˆ™é‡‡ç”¨Servletå®ç°ã€‚Filteråœ¨å®¹å™¨å¯åŠ¨ä¹‹åå³åˆå§‹åŒ–ï¼›æœåŠ¡åœæ­¢ä»¥åå æ¯ï¼Œæ™šäºServletã€‚Servletåœ¨æ˜¯åœ¨è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œå…ˆäºFilterè°ƒç”¨ï¼ŒæœåŠ¡åœæ­¢åé”€æ¯ã€‚</p><ul><li>æ€§èƒ½æ–¹é¢</li></ul><p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å¯¹åº”å®ä¾‹ä¸€ä¸ªæ–°çš„Actionï¼Œéœ€è¦åŠ è½½æ‰€æœ‰çš„å±æ€§å€¼æ³¨å…¥ï¼ŒSpringMVCå®ç°äº†é›¶é…ç½®ï¼Œç”±äºSpringMVCåŸºäºæ–¹æ³•çš„æ‹¦æˆªï¼Œæœ‰åŠ è½½ä¸€æ¬¡å•ä¾‹æ¨¡å¼beanæ³¨å…¥ã€‚æ‰€ä»¥ï¼ŒSpringMVCå¼€å‘æ•ˆç‡å’Œæ€§èƒ½é«˜äºStruts2ã€‚</p><ul><li>é…ç½®æ–¹é¢</li></ul><p>spring MVCå’ŒSpringæ˜¯æ— ç¼çš„ã€‚ä»è¿™ä¸ªé¡¹ç›®çš„ç®¡ç†å’Œå®‰å…¨ä¸Šä¹Ÿæ¯”Struts2é«˜ã€‚</p><p>71ã€å¦‚ä½•é¿å…sqlæ³¨å…¥ï¼Ÿ</p><ol><li>PrepareStatement</li><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ä¼ å…¥çš„å‚æ•°</li><li>å­—ç¬¦ä¸²è¿‡æ»¤</li><li>JSPä¸­è°ƒç”¨è¯¥å‡½æ•°æ£€æŸ¥æ˜¯å¦åŒ…å«éæ³•å­—ç¬¦</li><li>JSPé¡µé¢åˆ¤æ–­ä»£ç </li></ol><p>72ã€ä»€ä¹ˆæ˜¯XSS</p><p>XSSæ”»å‡»åˆç§°CSS,å…¨ç§°Cross Site Script  ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ï¼Œå…¶åŸç†æ˜¯æ”»å‡»è€…å‘æœ‰XSSæ¼æ´çš„ç½‘ç«™ä¸­è¾“å…¥æ¶æ„çš„ HTML ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥ç½‘ç«™æ—¶ï¼Œè¿™æ®µ HTML ä»£ç ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚XSS æ”»å‡»ç±»ä¼¼äº SQL æ³¨å…¥æ”»å‡»ï¼ŒSQLæ³¨å…¥æ”»å‡»ä¸­ä»¥SQLè¯­å¥ä½œä¸ºç”¨æˆ·è¾“å…¥ï¼Œä»è€Œè¾¾åˆ°æŸ¥è¯¢/ä¿®æ”¹/åˆ é™¤æ•°æ®çš„ç›®çš„ï¼Œè€Œåœ¨xssæ”»å‡»ä¸­ï¼Œé€šè¿‡æ’å…¥æ¶æ„è„šæœ¬ï¼Œå®ç°å¯¹ç”¨æˆ·æ¸¸è§ˆå™¨çš„æ§åˆ¶ï¼Œè·å–ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ã€‚ XSSæ˜¯ Web ç¨‹åºä¸­å¸¸è§çš„æ¼æ´ï¼ŒXSS å±äºè¢«åŠ¨å¼ä¸”ç”¨äºå®¢æˆ·ç«¯çš„æ”»å‡»æ–¹å¼ã€‚</p><p>XSSé˜²èŒƒçš„æ€»ä½“æ€è·¯æ˜¯ï¼šå¯¹è¾“å…¥(å’ŒURLå‚æ•°)è¿›è¡Œè¿‡æ»¤ï¼Œå¯¹è¾“å‡ºè¿›è¡Œç¼–ç ã€‚</p><p>73ã€ä»€ä¹ˆæ˜¯CSRFæ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ</p><p>CSRFï¼ˆCross-site request forgeryï¼‰ä¹Ÿè¢«ç§°ä¸º one-click attackæˆ–è€… session ridingï¼Œä¸­æ–‡å…¨ç§°æ˜¯å«<strong>è·¨ç«™è¯·æ±‚ä¼ªé€ </strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ”»å‡»è€…é€šè¿‡ä¼ªé€ ç”¨æˆ·çš„æµè§ˆå™¨çš„è¯·æ±‚ï¼Œå‘è®¿é—®ä¸€ä¸ªç”¨æˆ·è‡ªå·±æ›¾ç»è®¤è¯è®¿é—®è¿‡çš„ç½‘ç«™å‘é€å‡ºå»ï¼Œä½¿ç›®æ ‡ç½‘ç«™æ¥æ”¶å¹¶è¯¯ä»¥ä¸ºæ˜¯ç”¨æˆ·çš„çœŸå®æ“ä½œè€Œå»æ‰§è¡Œå‘½ä»¤ã€‚å¸¸ç”¨äºç›—å–è´¦å·ã€è½¬è´¦ã€å‘é€è™šå‡æ¶ˆæ¯ç­‰ã€‚æ”»å‡»è€…åˆ©ç”¨ç½‘ç«™å¯¹è¯·æ±‚çš„éªŒè¯æ¼æ´è€Œå®ç°è¿™æ ·çš„æ”»å‡»è¡Œä¸ºï¼Œç½‘ç«™èƒ½å¤Ÿç¡®è®¤è¯·æ±‚æ¥æºäºç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½éªŒè¯è¯·æ±‚æ˜¯å¦æºäºç”¨æˆ·çš„çœŸå®æ„æ„¿ä¸‹çš„æ“ä½œè¡Œä¸ºã€‚</p><h2 id="å¦‚ä½•é¿å…ï¼š"><a href="#å¦‚ä½•é¿å…ï¼š" class="headerlink" title="å¦‚ä½•é¿å…ï¼š"></a>å¦‚ä½•é¿å…ï¼š</h2><h3 id="1-éªŒè¯-HTTP-Referer-å­—æ®µ"><a href="#1-éªŒè¯-HTTP-Referer-å­—æ®µ" class="headerlink" title="1. éªŒè¯ HTTP Referer å­—æ®µ"></a>1. éªŒè¯ HTTP Referer å­—æ®µ</h3><blockquote><p>HTTPå¤´ä¸­çš„Refererå­—æ®µè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™é¡µé¢çš„è¯·æ±‚æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ï¼Œè€Œå¦‚æœé»‘å®¢è¦å¯¹å…¶å®æ–½ CSRF<br>æ”»å‡»ï¼Œä»–ä¸€èˆ¬åªèƒ½åœ¨ä»–è‡ªå·±çš„ç½‘ç«™æ„é€ è¯·æ±‚ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡éªŒè¯Refererå€¼æ¥é˜²å¾¡CSRF æ”»å‡»ã€‚</p></blockquote><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="2-ä½¿ç”¨éªŒè¯ç "><a href="#2-ä½¿ç”¨éªŒè¯ç " class="headerlink" title="2. ä½¿ç”¨éªŒè¯ç "></a>2. ä½¿ç”¨éªŒè¯ç </h3><blockquote><p>å…³é”®æ“ä½œé¡µé¢åŠ ä¸ŠéªŒè¯ç ï¼Œåå°æ”¶åˆ°è¯·æ±‚åé€šè¿‡åˆ¤æ–­éªŒè¯ç å¯ä»¥é˜²å¾¡CSRFã€‚ä½†è¿™ç§æ–¹æ³•å¯¹ç”¨æˆ·ä¸å¤ªå‹å¥½ã€‚</p></blockquote><h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h3 id="3-åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯"><a href="#3-åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯" class="headerlink" title="3. åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯"></a>3. åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯</h3><blockquote><p>CSRF æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºé»‘å®¢å¯ä»¥å®Œå…¨ä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­æ‰€æœ‰çš„ç”¨æˆ·éªŒè¯ä¿¡æ¯éƒ½æ˜¯å­˜åœ¨äºcookieä¸­ï¼Œå› æ­¤é»‘å®¢å¯ä»¥åœ¨ä¸çŸ¥é“è¿™äº›éªŒè¯ä¿¡æ¯çš„æƒ…å†µä¸‹ç›´æ¥åˆ©ç”¨ç”¨æˆ·è‡ªå·±çš„cookie æ¥é€šè¿‡å®‰å…¨éªŒè¯ã€‚è¦æŠµå¾¡ CSRFï¼Œå…³é”®åœ¨äºåœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥ä¿¡æ¯ä¸å­˜åœ¨äº cookie ä¹‹ä¸­ã€‚å¯ä»¥åœ¨ HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„ tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ª tokenï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰tokenæˆ–è€… token å†…å®¹ä¸æ­£ç¡®ï¼Œåˆ™è®¤ä¸ºå¯èƒ½æ˜¯ CSRF æ”»å‡»è€Œæ‹’ç»è¯¥è¯·æ±‚ã€‚è¿™ç§æ–¹æ³•è¦æ¯”æ£€æŸ¥ Referer è¦å®‰å…¨ä¸€äº›ï¼Œtoken å¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åäº§ç”Ÿå¹¶æ”¾äºsessionä¹‹ä¸­ï¼Œç„¶ååœ¨æ¯æ¬¡è¯·æ±‚æ—¶æŠŠtoken ä» session ä¸­æ‹¿å‡ºï¼Œä¸è¯·æ±‚ä¸­çš„ token è¿›è¡Œæ¯”å¯¹ï¼Œä½†è¿™ç§æ–¹æ³•çš„éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠ token ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥è¯·æ±‚ã€‚<br>å¯¹äº GET è¯·æ±‚ï¼Œtoken å°†é™„åœ¨è¯·æ±‚åœ°å€ä¹‹åï¼Œè¿™æ · URL å°±å˜æˆ <a href="http://url/?csrftoken=tokenvalue%E3%80%82">http://url?csrftoken=tokenvalueã€‚</a><br>è€Œå¯¹äº POST è¯·æ±‚æ¥è¯´ï¼Œè¦åœ¨ form çš„æœ€ååŠ ä¸Š <input type="hidden" name="csrftoken" value="tokenvalue">ï¼Œè¿™æ ·å°±æŠŠtokenä»¥å‚æ•°çš„å½¢å¼åŠ å…¥è¯·æ±‚äº†ã€‚</p></blockquote><h3 id="-2"><a href="#-2" class="headerlink" title=""></a></h3><h3 id="4-åœ¨HTTP-å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯"><a href="#4-åœ¨HTTP-å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯" class="headerlink" title="4. åœ¨HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯"></a>4. åœ¨HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯</h3><blockquote><p>è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨ token å¹¶è¿›è¡ŒéªŒè¯ï¼Œå’Œä¸Šä¸€ç§æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯æŠŠ token ä»¥å‚æ•°çš„å½¢å¼ç½®äº HTTP è¯·æ±‚ä¹‹ä¸­ï¼Œè€Œæ˜¯æŠŠå®ƒæ”¾åˆ° HTTP å¤´ä¸­è‡ªå®šä¹‰çš„å±æ€§é‡Œã€‚é€šè¿‡ XMLHttpRequest è¿™ä¸ªç±»ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»™æ‰€æœ‰è¯¥ç±»è¯·æ±‚åŠ ä¸Š csrftoken è¿™ä¸ª HTTP å¤´å±æ€§ï¼Œå¹¶æŠŠ token å€¼æ”¾å…¥å…¶ä¸­ã€‚è¿™æ ·è§£å†³äº†ä¸Šç§æ–¹æ³•åœ¨è¯·æ±‚ä¸­åŠ å…¥ token çš„ä¸ä¾¿ï¼ŒåŒæ—¶ï¼Œé€šè¿‡ XMLHttpRequest è¯·æ±‚çš„åœ°å€ä¸ä¼šè¢«è®°å½•åˆ°æµè§ˆå™¨çš„åœ°å€æ ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ token ä¼šé€è¿‡ Referer æ³„éœ²åˆ°å…¶ä»–ç½‘ç«™ä¸­å»ã€‚</p></blockquote><h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p><strong>74ã€throwå’Œthrowsçš„åŒºåˆ«ï¼Ÿ</strong></p><p>throwsæ˜¯ç”¨æ¥å£°æ˜ä¸€ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ä¿¡æ¯ï¼Œthrowsæ˜¯å°†å¼‚å¸¸å£°æ˜ä½†æ˜¯ä¸å¤„ç†ï¼Œè€Œæ˜¯å°†å¼‚å¸¸å¾€ä¸Šä¼ ï¼Œè°è°ƒç”¨æˆ‘å°±äº¤ç»™è°å¤„ç†ã€‚è€Œthrowåˆ™æ˜¯æŒ‡æŠ›å‡ºçš„ä¸€ä¸ªå…·ä½“çš„å¼‚å¸¸ç±»å‹ã€‚</p><p><strong>75ã€finalã€finallyã€finalizeæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li><ol><li>finalä¿®é¥°ç±»ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿</li><li>finalä¿®é¥°æ–¹æ³•ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¸å¯è¢«é‡å†™</li><li>finalä¿®é¥°å˜é‡ï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯å¸¸é‡ï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li></ol></li><li>finallyç”¨äºtry-catchä»£ç å—ä¸­ï¼Œä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œfinallyä»£ç å—ä¸­çš„ä»£ç éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾å…³é—­èµ„æºçš„ä»£ç </li><li>finalizeæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå±äºObjectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè€ŒObjectç±»æ˜¯æ‰€æœ‰æ–¹æ³•çš„å¼—é›·ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”±åƒåœ¾å›æ”¶å™¨æ¥è°ƒç”¨ï¼Œå½“æˆ‘ä»¬è°ƒç”¨Systemçš„gc()æ–¹æ³•çš„æ—¶å€™ï¼Œç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨finalize(),å›æ”¶åƒåœ¾ã€‚ </li></ul><p>76ã€try-catch-finallyä¸­å“ªä¸ªéƒ¨åˆ†å¯ä»¥çœç•¥ï¼Ÿ</p><p>ç­”ï¼šcatchå¯ä»¥çœç•¥</p><p><strong>åŸå› ï¼š</strong></p><p>æ›´ä¸ºä¸¥æ ¼çš„è¯´æ³•å…¶å®æ˜¯ï¼štryåªé€‚åˆå¤„ç†è¿è¡Œæ—¶å¼‚å¸¸ï¼Œtry+catché€‚åˆå¤„ç†è¿è¡Œæ—¶å¼‚å¸¸+æ™®é€šå¼‚å¸¸ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åªç”¨tryå»å¤„ç†æ™®é€šå¼‚å¸¸å´ä¸åŠ ä»¥catchå¤„ç†ï¼Œç¼–è¯‘æ˜¯é€šä¸è¿‡çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ç¡¬æ€§è§„å®šï¼Œæ™®é€šå¼‚å¸¸å¦‚æœé€‰æ‹©æ•è·ï¼Œåˆ™å¿…é¡»ç”¨catchæ˜¾ç¤ºå£°æ˜ä»¥ä¾¿è¿›ä¸€æ­¥å¤„ç†ã€‚è€Œè¿è¡Œæ—¶å¼‚å¸¸åœ¨ç¼–è¯‘æ—¶æ²¡æœ‰å¦‚æ­¤è§„å®šï¼Œæ‰€ä»¥catchå¯ä»¥çœç•¥ï¼Œä½ åŠ ä¸Šcatchç¼–è¯‘å™¨ä¹Ÿè§‰å¾—æ— å¯åšéã€‚</p><p>ç†è®ºä¸Šï¼Œç¼–è¯‘å™¨çœ‹ä»»ä½•ä»£ç éƒ½ä¸é¡ºçœ¼ï¼Œéƒ½è§‰å¾—å¯èƒ½æœ‰æ½œåœ¨çš„é—®é¢˜ï¼Œæ‰€ä»¥ä½ å³ä½¿å¯¹æ‰€æœ‰ä»£ç åŠ ä¸Štryï¼Œä»£ç åœ¨è¿è¡ŒæœŸæ—¶ä¹Ÿåªä¸è¿‡æ˜¯åœ¨æ­£å¸¸è¿è¡Œçš„åŸºç¡€ä¸ŠåŠ ä¸€å±‚çš®ã€‚ä½†æ˜¯ä½ ä¸€æ—¦å¯¹ä¸€æ®µä»£ç åŠ ä¸Štryï¼Œå°±ç­‰äºæ˜¾ç¤ºåœ°æ‰¿è¯ºç¼–è¯‘å™¨ï¼Œå¯¹è¿™æ®µä»£ç å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæ•è·è€Œéå‘ä¸ŠæŠ›å‡ºå¤„ç†ã€‚å¦‚æœæ˜¯æ™®é€šå¼‚å¸¸ï¼Œç¼–è¯‘å™¨è¦æ±‚å¿…é¡»ç”¨catchæ•è·ä»¥ä¾¿è¿›ä¸€æ­¥å¤„ç†ï¼›å¦‚æœè¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ•è·ç„¶åä¸¢å¼ƒå¹¶ä¸”+finallyæ‰«å°¾å¤„ç†ï¼Œæˆ–è€…åŠ ä¸Šcatchæ•è·ä»¥ä¾¿è¿›ä¸€æ­¥å¤„ç†ã€‚</p><p>è‡³äºåŠ ä¸Šfinallyï¼Œåˆ™æ˜¯åœ¨ä¸ç®¡æœ‰æ²¡æ•è·å¼‚å¸¸ï¼Œéƒ½è¦è¿›è¡Œçš„â€œæ‰«å°¾â€å¤„ç†ã€‚</p><p>77ã€try-catch-finallyä¸­ï¼Œå¦‚æœcatchä¸­returnäº†ï¼Œfinallyè¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</p><p>ä¼šæ‰§è¡Œï¼Œfinalliyä¼šåœ¨returnå‰æ‰§è¡Œã€‚</p><p>78ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ</p><ul><li>NullPointerExceptionï¼šå½“åº”ç”¨ç¨‹åºè¯•å›¾è®¿é—®ç©ºå¯¹è±¡æ—¶ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>SQLExceptionï¼šæä¾›å…³äºæ•°æ®åº“è®¿é—®é”™è¯¯æˆ–å…¶ä»–é”™è¯¯ä¿¡æ¯çš„å¼‚å¸¸ã€‚</li><li>IndexOutOfBoundsExceptionï¼šæŒ‡ç¤ºæŸæ’åºç´¢å¼•ï¼ˆä¾‹å¦‚å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²æˆ–å‘é‡çš„æ’åºï¼‰è¶…å‡ºèŒƒå›´æ—¶æŠ›å‡ºã€‚ </li><li>NumberFormatExceptionï¼šå½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>FileNotFoundExceptionï¼šå½“è¯•å›¾æ‰“å¼€æŒ‡å®šè·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</li><li>IOExceptionï¼šå½“å‘ç”ŸæŸç§I/Oå¼‚å¸¸æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚æ­¤ç±»æ˜¯å¤±è´¥æˆ–ä¸­æ–­çš„I/Oæ“ä½œç”Ÿæˆçš„å¼‚å¸¸çš„é€šç”¨ç±»ã€‚</li><li>ClassCastExceptionï¼šå½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>ArrayStoreExceptionï¼šè¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li><li>IllegalArgumentExceptionï¼šæŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚</li><li>ArithmeticExceptionï¼šå½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°â€œé™¤ä»¥é›¶â€æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ </li><li>NegativeArraySizeExceptionï¼šå¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾åˆ›å»ºå¤§å°ä¸ºè´Ÿçš„æ•°ç»„ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>NoSuchMethodExceptionï¼šæ— æ³•æ‰¾åˆ°æŸä¸€ç‰¹å®šæ–¹æ³•æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>SecurityExceptionï¼šç”±å®‰å…¨ç®¡ç†å™¨æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒæŒ‡ç¤ºå­˜åœ¨å®‰å…¨ä¾µçŠ¯ã€‚</li><li>UnsupportedOperationExceptionï¼šå½“ä¸æ”¯æŒè¯·æ±‚çš„æ“ä½œæ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</li><li>RuntimeExceptionRuntimeExceptionï¼šæ˜¯é‚£äº›å¯èƒ½åœ¨Javaè™šæ‹Ÿæœºæ­£å¸¸è¿è¡ŒæœŸé—´æŠ›å‡ºçš„å¼‚å¸¸çš„è¶…ç±»ã€‚</li></ul><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><p>79ã€httpå“åº”å—301å’Œ302ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>ç­”ï¼š301ï¼Œ302éƒ½æ˜¯TTTPçŠ¶æ€çš„ç¼–ç ï¼Œéƒ½ä»£è¡¨æŸä¸ªURLå‘ç”Ÿäº†è½¬ç§»ã€‚</p><p>åŒºåˆ«ï¼š</p><ul><li>301 redirect: 301 ä»£è¡¨æ°¸ä¹…æ€§è½¬ç§»(Permanently Moved)ã€‚</li><li>302 redirect: 302 ä»£è¡¨æš‚æ—¶æ€§è½¬ç§»(Temporarily Moved )ã€‚</li></ul><p>80ã€forwardå’Œredirectçš„åŒºåˆ«ï¼Ÿ</p><p>Forwardå’ŒRedirectä»£è¡¨äº†ä¸¤ç§è¯·æ±‚è½¬å‘æ–¹å¼ï¼šç›´æ¥è½¬å‘å’Œé—´æ¥è½¬å‘ã€‚</p><ul><li><p><strong>ç›´æ¥è½¬å‘æ–¹å¼ï¼ˆForwardï¼‰</strong>ï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨åªå‘å‡ºä¸€æ¬¡è¯·æ±‚ï¼ŒServletã€HTMLã€JSPæˆ–å…¶å®ƒä¿¡æ¯èµ„æºï¼Œç”±ç¬¬äºŒä¸ªä¿¡æ¯èµ„æºå“åº”è¯¥è¯·æ±‚ï¼Œåœ¨è¯·æ±‚å¯¹è±¡requestä¸­ï¼Œä¿å­˜çš„å¯¹è±¡å¯¹äºæ¯ä¸ªä¿¡æ¯èµ„æºæ˜¯å…±äº«çš„ã€‚</p></li><li><p><strong>é—´æ¥è½¬å‘æ–¹å¼ï¼ˆRedirectï¼‰</strong>å®é™…æ˜¯ä¸¤æ¬¡HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯åœ¨å“åº”ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œè®©æµè§ˆå™¨å†å‘å¦å¤–ä¸€ä¸ªURLå‘å‡ºè¯·æ±‚ï¼Œä»è€Œè¾¾åˆ°è½¬å‘çš„ç›®çš„ã€‚</p></li></ul><p>81ã€ç®€è¿°TCPå’ŒUDPçš„åŒºåˆ«ï¼Ÿ</p><ul><li>TCPé¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰ï¼›UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ã€‚</li><li>TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚</li><li>Tcpé€šè¿‡æ ¡éªŒå’Œï¼Œé‡ä¼ æ§åˆ¶ï¼Œåºå·æ ‡è¯†ï¼Œæ»‘åŠ¨çª—å£ã€ç¡®è®¤åº”ç­”å®ç°å¯é ä¼ è¾“ã€‚å¦‚ä¸¢åŒ…æ—¶çš„é‡å‘æ§åˆ¶ï¼Œè¿˜å¯ä»¥å¯¹æ¬¡åºä¹±æ‰çš„åˆ†åŒ…è¿›è¡Œé¡ºåºæ§åˆ¶ã€‚</li><li>UDPå…·æœ‰è¾ƒå¥½çš„å®æ—¶æ€§ï¼Œå·¥ä½œæ•ˆç‡æ¯”TCPé«˜ï¼Œé€‚ç”¨äºå¯¹é«˜é€Ÿä¼ è¾“å’Œå®æ—¶æ€§æœ‰è¾ƒé«˜çš„é€šä¿¡æˆ–å¹¿æ’­é€šä¿¡ã€‚</li><li>æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„;UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚</li><li>TCPå¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒå¤šï¼ŒUDPå¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒå°‘ã€‚</li></ul><p>82ã€TCPä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><p>TCPéœ€è¦ä¸‰æ¬¡æ¡æ‰‹æ‰å¯ä»¥ç¡®å®šé€šä¿¡åŒæ–¹éƒ½å¯æ¥æ”¶åˆ°ä¿¡æ¯ã€‚</p><p>ä¸ºäº†å®ç°å¯é æ•°æ®ä¼ è¾“ï¼Œ TCP åè®®çš„é€šä¿¡åŒæ–¹ï¼Œ éƒ½å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåºåˆ—å·ï¼Œ ä»¥æ ‡è¯†å‘é€å‡ºå»çš„æ•°æ®åŒ…ä¸­ï¼Œ å“ªäº›æ˜¯å·²ç»è¢«å¯¹æ–¹æ”¶åˆ°çš„ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å³æ˜¯é€šä¿¡åŒæ–¹ç›¸äº’å‘ŠçŸ¥åºåˆ—å·èµ·å§‹å€¼ï¼Œ å¹¶ç¡®è®¤å¯¹æ–¹å·²ç»æ”¶åˆ°äº†åºåˆ—å·èµ·å§‹å€¼çš„å¿…ç»æ­¥éª¤ã€‚</p><p>å¦‚æœåªæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œ è‡³å¤šåªæœ‰è¿æ¥å‘èµ·æ–¹çš„èµ·å§‹åºåˆ—å·èƒ½è¢«ç¡®è®¤ï¼Œ å¦ä¸€æ–¹é€‰æ‹©çš„åºåˆ—å·åˆ™å¾—ä¸åˆ°ç¡®è®¤ã€‚</p><p>83ã€è¯´ä¸€ä¸‹TCPç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ</p><p>84ã€OSIçš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ</p><ol><li>åº”ç”¨å±‚ï¼šç½‘ç»œæœåŠ¡ä¸æœ€ç»ˆç”¨æˆ·çš„ä¸€ä¸ªæ¥å£</li><li>è¡¨ç¤ºå±‚ï¼šæ•°æ®çš„è¡¨ç¤ºã€å®‰å…¨ã€å‹ç¼©</li><li>ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç®¡ç†ã€ç»ˆæ­¢ä¼šè¯</li><li>ä¼ è¾“å±‚ï¼šå®šä¹‰ä¼ è¾“æ•°æ®çš„åè®®ç«¯å£å·ï¼Œä»¥åŠæµæ§å’Œå·®é”™æ ¡éªŒ</li><li>ç½‘ç»œå±‚ï¼šè¿›è¡Œé€»è¾‘åœ°å€å¯»å€ï¼Œå®ç°ä¸åŒç½‘ç»œä¹‹é—´çš„è·¯å¾„é€‰æ‹©</li><li>æ•°æ®é“¾è·¯å±‚ï¼šå»ºç«‹é€»è¾‘è¿æ¥ï¼Œè¿›è¡Œç¡¬ä»¶åœ°å€å¯»å€ã€å·®é”™æ ¡éªŒç­‰åŠŸèƒ½</li><li>ç‰©ç†å±‚ï¼šå»ºç«‹ã€ç»´æŠ¤ã€æ–­å¼€ç‰©ç†è¿æ¥</li></ol><p>85ã€getå’Œpostè¯·æ±‚æœ‰å“ªäº›åŒºåˆ«?</p><ul><li>GETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li><li>GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</li><li>GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li><li>GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li><li>GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li><li>GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTä¹ˆæœ‰ã€‚</li><li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚</li><li>GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li><li>GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚</li></ul><p><strong>86ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ</strong></p><p><strong>æ–¹å¼ä¸€ï¼šå›¾ç‰‡pingæˆ–scriptæ ‡ç­¾è·¨åŸŸ</strong></p><p><strong>æ–¹å¼äºŒï¼šJSONPè·¨åŸŸ</strong></p><p><strong>æ–¹å¼ä¸‰ï¼šCORS</strong></p><p><strong>æ–¹å¼å››ï¼šwindow.name+iframe</strong></p><p><strong>æ–¹å¼äº”ï¼šwindow.postMessage()</strong></p><p><strong>æ–¹å¼å…­ï¼šä¿®æ”¹document.domainè·¨å­åŸŸ</strong></p><p><strong>æ–¹å¼ä¸ƒï¼šWebSocket</strong></p><p><strong>æ–¹å¼å…«ï¼šä»£ç†</strong></p><p>87ã€è¯´ä¸€ä¸‹JSONPå®ç°åŸç†ï¼Ÿ</p><p>jsonp å³ json+paddingï¼ŒåŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ï¼Œåˆ©ç”¨scriptæ ‡ç­¾çš„srcå±æ€§å¯ä»¥è·å–ä»»ä½•åŸŸä¸‹çš„jsè„šæœ¬ï¼Œé€šè¿‡è¿™ä¸ªç‰¹æ€§(ä¹Ÿå¯ä»¥è¯´æ¼æ´)ï¼ŒæœåŠ¡å™¨ç«¯ä¸åœ¨è¿”è´§jsonæ ¼å¼ï¼Œè€Œæ˜¯è¿”å›ä¸€æ®µè°ƒç”¨æŸä¸ªå‡½æ•°çš„jsä»£ç ï¼Œåœ¨srcä¸­è¿›è¡Œäº†è°ƒç”¨ï¼Œè¿™æ ·å®ç°äº†è·¨åŸŸã€‚</p><h2 id="ä¹ã€è®¾è®¡æ¨¡å¼"><a href="#ä¹ã€è®¾è®¡æ¨¡å¼" class="headerlink" title="ä¹ã€è®¾è®¡æ¨¡å¼"></a>ä¹ã€è®¾è®¡æ¨¡å¼</h2><p>88ã€è¯´ä¸€ä¸‹ä½ ç†Ÿæ‚‰çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</p><p>å‚è€ƒï¼š<a href="http://mp.weixin.qq.com/s?__biz=MzIwMTY0NDU3Nw==&amp;mid=2651938221&amp;idx=1&amp;sn=9cb29d1eb0fdbdb5f976306b08d5bdcc&amp;chksm=8d0f32e3ba78bbf547c6039038682706a2eaf83002158c58060d5eb57bdd83eb966a1e223ef6&amp;scene=21#wechat_redirect">å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æ±‡æ€»ï¼Œè¶…è¯¦ç»†ï¼</a></p><p>89ã€ç®€å•å·¥å‚å’ŒæŠ½è±¡å·¥å‚æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><h2 id="åã€Spirngã€Spring-MVC"><a href="#åã€Spirngã€Spring-MVC" class="headerlink" title="åã€Spirngã€Spring MVC"></a>åã€Spirngã€Spring MVC</h2><p>90ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨springï¼Ÿ</p><ol><li>ç®€ä»‹ï¼š<ul><li>ç›®çš„ï¼šè§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§</li><li>åŠŸèƒ½ï¼šä½¿ç”¨åŸºæœ¬çš„JavaBeanä»£æ›¿EJBï¼Œå¹¶æä¾›æ›´å¤šçš„ä¼ä¸šåº”ç”¨åŠŸèƒ½</li><li>èŒƒå›´ï¼šä»»ä½•Javaåº”ç”¨</li></ul></li></ol><p>ç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ï¼ˆAOPï¼‰çš„å®¹å™¨æ¡†æ¶ã€‚</p><ol start="2"><li>è½»é‡ï¼š</li></ol><p>ä»å¤§å°ä¸å¼€é”€ä¸¤æ–¹é¢è€Œè¨€Springéƒ½æ˜¯è½»é‡çš„ã€‚å®Œæ•´çš„Springæ¡†æ¶å¯ä»¥åœ¨ä¸€ä¸ªå¤§å°åªæœ‰1MBå¤šçš„JARæ–‡ä»¶é‡Œå‘å¸ƒã€‚å¹¶ä¸”Springæ‰€éœ€çš„å¤„ç†å¼€é”€ä¹Ÿæ˜¯å¾®ä¸è¶³é“çš„ã€‚æ­¤å¤–ï¼ŒSpringæ˜¯éä¾µå…¥å¼çš„ï¼šå…¸å‹åœ°ï¼ŒSpringåº”ç”¨ä¸­çš„å¯¹è±¡ä¸ä¾èµ–äºSpringçš„ç‰¹å®šç±»ã€‚</p><ol start="3"><li>æ§åˆ¶åè½¬</li></ol><p>Springé€šè¿‡ä¸€ç§ç§°ä½œæ§åˆ¶åè½¬ï¼ˆIoCï¼‰çš„æŠ€æœ¯ä¿ƒè¿›äº†æ¾è€¦åˆã€‚å½“åº”ç”¨äº†IoCï¼Œä¸€ä¸ªå¯¹è±¡ä¾èµ–çš„å…¶å®ƒå¯¹è±¡ä¼šé€šè¿‡è¢«åŠ¨çš„æ–¹å¼ä¼ é€’è¿›æ¥ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå¯¹è±¡è‡ªå·±åˆ›å»ºæˆ–è€…æŸ¥æ‰¾ä¾èµ–å¯¹è±¡ã€‚ä½ å¯ä»¥è®¤ä¸ºIoCä¸JNDIç›¸åâ€”â€”ä¸æ˜¯å¯¹è±¡ä»å®¹å™¨ä¸­æŸ¥æ‰¾ä¾èµ–ï¼Œè€Œæ˜¯å®¹å™¨åœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶ä¸ç­‰å¯¹è±¡è¯·æ±‚å°±ä¸»åŠ¨å°†ä¾èµ–ä¼ é€’ç»™å®ƒã€‚</p><p>4ã€é¢å‘åˆ‡é¢</p><p>Springæä¾›äº†é¢å‘åˆ‡é¢ç¼–ç¨‹çš„ä¸°å¯Œæ”¯æŒï¼Œå…è®¸é€šè¿‡åˆ†ç¦»åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»Ÿçº§æœåŠ¡ï¼ˆä¾‹å¦‚å®¡è®¡ï¼ˆauditingï¼‰å’Œäº‹åŠ¡ï¼ˆtransactionï¼‰ç®¡ç†ï¼‰è¿›è¡Œå†…èšæ€§çš„å¼€å‘ã€‚åº”ç”¨å¯¹è±¡åªå®ç°å®ƒä»¬åº”è¯¥åšçš„â€”â€”å®Œæˆä¸šåŠ¡é€»è¾‘â€”â€”ä»…æ­¤è€Œå·²ã€‚å®ƒä»¬å¹¶ä¸è´Ÿè´£ï¼ˆç”šè‡³æ˜¯æ„è¯†ï¼‰å…¶å®ƒçš„ç³»ç»Ÿçº§å…³æ³¨ç‚¹ï¼Œä¾‹å¦‚æ—¥å¿—æˆ–äº‹åŠ¡æ”¯æŒã€‚</p><p>5ã€å®¹å™¨</p><p>SpringåŒ…å«å¹¶ç®¡ç†åº”ç”¨å¯¹è±¡çš„é…ç½®å’Œç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šå®ƒæ˜¯ä¸€ç§å®¹å™¨ï¼Œä½ å¯ä»¥é…ç½®ä½ çš„æ¯ä¸ªbeanå¦‚ä½•è¢«åˆ›å»ºâ€”â€”åŸºäºä¸€ä¸ªå¯é…ç½®åŸå‹ï¼ˆprototypeï¼‰ï¼Œä½ çš„beanå¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å®ä¾‹æˆ–è€…æ¯æ¬¡éœ€è¦æ—¶éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹â€”â€”ä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•ç›¸äº’å…³è”çš„ã€‚ç„¶è€Œï¼ŒSpringä¸åº”è¯¥è¢«æ··åŒäºä¼ ç»Ÿçš„é‡é‡çº§çš„EJBå®¹å™¨ï¼Œå®ƒä»¬ç»å¸¸æ˜¯åºå¤§ä¸ç¬¨é‡çš„ï¼Œéš¾ä»¥ä½¿ç”¨ã€‚</p><p>6ã€æ¡†æ¶</p><p>Springå¯ä»¥å°†ç®€å•çš„ç»„ä»¶é…ç½®ã€ç»„åˆæˆä¸ºå¤æ‚çš„åº”ç”¨ã€‚åœ¨Springä¸­ï¼Œåº”ç”¨å¯¹è±¡è¢«å£°æ˜å¼åœ°ç»„åˆï¼Œå…¸å‹åœ°æ˜¯åœ¨ä¸€ä¸ªXMLæ–‡ä»¶é‡Œã€‚Springä¹Ÿæä¾›äº†å¾ˆå¤šåŸºç¡€åŠŸèƒ½ï¼ˆäº‹åŠ¡ç®¡ç†ã€æŒä¹…åŒ–æ¡†æ¶é›†æˆç­‰ç­‰ï¼‰ï¼Œå°†åº”ç”¨é€»è¾‘çš„å¼€å‘ç•™ç»™äº†ä½ ã€‚</p><p>æ‰€æœ‰Springçš„è¿™äº›ç‰¹å¾ä½¿ä½ èƒ½å¤Ÿç¼–å†™æ›´å¹²å‡€ã€æ›´å¯ç®¡ç†ã€å¹¶ä¸”æ›´æ˜“äºæµ‹è¯•çš„ä»£ç ã€‚å®ƒä»¬ä¹Ÿä¸ºSpringä¸­çš„å„ç§æ¨¡å—æä¾›äº†åŸºç¡€æ”¯æŒã€‚</p><p>91ã€è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯AOPï¼Ÿ</p><p>AOPï¼ˆAspect-Oriented Programmingï¼Œé¢å‘æ–¹é¢ç¼–ç¨‹ï¼‰ï¼Œå¯ä»¥è¯´æ˜¯OOPï¼ˆObject-Oriented Programingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ€§ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨ä»¥æ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚å½“æˆ‘ä»¬éœ€è¦ä¸ºåˆ†æ•£çš„å¯¹è±¡å¼•å…¥å…¬å…±è¡Œä¸ºçš„æ—¶å€™ï¼ŒOOPåˆ™æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒOOPå…è®¸ä½ å®šä¹‰ä»ä¸Šåˆ°ä¸‹çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰ä»å·¦åˆ°å³çš„å…³ç³»ã€‚ä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ°´å¹³åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒæ‰€æ•£å¸ƒåˆ°çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰ä»£ç ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p><p>è€ŒAOPæŠ€æœ¯åˆ™æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶åä¸ºâ€œAspectâ€ï¼Œå³æ–¹é¢ã€‚æ‰€è°“â€œæ–¹é¢â€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚AOPä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ¨ªå‘çš„å…³ç³»ï¼Œå¦‚æœè¯´â€œå¯¹è±¡â€æ˜¯ä¸€ä¸ªç©ºå¿ƒçš„åœ†æŸ±ä½“ï¼Œå…¶ä¸­å°è£…çš„æ˜¯å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼›é‚£ä¹ˆé¢å‘æ–¹é¢ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå°±ä»¿ä½›ä¸€æŠŠåˆ©åˆƒï¼Œå°†è¿™äº›ç©ºå¿ƒåœ†æŸ±ä½“å‰–å¼€ï¼Œä»¥è·å¾—å…¶å†…éƒ¨çš„æ¶ˆæ¯ã€‚è€Œå‰–å¼€çš„åˆ‡é¢ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ–¹é¢â€äº†ã€‚ç„¶åå®ƒåˆä»¥å·§å¤ºå¤©åŠŸçš„å¦™æ‰‹å°†è¿™äº›å‰–å¼€çš„åˆ‡é¢å¤åŸï¼Œä¸ç•™ç—•è¿¹ã€‚</p><p>ä½¿ç”¨â€œæ¨ªåˆ‡â€æŠ€æœ¯ï¼ŒAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸ä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„éƒ½åŸºæœ¬ç›¸ä¼¼ã€‚æ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ã€‚Aop çš„ä½œç”¨åœ¨äºåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚æ­£å¦‚Avanadeå…¬å¸çš„é«˜çº§æ–¹æ¡ˆæ„æ¶å¸ˆAdam Mageeæ‰€è¯´ï¼ŒAOPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯â€œå°†åº”ç”¨ç¨‹åºä¸­çš„å•†ä¸šé€»è¾‘åŒå¯¹å…¶æä¾›æ”¯æŒçš„é€šç”¨æœåŠ¡è¿›è¡Œåˆ†ç¦»ã€‚â€</p><p>92ã€è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯IOCï¼Ÿ</p><p>IOCæ˜¯Inversion of Controlçš„ç¼©å†™ï¼Œå¤šæ•°ä¹¦ç±ç¿»è¯‘æˆâ€œæ§åˆ¶åè½¬â€ã€‚</p><p>ã€€ã€€</p><p>1996å¹´ï¼ŒMichael Mattsonåœ¨ä¸€ç¯‡æœ‰å…³æ¢è®¨é¢å‘å¯¹è±¡æ¡†æ¶çš„æ–‡ç« ä¸­ï¼Œé¦–å…ˆæå‡ºäº†IOC è¿™ä¸ªæ¦‚å¿µã€‚å¯¹äºé¢å‘å¯¹è±¡è®¾è®¡åŠç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²äº†å¾ˆå¤šäº†ï¼Œä¸å†èµ˜è¿°ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå¤æ‚ç³»ç»Ÿåˆ†è§£æˆç›¸äº’åˆä½œçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ç±»é€šè¿‡å°è£…ä»¥åï¼Œå†…éƒ¨å®ç°å¯¹å¤–éƒ¨æ˜¯é€æ˜çš„ï¼Œä»è€Œé™ä½äº†è§£å†³é—®é¢˜çš„å¤æ‚åº¦ï¼Œè€Œä¸”å¯ä»¥çµæ´»åœ°è¢«é‡ç”¨å’Œæ‰©å±•ã€‚</p><p>ã€€ã€€</p><p>IOCç†è®ºæå‡ºçš„è§‚ç‚¹å¤§ä½“æ˜¯è¿™æ ·çš„ï¼šå€ŸåŠ©äºâ€œç¬¬ä¸‰æ–¹â€å®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIO6jib8XP3r8h8sib080icibHvumUWHk7VVBq5O5WgWj1QFQBPWljlj5CibsUx6fp4b7LQhvNJmGN6v73A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p><p>å›¾ IOCè§£è€¦è¿‡ç¨‹</p><p>ã€€ã€€</p><p>å¤§å®¶çœ‹åˆ°äº†å§ï¼Œç”±äºå¼•è¿›äº†ä¸­é—´ä½ç½®çš„â€œç¬¬ä¸‰æ–¹â€ï¼Œä¹Ÿå°±æ˜¯IOCå®¹å™¨ï¼Œä½¿å¾—Aã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œé½¿è½®ä¹‹é—´çš„ä¼ åŠ¨å…¨éƒ¨ä¾é â€œç¬¬ä¸‰æ–¹â€äº†ï¼Œå…¨éƒ¨å¯¹è±¡çš„æ§åˆ¶æƒå…¨éƒ¨ä¸Šç¼´ç»™â€œç¬¬ä¸‰æ–¹â€IOCå®¹å™¨ï¼Œæ‰€ä»¥ï¼ŒIOCå®¹å™¨æˆäº†æ•´ä¸ªç³»ç»Ÿçš„å…³é”®æ ¸å¿ƒï¼Œå®ƒèµ·åˆ°äº†ä¸€ç§ç±»ä¼¼â€œç²˜åˆå‰‚â€çš„ä½œç”¨ï¼ŒæŠŠç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡ç²˜åˆåœ¨ä¸€èµ·å‘æŒ¥ä½œç”¨ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªâ€œç²˜åˆå‰‚â€ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ä¼šå½¼æ­¤å¤±å»è”ç³»ï¼Œè¿™å°±æ˜¯æœ‰äººæŠŠIOCå®¹å™¨æ¯”å–»æˆâ€œç²˜åˆå‰‚â€çš„ç”±æ¥ã€‚</p><p>ã€€ã€€</p><p>æˆ‘ä»¬å†æ¥åšä¸ªè¯•éªŒï¼šæŠŠä¸Šå›¾ä¸­é—´çš„IOCå®¹å™¨æ‹¿æ‰ï¼Œç„¶åå†æ¥çœ‹çœ‹è¿™å¥—ç³»ç»Ÿï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIO6jib8XP3r8h8sib080icibHvuPjyIicvo5d6nIschjEmic6hyRyr2I9IcvMGR01uP8DBBhE4zVZU4frMQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p><p>å›¾ æ‹¿æ‰IOCå®¹å™¨åçš„ç³»ç»Ÿ</p><p>ã€€ã€€</p><p>æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„ç”»é¢ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å®ç°æ•´ä¸ªç³»ç»Ÿæ‰€éœ€è¦å®Œæˆçš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ—¶å€™ï¼ŒAã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡ä¹‹é—´å·²ç»æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œå½¼æ­¤æ¯«æ— è”ç³»ï¼Œè¿™æ ·çš„è¯ï¼Œå½“ä½ åœ¨å®ç°Açš„æ—¶å€™ï¼Œæ ¹æœ¬æ— é¡»å†å»è€ƒè™‘Bã€Cå’ŒDäº†ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å·²ç»é™ä½åˆ°äº†æœ€ä½ç¨‹åº¦ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœŸèƒ½å®ç°IOCå®¹å™¨ï¼Œå¯¹äºç³»ç»Ÿå¼€å‘è€Œè¨€ï¼Œè¿™å°†æ˜¯ä¸€ä»¶å¤šä¹ˆç¾å¥½çš„äº‹æƒ…ï¼Œå‚ä¸å¼€å‘çš„æ¯ä¸€æˆå‘˜åªè¦å®ç°è‡ªå·±çš„ç±»å°±å¯ä»¥äº†ï¼Œè·Ÿåˆ«äººæ²¡æœ‰ä»»ä½•å…³ç³»ï¼</p><p>â€‹    </p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œæ§åˆ¶åè½¬(IOC)åˆ°åº•ä¸ºä»€ä¹ˆè¦èµ·è¿™ä¹ˆä¸ªåå­—ï¼Ÿæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼š</p><p>â€‹    </p><p>è½¯ä»¶ç³»ç»Ÿåœ¨æ²¡æœ‰å¼•å…¥IOCå®¹å™¨ä¹‹å‰ï¼Œå¦‚å›¾1æ‰€ç¤ºï¼Œå¯¹è±¡Aä¾èµ–äºå¯¹è±¡Bï¼Œé‚£ä¹ˆå¯¹è±¡Aåœ¨åˆå§‹åŒ–æˆ–è€…è¿è¡Œåˆ°æŸä¸€ç‚¹çš„æ—¶å€™ï¼Œè‡ªå·±å¿…é¡»ä¸»åŠ¨å»åˆ›å»ºå¯¹è±¡Bæˆ–è€…ä½¿ç”¨å·²ç»åˆ›å»ºçš„å¯¹è±¡Bã€‚æ— è®ºæ˜¯åˆ›å»ºè¿˜æ˜¯ä½¿ç”¨å¯¹è±¡Bï¼Œæ§åˆ¶æƒéƒ½åœ¨è‡ªå·±æ‰‹ä¸Šã€‚</p><p>â€‹    </p><p>è½¯ä»¶ç³»ç»Ÿåœ¨å¼•å…¥IOCå®¹å™¨ä¹‹åï¼Œè¿™ç§æƒ…å½¢å°±å®Œå…¨æ”¹å˜äº†ï¼Œå¦‚å›¾3æ‰€ç¤ºï¼Œç”±äºIOCå®¹å™¨çš„åŠ å…¥ï¼Œå¯¹è±¡Aä¸å¯¹è±¡Bä¹‹é—´å¤±å»äº†ç›´æ¥è”ç³»ï¼Œæ‰€ä»¥ï¼Œå½“å¯¹è±¡Aè¿è¡Œåˆ°éœ€è¦å¯¹è±¡Bçš„æ—¶å€™ï¼ŒIOCå®¹å™¨ä¼šä¸»åŠ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡Bæ³¨å…¥åˆ°å¯¹è±¡Aéœ€è¦çš„åœ°æ–¹ã€‚</p><p>â€‹    </p><p>é€šè¿‡å‰åçš„å¯¹æ¯”ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºæ¥ï¼šå¯¹è±¡Aè·å¾—ä¾èµ–å¯¹è±¡Bçš„è¿‡ç¨‹,ç”±ä¸»åŠ¨è¡Œä¸ºå˜ä¸ºäº†è¢«åŠ¨è¡Œä¸ºï¼Œæ§åˆ¶æƒé¢ å€’è¿‡æ¥äº†ï¼Œè¿™å°±æ˜¯â€œæ§åˆ¶åè½¬â€è¿™ä¸ªåç§°çš„ç”±æ¥ã€‚</p><p>93ã€Springæœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ</p><p>Springæ¡†æ¶è‡³ä»Šå·²é›†æˆäº†20å¤šä¸ªæ¨¡å—ã€‚è¿™äº›æ¨¡å—ä¸»è¦è¢«åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ ¸å¿ƒå®¹å™¨ã€æ•°æ®è®¿é—®/é›†æˆ,ã€Webã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€å·¥å…·ã€æ¶ˆæ¯å’Œæµ‹è¯•æ¨¡å—ã€‚</p><p>![image-20190822135310918](/Users/xiekc/Library/Application Support/typora-user-images/image-20190822135310918.png)</p><p>94ã€Springå¸¸ç”¨çš„æ³¨å…¥æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</p><p>Springé€šè¿‡DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰å®ç°IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼Œå¸¸ç”¨çš„æ³¨å…¥æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ol><li>æ„é€ æ–¹æ³•æ³¨å…¥</li><li>setteræ³¨å…¥</li><li>åŸºäºæ³¨è§£çš„æ³¨å…¥</li></ol><p>95ã€Springçš„beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</p><p>Springå®¹å™¨ä¸­çš„Beanæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Œå®¹å™¨æœ¬èº«å¹¶æ²¡æœ‰æä¾›Beançš„çº¿ç¨‹å®‰å…¨ç­–ç•¥ï¼Œå› æ­¤å¯ä»¥è¯´Springå®¹å™¨çš„Beanæœ¬æ¥ä¸å…·å¤‡çº¿ç¨‹å®‰å…¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯å…·ä½“è¦ç»“åˆå…·ä½“scopeçš„Beanå»ç ”ç©¶ã€‚</p><p>96ã€Springæ”¯æŒå‡ ç§beançš„ä½œç”¨åŸŸï¼Ÿ</p><p>å½“é€šè¿‡springå®¹å™¨åˆ›å»ºä¸€ä¸ªBeanå®ä¾‹æ—¶ï¼Œä¸ä»…å¯ä»¥å®ŒæˆBeanå®ä¾‹çš„å®ä¾‹åŒ–ï¼Œè¿˜å¯ä»¥ä¸ºBeanæŒ‡å®šç‰¹å®šçš„ä½œç”¨åŸŸã€‚Springæ”¯æŒå¦‚ä¸‹5ç§ä½œç”¨åŸŸï¼š</p><ul><li>singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œåœ¨æ•´ä¸ªSpring IoCå®¹å™¨ä¸­ï¼Œä½¿ç”¨singletonå®šä¹‰çš„Beanå°†åªæœ‰ä¸€ä¸ªå®ä¾‹</li><li>prototypeï¼šåŸå‹æ¨¡å¼ï¼Œæ¯æ¬¡é€šè¿‡å®¹å™¨çš„getBeanæ–¹æ³•è·å–prototypeå®šä¹‰çš„Beanæ—¶ï¼Œéƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°çš„Beanå®ä¾‹</li><li>requestï¼šå¯¹äºæ¯æ¬¡HTTPè¯·æ±‚ï¼Œä½¿ç”¨requestå®šä¹‰çš„Beanéƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ï¼Œå³æ¯æ¬¡HTTPè¯·æ±‚å°†ä¼šäº§ç”Ÿä¸åŒçš„Beanå®ä¾‹ã€‚åªæœ‰åœ¨Webåº”ç”¨ä¸­ä½¿ç”¨Springæ—¶ï¼Œè¯¥ä½œç”¨åŸŸæ‰æœ‰æ•ˆ</li><li>sessionï¼šå¯¹äºæ¯æ¬¡HTTP Sessionï¼Œä½¿ç”¨sessionå®šä¹‰çš„Beanè±†æµ†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ã€‚åŒæ ·åªæœ‰åœ¨Webåº”ç”¨ä¸­ä½¿ç”¨Springæ—¶ï¼Œè¯¥ä½œç”¨åŸŸæ‰æœ‰æ•ˆ</li><li>globalsessionï¼šæ¯ä¸ªå…¨å±€çš„HTTP Sessionï¼Œä½¿ç”¨sessionå®šä¹‰çš„Beanéƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ã€‚å…¸å‹æƒ…å†µä¸‹ï¼Œä»…åœ¨ä½¿ç”¨portlet contextçš„æ—¶å€™æœ‰æ•ˆã€‚åŒæ ·åªæœ‰åœ¨Webåº”ç”¨ä¸­ä½¿ç”¨Springæ—¶ï¼Œè¯¥ä½œç”¨åŸŸæ‰æœ‰æ•ˆ</li></ul><p>å…¶ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯singletonå’Œprototypeä¸¤ç§ä½œç”¨åŸŸã€‚å¯¹äºsingletonä½œç”¨åŸŸçš„Beanï¼Œæ¯æ¬¡è¯·æ±‚è¯¥Beanéƒ½å°†è·å¾—ç›¸åŒçš„å®ä¾‹ã€‚å®¹å™¨è´Ÿè´£è·Ÿè¸ªBeanå®ä¾‹çš„çŠ¶æ€ï¼Œè´Ÿè´£ç»´æŠ¤Beanå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸè¡Œä¸ºï¼›å¦‚æœä¸€ä¸ªBeanè¢«è®¾ç½®æˆprototypeä½œç”¨åŸŸï¼Œç¨‹åºæ¯æ¬¡è¯·æ±‚è¯¥idçš„Beanï¼ŒSpringéƒ½ä¼šæ–°å»ºä¸€ä¸ªBeanå®ä¾‹ï¼Œç„¶åè¿”å›ç»™ç¨‹åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒSpringå®¹å™¨ä»…ä»…ä½¿ç”¨new å…³é”®å­—åˆ›å»ºBeanå®ä¾‹ï¼Œä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå®¹å™¨ä¸åœ¨è·Ÿè¸ªå®ä¾‹ï¼Œä¹Ÿä¸ä¼šç»´æŠ¤Beanå®ä¾‹çš„çŠ¶æ€ã€‚</p><p>å¦‚æœä¸æŒ‡å®šBeançš„ä½œç”¨åŸŸï¼ŒSpringé»˜è®¤ä½¿ç”¨singletonä½œç”¨åŸŸã€‚Javaåœ¨åˆ›å»ºJavaå®ä¾‹æ—¶ï¼Œéœ€è¦è¿›è¡Œå†…å­˜ç”³è¯·ï¼›é”€æ¯å®ä¾‹æ—¶ï¼Œéœ€è¦å®Œæˆåƒåœ¾å›æ”¶ï¼Œè¿™äº›å·¥ä½œéƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå¼€é”€çš„å¢åŠ ã€‚å› æ­¤ï¼Œprototypeä½œç”¨åŸŸBeançš„åˆ›å»ºã€é”€æ¯ä»£ä»·æ¯”è¾ƒå¤§ã€‚è€Œsingletonä½œç”¨åŸŸçš„Beanå®ä¾‹ä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ã€‚å› æ­¤ï¼Œé™¤éå¿…è¦ï¼Œå¦åˆ™å°½é‡é¿å…å°†Beanè¢«è®¾ç½®æˆprototypeä½œç”¨åŸŸã€‚</p><p>97ã€</p><p>Springå®¹å™¨è´Ÿè´£åˆ›å»ºåº”ç”¨ç¨‹åºä¸­çš„beanåŒæ—¶é€šè¿‡IDæ¥åè°ƒè¿™äº›å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Springè¦åˆ›å»ºå“ªäº›beanå¹¶ä¸”å¦‚ä½•å°†å…¶è£…é…åˆ°ä¸€èµ·ã€‚</p><p>springä¸­beanè£…é…æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…</li><li>åœ¨javaä»£ç æˆ–è€…XMLä¸­è¿›è¡Œæ˜¾ç¤ºé…ç½®</li></ul><p>å½“ç„¶è¿™äº›æ–¹å¼ä¹Ÿå¯ä»¥é…åˆä½¿ç”¨ã€‚</p><p>98ã€Springäº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</p><ul><li><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å¯¹åŸºäº POJO çš„åº”ç”¨æ¥è¯´æ˜¯å”¯ä¸€é€‰æ‹©ã€‚æˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­è°ƒç”¨beginTransaction()ã€commit()ã€rollback()ç­‰äº‹åŠ¡ç®¡ç†ç›¸å…³çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ã€‚</p></li><li><p>åŸºäº TransactionProxyFactoryBean çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</p></li><li><p>åŸºäº @Transactional çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</p></li><li><p>åŸºäº Aspectj AOP é…ç½®äº‹åŠ¡</p></li></ul><p>99ã€è¯´ä¸€ä¸‹springçš„äº‹åŠ¡éš”ç¦»ï¼Ÿ</p><ul><li>è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ›´æ–°æ•°æ®ã€‚</li><li>å¹»è¯»ï¼šä¾‹å¦‚ç¬¬ä¸€ä¸ªäº‹åŠ¡å¯¹ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ¯”å¦‚è¿™ç§ä¿®æ”¹æ¶‰åŠåˆ°è¡¨ä¸­çš„â€œå…¨éƒ¨æ•°æ®è¡Œâ€ã€‚åŒæ—¶ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ç§ä¿®æ”¹æ˜¯å‘è¡¨ä¸­æ’å…¥â€œä¸€è¡Œæ–°æ•°æ®â€ã€‚é‚£ä¹ˆï¼Œä»¥åå°±ä¼šå‘ç”Ÿæ“ä½œç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç”¨æˆ·å‘ç°è¡¨ä¸­è¿˜å­˜åœ¨æ²¡æœ‰ä¿®æ”¹çš„æ•°æ®è¡Œï¼Œå°±å¥½è±¡å‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ã€‚</li><li>ä¸å¯é‡å¤è¯»ï¼šæ¯”æ–¹è¯´åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å…ˆåæ‰§è¡Œä¸¤æ¡ä¸€æ¨¡ä¸€æ ·çš„selectè¯­å¥ï¼ŒæœŸé—´åœ¨æ­¤æ¬¡äº‹åŠ¡ä¸­æ²¡æœ‰æ‰§è¡Œè¿‡ä»»ä½•DDLè¯­å¥ï¼Œä½†å…ˆåå¾—åˆ°çš„ç»“æœä¸ä¸€è‡´ï¼Œè¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚</li></ul><p>100ã€è¯´ä¸€ä¸‹spring mvcè¿è¡Œæµç¨‹ï¼Ÿ</p><p>Spring MVCè¿è¡Œæµç¨‹å›¾ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/006y8mN6gy1g68tueaesxj30oe0ekn5g.jpg" alt="image-20190822223136943"></p><ol><li><p>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢«Spring å‰ç«¯æ§åˆ¶Servelt DispatcherServletæ•è·ã€‚</p></li><li><p>DispatcherServletå¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ç„¶åæ ¹æ®è¯¥URIï¼Œè°ƒç”¨HandlerMappingè·å¾—è¯¥Handleré…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬Handlerå¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥HandlerExecutionChainå¯¹è±¡çš„å½¢å¼è¿”å›ï¼›</p></li><li><p>DispatcherServlet æ ¹æ®è·å¾—çš„Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapterï¼›ï¼ˆé™„æ³¨ï¼šå¦‚æœæˆåŠŸè·å¾—HandlerAdapteråï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„preHandler(â€¦)æ–¹æ³•ï¼‰</p></li><li><p>æå–Requestä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……Handlerå…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandlerï¼ˆController)ã€‚ åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p><ul><li>HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</li><li>æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰</li><li>æ•°æ®æ ¹å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</li><li>æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResultæˆ–Errorä¸­</li></ul></li><li><p>Handleræ‰§è¡Œå®Œæˆåï¼Œå‘DispatcherServlet è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ã€‚</p></li><li><p>æ ¹æ®è¿”å›çš„ModelAndViewï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ViewResolverï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ°Springå®¹å™¨ä¸­çš„ViewResolver)è¿”å›ç»™DispatcherServlet </p></li><li><p>ViewResolver ç»“åˆModelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾ï¼›</p></li><li><p>å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li></ol><p>101ã€Spring MVCæœ‰å“ªäº›ç»„ä»¶ï¼Ÿ</p><p>Spring MVCçš„æ ¸å¿ƒç»„ä»¶ï¼š</p><ol><li>DispatcherServletï¼šä¸­å¤®æ§åˆ¶å™¨ï¼ŒæŠŠè¯·æ±‚ç»™è½¬å‘åˆ°å…·ä½“çš„æ§åˆ¶ç±»</li><li>Controllerï¼šå…·ä½“å¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨</li><li>HandlerMappingï¼šæ˜ å°„å¤„ç†å™¨ï¼Œè´Ÿè´£æ˜ å°„ä¸­å¤®å¤„ç†å™¨è½¬å‘ç»™controlleræ—¶çš„æ˜ å°„ç­–ç•¥</li><li>ModelAndViewï¼šæœåŠ¡å±‚è¿”å›çš„æ•°æ®å’Œè§†å›¾å±‚çš„å°è£…ç±»</li><li>ViewResolverï¼šè§†å›¾è§£æå™¨ï¼Œè§£æå…·ä½“çš„è§†å›¾</li><li>Interceptors ï¼šæ‹¦æˆªå™¨ï¼Œè´Ÿè´£æ‹¦æˆªæˆ‘ä»¬å®šä¹‰çš„è¯·æ±‚ç„¶ååšå¤„ç†å·¥ä½œ</li></ol><p><strong>102ã€@RequestMappingçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p><h3 id="valueï¼Œ-methodï¼š"><a href="#valueï¼Œ-methodï¼š" class="headerlink" title="valueï¼Œ methodï¼š"></a><strong>valueï¼Œ methodï¼š</strong></h3><ul><li>valueï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰</li><li>methodï¼šæŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰</li></ul><h3 id="consumesï¼Œproduces"><a href="#consumesï¼Œproduces" class="headerlink" title="consumesï¼Œproduces"></a><strong>consumesï¼Œproduces</strong></h3><ul><li>consumesï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application/json, text/htmlï¼›</li><li>producesï¼šæŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›</li></ul><h3 id="paramsï¼Œheaders"><a href="#paramsï¼Œheaders" class="headerlink" title="paramsï¼Œheaders"></a><strong>paramsï¼Œheaders</strong></h3><ul><li>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚</li><li>headersï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</li></ul><p>103ã€Autowiredçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><h2 id="åä¸€ã€SpringBootã€SpringCloud"><a href="#åä¸€ã€SpringBootã€SpringCloud" class="headerlink" title="åä¸€ã€SpringBootã€SpringCloud"></a>åä¸€ã€SpringBootã€SpringCloud</h2><p><strong>104ã€ä»€ä¹ˆæ˜¯springbootï¼Ÿ</strong></p><p>åœ¨Springæ¡†æ¶è¿™ä¸ªå¤§å®¶æ—ä¸­ï¼Œäº§ç”Ÿäº†å¾ˆå¤šè¡ç”Ÿæ¡†æ¶ï¼Œæ¯”å¦‚ Springã€SpringMvcæ¡†æ¶ç­‰ï¼ŒSpringçš„æ ¸å¿ƒå†…å®¹åœ¨äºæ§åˆ¶åè½¬(IOC)å’Œä¾èµ–æ³¨å…¥(DI),æ‰€è°“æ§åˆ¶åè½¬å¹¶éæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§æ€æƒ³ï¼Œåœ¨æ“ä½œæ–¹é¢æ˜¯æŒ‡åœ¨springé…ç½®æ–‡ä»¶ä¸­åˆ›å»º<bean>ï¼Œä¾èµ–æ³¨å…¥å³ä¸ºç”±springå®¹å™¨ä¸ºåº”ç”¨ç¨‹åºçš„æŸä¸ªå¯¹è±¡æä¾›èµ„æºï¼Œæ¯”å¦‚ å¼•ç”¨å¯¹è±¡ã€å¸¸é‡æ•°æ®ç­‰ã€‚</bean></p><p>SpringBootæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¸€ç§å…¨æ–°çš„ç¼–ç¨‹è§„èŒƒï¼Œä»–çš„äº§ç”Ÿç®€åŒ–äº†æ¡†æ¶çš„ä½¿ç”¨ï¼Œæ‰€è°“ç®€åŒ–æ˜¯æŒ‡ç®€åŒ–äº†Springä¼—å¤šæ¡†æ¶ä¸­æ‰€éœ€çš„å¤§é‡ä¸”ç¹ççš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ SpringBootæ˜¯ä¸€ä¸ªæœåŠ¡äºæ¡†æ¶çš„æ¡†æ¶ï¼ŒæœåŠ¡èŒƒå›´æ˜¯ç®€åŒ–é…ç½®æ–‡ä»¶ã€‚</p><p><strong>105ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SpringBoot</strong></p><ul><li>Spring Bootä½¿ç¼–ç å˜ç®€å•</li><li>Spring Bootä½¿é…ç½®å˜ç®€å•</li><li>Spring Bootä½¿éƒ¨ç½²å˜ç®€å•</li><li>Spring Bootä½¿ç›‘æ§å˜ç®€å•</li><li>Springçš„ä¸è¶³</li></ul><p>106ã€springbootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>SpringBootæä¾›ä¸¤ç§å¸¸ç”¨çš„é…ç½®æ–‡ä»¶ï¼š</p><ul><li>propertiesæ–‡ä»¶</li><li>ymlæ–‡ä»¶</li></ul><p>107ã€springbooté…ç½®æ–‡ä»¶æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>SpringBootæä¾›äº†ä¸¤ç§å¸¸ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯propertiesæ–‡ä»¶å’Œymlæ–‡ä»¶ï¼Œç›¸å¯¹äºpropertiesæ–‡ä»¶è€Œè¨€ï¼Œymlæ–‡ä»¶æ›´å¹´è½»ï¼Œä¹Ÿæœ‰å¾ˆå¤šçš„å‘ï¼Œymlé€šè¿‡ç©ºæ ¼æ¥ç¡®å®šå±‚çº§å…³ç³»ï¼Œä½¿é…ç½®æ–‡ä»¶ç»“æ„å¾ˆæ¸…æ™°ã€‚</p><p>108ã€SpringBootæœ‰å“ªç§æ–¹å¼å¯ä»¥å®ç°çƒ­éƒ¨ç½²ï¼Ÿ</p><p>SpringBootçƒ­éƒ¨ç½²å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ol><li><p>ä½¿ç”¨spring loaded</p></li><li><p>ä½¿ç”¨spring-boot-devtools</p></li></ol><p>109ã€JPAå’ŒHibernateæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>JPA Java Persistence APIï¼Œæ˜¯Java EE 5çš„æ ‡å‡†ORMæ¥å£ï¼Œä¹Ÿæ˜¯ejb3è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚</li><li>Hibernateï¼Œå½“ä»Šå¾ˆæµè¡Œçš„ORMæ¡†æ¶ï¼Œæ˜¯JPAçš„ä¸€ä¸ªå®ç°ï¼Œä½†æ˜¯å…¶åŠŸèƒ½æ˜¯JPAçš„è¶…é›†ã€‚</li><li>JPAå’ŒHibernateä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºJPAæ˜¯æ ‡å‡†æ¥å£ï¼ŒHibernateæ˜¯å®ç°ã€‚é‚£ä¹ˆHibernateæ˜¯å¦‚ä½•å®ç°ä¸JPAçš„è¿™ç§å…³ç³»çš„å‘¢ã€‚Hibernateä¸»è¦æ˜¯é€šè¿‡ä¸‰ä¸ªç»„ä»¶æ¥å®ç°çš„ï¼ŒåŠhibernate-annotationã€hibernate-entitymanagerå’Œhibernate-coreã€‚</li><li>hibernate-annotationæ˜¯Hibernateæ”¯æŒannotationæ–¹å¼é…ç½®çš„åŸºç¡€ï¼Œå®ƒåŒ…æ‹¬äº†æ ‡å‡†çš„JPA annotationä»¥åŠHibernateè‡ªèº«ç‰¹æ®ŠåŠŸèƒ½çš„annotationã€‚</li><li>hibernate-coreæ˜¯Hibernateçš„æ ¸å¿ƒå®ç°ï¼Œæä¾›äº†Hibernateæ‰€æœ‰çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</li><li>hibernate-entitymanagerå®ç°äº†æ ‡å‡†çš„JPAï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆhibernate-coreå’ŒJPAä¹‹é—´çš„é€‚é…å™¨ï¼Œå®ƒå¹¶ä¸ç›´æ¥æä¾›ORMçš„åŠŸèƒ½ï¼Œè€Œæ˜¯å¯¹hibernate-coreè¿›è¡Œå°è£…ï¼Œä½¿å¾—Hibernateç¬¦åˆJPAçš„è§„èŒƒã€‚</li></ul><p>110ã€ä»€ä¹ˆæ˜¯spring cloudï¼Ÿ</p><p>ä»å­—é¢ç†è§£ï¼ŒSpring Cloudå°±æ˜¯è‡´åŠ›äºåˆ†å¸ƒå¼ç³»ç»Ÿã€äº‘æœåŠ¡å™¨çš„æ¡†æ¶ã€‚</p><p>Spring Cloud æ˜¯æ•´ä¸ªSpringå®¶æ—ä¸­æ–°çš„æˆå‘˜ï¼Œæ˜¯æœ€è¿‘äº‘æœåŠ¡ç«çˆ†çš„å¿…ç„¶äº§ç‰©ã€‚</p><p>Spring Cloud ä¸ºå¼€å‘äººå‘˜æä¾›åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§æ¨¡å¼çš„å·¥å…·ï¼š</p><ul><li>é…ç½®ç®¡ç†</li><li>æœåŠ¡æ³¨å†Œä¸å‘ç°</li><li>æ–­è·¯å™¨</li><li>æ™ºèƒ½è·¯ç”±</li><li>æœåŠ¡é—´è°ƒç”¨</li><li>è´Ÿè½½å‡è¡¡</li><li>å¾®ä»£ç†</li><li>æ§åˆ¶æ€»çº¿</li><li>ä¸€æ¬¡æ€§ä»¤ç‰Œ</li><li>å…¨å±€é”</li><li>é¢†å¯¼é€‰ä¸¾</li><li>åˆ†å¸ƒå¼ä¼šè¯</li><li>é›†ç¾¤çŠ¶æ€</li><li>åˆ†å¸ƒå¼æ¶ˆæ¯</li><li>â€¦â€¦</li></ul><p>111ã€Spring Cloudæ–­è·¯å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>åœ¨Spring Cloudä¸­ä½¿ç”¨äº†Hystrix æ¥å®ç°æ–­è·¯å™¨çš„åŠŸèƒ½ï¼Œæ–­è·¯å™¨å¯ä»¥é˜²æ­¢ä¸€ä¸ªåº”ç”¨ç¨‹åºå¤šæ¬¡è¯•å›¾æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œå³å¾ˆå¯èƒ½å¤±è´¥ï¼Œå…è®¸å®ƒç»§ç»­è€Œä¸ç­‰å¾…æ•…éšœæ¢å¤æˆ–è€…æµªè´¹ CPU å‘¨æœŸï¼Œè€Œå®ƒç¡®å®šè¯¥æ•…éšœæ˜¯æŒä¹…çš„ã€‚æ–­è·¯å™¨æ¨¡å¼ä¹Ÿä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ£€æµ‹æ•…éšœæ˜¯å¦å·²ç»è§£å†³ï¼Œå¦‚æœé—®é¢˜ä¼¼ä¹å·²ç»å¾—åˆ°çº æ­£ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å°è¯•è°ƒç”¨æ“ä½œã€‚</p><p>æ–­è·¯å™¨å¢åŠ äº†ç¨³å®šæ€§å’Œçµæ´»æ€§ï¼Œä»¥ä¸€ä¸ªç³»ç»Ÿï¼Œæä¾›ç¨³å®šæ€§ï¼Œè€Œç³»ç»Ÿä»æ•…éšœä¸­æ¢å¤ï¼Œå¹¶å°½é‡å‡å°‘æ­¤æ•…éšœçš„å¯¹æ€§èƒ½çš„å½±å“ã€‚å®ƒå¯ä»¥å¸®åŠ©å¿«é€Ÿåœ°æ‹’ç»å¯¹ä¸€ä¸ªæ“ä½œï¼Œå³å¾ˆå¯èƒ½å¤±è´¥ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ“ä½œè¶…æ—¶ï¼ˆæˆ–è€…ä¸è¿”å›ï¼‰çš„è¯·æ±‚ï¼Œä»¥ä¿æŒç³»ç»Ÿçš„å“åº”æ—¶é—´ã€‚å¦‚æœæ–­è·¯å™¨æé«˜æ¯æ¬¡æ”¹å˜çŠ¶æ€çš„æ—¶é—´çš„äº‹ä»¶ï¼Œè¯¥ä¿¡æ¯å¯ä»¥è¢«ç”¨æ¥ç›‘æµ‹ç”±æ–­è·¯å™¨ä¿æŠ¤ç³»ç»Ÿçš„éƒ¨ä»¶çš„å¥åº·çŠ¶å†µï¼Œæˆ–ä»¥æé†’ç®¡ç†å‘˜å½“æ–­è·¯å™¨è·³é—¸ï¼Œä»¥åœ¨æ‰“å¼€çŠ¶æ€ã€‚</p><p>112ã€Spring Cloud çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</p><ol><li><p>æœåŠ¡å™¨å‘ç°â€”Netflix Eureka</p></li><li><p>å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”Netflix Ribbon</p></li><li><p>æ–­è·¯å™¨ï¼šNetflix Hystrix</p></li><li><p>æœåŠ¡ç½‘å…³ï¼šNetflix Zuul</p></li><li><p>åˆ†å¸ƒå¼é…ç½®ï¼šSpring Cloud Config</p></li></ol><h2 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h2><p>125ã€mybatisä¸­#{} å’Œ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>#{}æ˜¯é¢„ç¼–è¯‘å¤„ç†ï¼Œ${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼›</li><li>Mybatisåœ¨å¤„ç†#{}æ—¶ï¼Œä¼šå°†sqlä¸­çš„#{}æ›¿æ¢ä¸º?å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ï¼›</li><li>Mybatisåœ¨å¤„ç†${}æ—¶ï¼Œå°±æ˜¯æŠŠ${}æ›¿æ¢æˆå˜é‡çš„å€¼ï¼›</li><li>ä½¿ç”¨#{}å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢SQLæ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</li></ul><p>126ã€mybtaisæœ‰å‡ ç§åˆ†é¡µæ–¹å¼ï¼Ÿ</p><ol><li>æ•°ç»„åˆ†é¡µ</li><li>sqlåˆ†é¡µ</li><li>æ‹¦æˆªå™¨åˆ†é¡µ</li><li>RowBoundsåˆ†é¡µ</li></ol><p>127ã€mybatisé€»è¾‘åˆ†é¡µå’Œç‰©ç†åˆ†é¡µçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç‰©ç†åˆ†é¡µé€Ÿåº¦ä¸Šå¹¶ä¸ä¸€å®šå¿«äºé€»è¾‘åˆ†é¡µï¼Œé€»è¾‘åˆ†é¡µé€Ÿåº¦ä¸Šä¹Ÿå¹¶ä¸ä¸€å®šå¿«äºç‰©ç†åˆ†é¡µã€‚</li><li>ç‰©ç†åˆ†é¡µæ€»æ˜¯ä¼˜äºé€»è¾‘åˆ†é¡µï¼šæ²¡æœ‰å¿…è¦å°†å±äºæ•°æ®åº“ç«¯çš„å‹åŠ›åŠ è¯¸åˆ°åº”ç”¨ç«¯æ¥ï¼Œå°±ç®—é€Ÿåº¦ä¸Šå­˜åœ¨ä¼˜åŠ¿,ç„¶è€Œå…¶å®ƒæ€§èƒ½ä¸Šçš„ä¼˜ç‚¹è¶³ä»¥å¼¥è¡¥è¿™ä¸ªç¼ºç‚¹ã€‚</li></ul><p>128ã€mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>Mybatisä»…æ”¯æŒassociationå…³è”å¯¹è±¡å’Œcollectionå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ï¼ŒassociationæŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼ŒcollectionæŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚åœ¨Mybatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled=true|falseã€‚</p><p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke()æ–¹æ³•å‘ç°a.getB()æ˜¯nullå€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„sqlï¼ŒæŠŠBæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨a.setB(b)ï¼Œäºæ˜¯açš„å¯¹è±¡bå±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆa.getB().getName()æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p><p>å½“ç„¶äº†ï¼Œä¸å…‰æ˜¯Mybatisï¼Œå‡ ä¹æ‰€æœ‰çš„åŒ…æ‹¬Hibernateï¼Œæ”¯æŒå»¶è¿ŸåŠ è½½çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>130ã€è¯´ä¸€ä¸‹mybatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ</p><p>ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ã€‚</p><p>äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç°Serializableåºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½®<cache> ï¼›</cache></p><p>å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session/äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†C/U/D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚</p><p>131ã€mybatiså’Œhibernateçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</p><p>ï¼ˆ1ï¼‰Mybatiså’Œhibernateä¸åŒï¼Œå®ƒä¸å®Œå…¨æ˜¯ä¸€ä¸ªORMæ¡†æ¶ï¼Œå› ä¸ºMyBatiséœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™Sqlè¯­å¥ã€‚</p><p>ï¼ˆ2ï¼‰Mybatisç›´æ¥ç¼–å†™åŸç”Ÿæ€sqlï¼Œå¯ä»¥ä¸¥æ ¼æ§åˆ¶sqlæ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ï¼Œéå¸¸é€‚åˆå¯¹å…³ç³»æ•°æ®æ¨¡å‹è¦æ±‚ä¸é«˜çš„è½¯ä»¶å¼€å‘ï¼Œå› ä¸ºè¿™ç±»è½¯ä»¶éœ€æ±‚å˜åŒ–é¢‘ç¹ï¼Œä¸€ä½†éœ€æ±‚å˜åŒ–è¦æ±‚è¿…é€Ÿè¾“å‡ºæˆæœã€‚ä½†æ˜¯çµæ´»çš„å‰ææ˜¯mybatisæ— æ³•åšåˆ°æ•°æ®åº“æ— å…³æ€§ï¼Œå¦‚æœéœ€è¦å®ç°æ”¯æŒå¤šç§æ•°æ®åº“çš„è½¯ä»¶ï¼Œåˆ™éœ€è¦è‡ªå®šä¹‰å¤šå¥—sqlæ˜ å°„æ–‡ä»¶ï¼Œå·¥ä½œé‡å¤§ã€‚ </p><p>ï¼ˆ3ï¼‰Hibernateå¯¹è±¡/å…³ç³»æ˜ å°„èƒ½åŠ›å¼ºï¼Œæ•°æ®åº“æ— å…³æ€§å¥½ï¼Œå¯¹äºå…³ç³»æ¨¡å‹è¦æ±‚é«˜çš„è½¯ä»¶ï¼Œå¦‚æœç”¨hibernateå¼€å‘å¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚ </p><p>132ã€mybatisæœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ</p><p>Mybatisæœ‰ä¸‰ç§åŸºæœ¬çš„æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼š</p><ol><li>æ¯æ‰§è¡Œä¸€æ¬¡updateæˆ–selectï¼Œå°±å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚</li><li><strong>ReuseExecutor</strong>ï¼šæ‰§è¡Œupdateæˆ–selectï¼Œä»¥sqlä½œä¸ºkeyæŸ¥æ‰¾Statementå¯¹è±¡ï¼Œå­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼Œç”¨å®Œåï¼Œä¸å…³é—­Statementå¯¹è±¡ï¼Œè€Œæ˜¯æ”¾ç½®äºMapå†…ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é‡å¤ä½¿ç”¨Statementå¯¹è±¡ã€‚</li><li><strong>BatchExecutor</strong>ï¼šæ‰§è¡Œupdateï¼ˆæ²¡æœ‰selectï¼ŒJDBCæ‰¹å¤„ç†ä¸æ”¯æŒselectï¼‰ï¼Œå°†æ‰€æœ‰sqléƒ½æ·»åŠ åˆ°æ‰¹å¤„ç†ä¸­ï¼ˆaddBatch()ï¼‰ï¼Œç­‰å¾…ç»Ÿä¸€æ‰§è¡Œï¼ˆexecuteBatch()ï¼‰ï¼Œå®ƒç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œæ¯ä¸ªStatementå¯¹è±¡éƒ½æ˜¯addBatch()å®Œæ¯•åï¼Œç­‰å¾…é€ä¸€æ‰§è¡ŒexecuteBatch()æ‰¹å¤„ç†ã€‚ä¸JDBCæ‰¹å¤„ç†ç›¸åŒã€‚</li></ol><p>133ã€Mybatisåˆ†é¡µæ’ä»¶çš„å®ç°åŸç†çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>åˆ†é¡µæ’ä»¶çš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨Mybatisæä¾›çš„æ’ä»¶æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰æ’ä»¶ï¼Œåœ¨æ’ä»¶çš„æ‹¦æˆªæ–¹æ³•å†…æ‹¦æˆªå¾…æ‰§è¡Œçš„sqlï¼Œç„¶åé‡å†™sqlï¼Œæ ¹æ®dialectæ–¹è¨€ï¼Œæ·»åŠ å¯¹åº”çš„ç‰©ç†åˆ†é¡µè¯­å¥å’Œç‰©ç†åˆ†é¡µå‚æ•°ã€‚</p><h2 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h2><p>135ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</p><h2 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h2><p>164ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç¬¬ä¸€èŒƒå¼ï¼šå¼ºè°ƒçš„æ˜¯å¼ºè°ƒçš„æ˜¯åˆ—çš„åŸå­æ€§ï¼Œå³æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ã€‚</li><li>ç¬¬äºŒèŒƒå¼ï¼šè¦æ±‚å®ä½“çš„å±æ€§å®Œå…¨ä¾èµ–äºä¸»å…³é”®å­—ã€‚æ‰€è°“å®Œå…¨ä¾èµ–æ˜¯æŒ‡ä¸èƒ½å­˜åœ¨ä»…ä¾èµ–ä¸»å…³é”®å­—ä¸€éƒ¨åˆ†çš„å±æ€§ã€‚</li><li>ç¬¬ä¸‰èŒƒå¼ï¼šä»»ä½•éä¸»å±æ€§ä¸ä¾èµ–äºå…¶å®ƒéä¸»å±æ€§ã€‚</li></ul><p>165ã€<strong>ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰ 7 æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å 2 æ¡æ•°æ®ï¼Œé‡å¯ mysql æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶ id æ˜¯å‡ ï¼Ÿ</strong></p><ul><li>è¡¨ç±»å‹å¦‚æœæ˜¯ MyISAM ï¼Œé‚£ id å°±æ˜¯ 18ã€‚</li><li>è¡¨ç±»å‹å¦‚æœæ˜¯ InnoDBï¼Œé‚£ id å°±æ˜¯ 15ã€‚</li></ul><p>InnoDB è¡¨åªä¼šæŠŠè‡ªå¢ä¸»é”®çš„æœ€å¤§ id è®°å½•åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥é‡å¯ä¹‹åä¼šå¯¼è‡´æœ€å¤§ id ä¸¢å¤±ã€‚</p><p>166ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ</p><p>ä½¿ç”¨ select version() è·å–å½“å‰ MySQL æ•°æ®åº“ç‰ˆæœ¬ã€‚</p><p>167ã€è¯´ä¸€ä¸‹ACIDæ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>Atomicityï¼ˆåŸå­æ€§ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…å…¨éƒ¨å®Œæˆï¼Œæˆ–è€…å…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«æ¢å¤ï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚å³ï¼Œäº‹åŠ¡ä¸å¯åˆ†å‰²ã€ä¸å¯çº¦ç®€ã€‚</li><li>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾çº¦æŸã€è§¦å‘å™¨ã€çº§è”å›æ»šç­‰ã€‚</li><li>Isolationï¼ˆéš”ç¦»æ€§ï¼‰ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li><li>Durabilityï¼ˆæŒä¹…æ€§ï¼‰ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li></ul><p>168ã€charå’Œvarcharçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>char(n) ï¼šå›ºå®šé•¿åº¦ç±»å‹ï¼Œæ¯”å¦‚è®¢é˜… char(10)ï¼Œå½“ä½ è¾“å…¥â€abcâ€ä¸‰ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œå®ƒä»¬å çš„ç©ºé—´è¿˜æ˜¯ 10 ä¸ªå­—èŠ‚ï¼Œå…¶ä»– 7 ä¸ªæ˜¯ç©ºå­—èŠ‚ã€‚</p><p>char ä¼˜ç‚¹ï¼šæ•ˆç‡é«˜ï¼›ç¼ºç‚¹ï¼šå ç”¨ç©ºé—´ï¼›é€‚ç”¨åœºæ™¯ï¼šå­˜å‚¨å¯†ç çš„ md5 å€¼ï¼Œå›ºå®šé•¿åº¦çš„ï¼Œä½¿ç”¨ char éå¸¸åˆé€‚ã€‚</p><p>varchar(n) ï¼šå¯å˜é•¿åº¦ï¼Œå­˜å‚¨çš„å€¼æ˜¯æ¯ä¸ªå€¼å ç”¨çš„å­—èŠ‚å†åŠ ä¸Šä¸€ä¸ªç”¨æ¥è®°å½•å…¶é•¿åº¦çš„å­—èŠ‚çš„é•¿åº¦ã€‚</p><p>æ‰€ä»¥ï¼Œä»ç©ºé—´ä¸Šè€ƒè™‘ varcahr æ¯”è¾ƒåˆé€‚ï¼›ä»æ•ˆç‡ä¸Šè€ƒè™‘ char æ¯”è¾ƒåˆé€‚ï¼ŒäºŒè€…ä½¿ç”¨éœ€è¦æƒè¡¡ã€‚</p><p>169ã€floatå’Œdoubleçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>float æœ€å¤šå¯ä»¥å­˜å‚¨ 8 ä½çš„åè¿›åˆ¶æ•°ï¼Œå¹¶åœ¨å†…å­˜ä¸­å  4 å­—èŠ‚ã€‚</li><li>double æœ€å¯å¯ä»¥å­˜å‚¨ 16 ä½çš„åè¿›åˆ¶æ•°ï¼Œå¹¶åœ¨å†…å­˜ä¸­å  8 å­—èŠ‚ã€‚</li></ul><p>170ã€mysqlçš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>å†…è¿æ¥å…³é”®å­—ï¼šinner joinï¼›å·¦è¿æ¥ï¼šleft joinï¼› å³è¿æ¥right joinã€‚</p><p>å†…è¿æ¥æ˜¯æŠŠåŒ¹é…çš„å…³è”æ•°æ®æ˜¾ç¤ºå‡ºæ¥ï¼›å·¦è¿æ¥æ˜¯å·¦è¾¹çš„è¡¨å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œå³è¾¹çš„è¡¨æ˜¾ç¤ºå‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼›å³è¿æ¥æ­£å¥½ç›¸åã€‚</p><p>171ã€mysqlç´¢å¼•æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</p><p>ç´¢å¼•æ˜¯æ»¡è¶³æŸç§ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè€Œè¿™äº›æ•°æ®ç»“æ„ä¼šä»¥æŸç§æ–¹å¼æŒ‡å‘æ•°æ®ï¼Œä»è€Œå®ç°é«˜æ•ˆæŸ¥æ‰¾æ•°æ®ã€‚</p><p>å…·ä½“æ¥è¯´ MySQL ä¸­çš„ç´¢å¼•ï¼Œä¸åŒçš„æ•°æ®å¼•æ“å®ç°æœ‰æ‰€ä¸åŒï¼Œä½†ç›®å‰ä¸»æµçš„æ•°æ®åº“å¼•æ“çš„ç´¢å¼•éƒ½æ˜¯ B+ æ ‘å®ç°çš„ï¼ŒB+ æ ‘çš„æœç´¢æ•ˆç‡ï¼Œå¯ä»¥åˆ°è¾¾äºŒåˆ†æ³•çš„æ€§èƒ½ï¼Œæ‰¾åˆ°æ•°æ®åŒºåŸŸä¹‹åå°±æ‰¾åˆ°äº†å®Œæ•´çš„æ•°æ®ç»“æ„äº†ï¼Œæ‰€æœ‰ç´¢å¼•çš„æ€§èƒ½ä¹Ÿæ˜¯æ›´å¥½çš„ã€‚</p><p>172ã€æ€æ ·éªŒè¯mysqlçš„ç´¢å¼•æ˜¯å¦æ»¡è¶³éœ€æ±‚ï¼Ÿ</p><p>ä½¿ç”¨ explain æŸ¥çœ‹ SQL æ˜¯å¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„ï¼Œä»è€Œåˆ†æä½ çš„ç´¢å¼•æ˜¯å¦æ»¡è¶³éœ€æ±‚ã€‚</p><p>explain è¯­æ³•ï¼šexplain select * from table where type=1ã€‚</p><p>173ã€è¯´ä¸€ä¸‹æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ</p><p>MySQL çš„äº‹åŠ¡éš”ç¦»æ˜¯åœ¨ MySQL. ini é…ç½®æ–‡ä»¶é‡Œæ·»åŠ çš„ï¼Œåœ¨æ–‡ä»¶çš„æœ€åæ·»åŠ ï¼štransaction-isolation = REPEATABLE-READ</p><p>å¯ç”¨çš„é…ç½®å€¼ï¼šREAD-UNCOMMITTEDã€READ-COMMITTEDã€REPEATABLE-READã€SERIALIZABLEã€‚</p><ul><li>READ-UNCOMMITTEDï¼šæœªæäº¤è¯»ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°å¹»è¯»ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ã€‚</li><li>READ-COMMITTEDï¼šæäº¤è¯»ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆå¹»è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ã€‚</li><li>REPEATABLE-READï¼šå¯é‡å¤è¯»ï¼Œé»˜è®¤çº§åˆ«ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ã€‚</li><li>SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li></ul><p>è„è¯» ï¼šè¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿè¯»å–å¦ä¸€ä¸ªäº‹åŠ¡ä¸­è¿˜æœªæäº¤çš„æ•°æ®ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªäº‹åŠ¡å°è¯•æ’å…¥è®°å½• Aï¼Œæ­¤æ—¶è¯¥äº‹åŠ¡è¿˜æœªæäº¤ï¼Œç„¶åå¦ä¸€ä¸ªäº‹åŠ¡å°è¯•è¯»å–åˆ°äº†è®°å½• Aã€‚</p><p>ä¸å¯é‡å¤è¯» ï¼šæ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚</p><p>å¹»è¯» ï¼šæŒ‡åŒä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ä¸ä¸€æ ·ã€‚æ¯”å¦‚åŒä¸€ä¸ªäº‹åŠ¡ A ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ—¶å€™æœ‰ n æ¡è®°å½•ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡åŒç­‰æ¡ä»¶ä¸‹æŸ¥è¯¢å´æœ‰ n+1 æ¡è®°å½•ï¼Œè¿™å°±å¥½åƒäº§ç”Ÿäº†å¹»è§‰ã€‚å‘ç”Ÿå¹»è¯»çš„åŸå› ä¹Ÿæ˜¯å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ–°å¢æˆ–è€…åˆ é™¤æˆ–è€…ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ç»“æœé›†é‡Œé¢çš„æ•°æ®ï¼ŒåŒä¸€ä¸ªè®°å½•çš„æ•°æ®å†…å®¹è¢«ä¿®æ”¹äº†ï¼Œæ‰€æœ‰æ•°æ®è¡Œçš„è®°å½•å°±å˜å¤šæˆ–è€…å˜å°‘äº†ã€‚</p><p>174ã€è¯´ä¸€ä¸‹mysqlå¸¸ç”¨çš„å¼•æ“ï¼Ÿ</p><p>InnoDB å¼•æ“ï¼šInnoDB å¼•æ“æä¾›äº†å¯¹æ•°æ®åº“ acid äº‹åŠ¡çš„æ”¯æŒï¼Œå¹¶ä¸”è¿˜æä¾›äº†è¡Œçº§é”å’Œå¤–é”®çš„çº¦æŸï¼Œå®ƒçš„è®¾è®¡çš„ç›®æ ‡å°±æ˜¯å¤„ç†å¤§æ•°æ®å®¹é‡çš„æ•°æ®åº“ç³»ç»Ÿã€‚MySQL è¿è¡Œçš„æ—¶å€™ï¼ŒInnoDB ä¼šåœ¨å†…å­˜ä¸­å»ºç«‹ç¼“å†²æ± ï¼Œç”¨äºç¼“å†²æ•°æ®å’Œç´¢å¼•ã€‚ä½†æ˜¯è¯¥å¼•æ“æ˜¯ä¸æ”¯æŒå…¨æ–‡æœç´¢ï¼ŒåŒæ—¶å¯åŠ¨ä¹Ÿæ¯”è¾ƒçš„æ…¢ï¼Œå®ƒæ˜¯ä¸ä¼šä¿å­˜è¡¨çš„è¡Œæ•°çš„ï¼Œæ‰€ä»¥å½“è¿›è¡Œ select count(*) from table æŒ‡ä»¤çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œæ‰«æå…¨è¡¨ã€‚ç”±äºé”çš„ç²’åº¦å°ï¼Œå†™æ“ä½œæ˜¯ä¸ä¼šé”å®šå…¨è¡¨çš„,æ‰€ä»¥åœ¨å¹¶å‘åº¦è¾ƒé«˜çš„åœºæ™¯ä¸‹ä½¿ç”¨ä¼šæå‡æ•ˆç‡çš„ã€‚</p><p>MyIASM å¼•æ“ï¼šMySQL çš„é»˜è®¤å¼•æ“ï¼Œä½†ä¸æä¾›äº‹åŠ¡çš„æ”¯æŒï¼Œä¹Ÿä¸æ”¯æŒè¡Œçº§é”å’Œå¤–é”®ã€‚å› æ­¤å½“æ‰§è¡Œæ’å…¥å’Œæ›´æ–°è¯­å¥æ—¶ï¼Œå³æ‰§è¡Œå†™æ“ä½œçš„æ—¶å€™éœ€è¦é”å®šè¿™ä¸ªè¡¨ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ•ˆç‡ä¼šé™ä½ã€‚ä¸è¿‡å’Œ InnoDB ä¸åŒçš„æ˜¯ï¼ŒMyIASM å¼•æ“æ˜¯ä¿å­˜äº†è¡¨çš„è¡Œæ•°ï¼Œäºæ˜¯å½“è¿›è¡Œ select count(*) from table è¯­å¥æ—¶ï¼Œå¯ä»¥ç›´æ¥çš„è¯»å–å·²ç»ä¿å­˜çš„å€¼è€Œä¸éœ€è¦è¿›è¡Œæ‰«æå…¨è¡¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¡¨çš„è¯»æ“ä½œè¿œè¿œå¤šäºå†™æ“ä½œæ—¶ï¼Œå¹¶ä¸”ä¸éœ€è¦äº‹åŠ¡çš„æ”¯æŒçš„ï¼Œå¯ä»¥å°† MyIASM ä½œä¸ºæ•°æ®åº“å¼•æ“çš„é¦–é€‰ã€‚</p><p>175ã€è¯´ä¸€ä¸‹mysqlçš„è¡Œé”å’Œæ ‡æ‰€ï¼Ÿ</p><ul><li>è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼Œä¸ä¼šå‡ºç°æ­»é”ã€‚é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘é‡æœ€ä½ã€‚</li><li>è¡Œçº§é”ï¼šå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼Œä¼šå‡ºç°æ­»é”ã€‚é”åŠ›åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡å°ï¼Œå¹¶å‘åº¦æœ€é«˜ã€‚</li></ul><p>176ã€è¯´ä¸€ä¸‹ä¹è§‚é”å’Œæ‚²è§‚é”ï¼Ÿ</p><ul><li>ä¹è§‚é”ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æäº¤æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ã€‚</li><li>æ‚²è§‚é”ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»æ­¢ï¼Œç›´åˆ°è¿™ä¸ªé”è¢«é‡Šæ”¾ã€‚</li></ul><p>æ•°æ®åº“çš„ä¹è§‚é”éœ€è¦è‡ªå·±å®ç°ï¼Œåœ¨è¡¨é‡Œé¢æ·»åŠ ä¸€ä¸ª version å­—æ®µï¼Œæ¯æ¬¡ä¿®æ”¹æˆåŠŸå€¼åŠ  1ï¼Œè¿™æ ·æ¯æ¬¡ä¿®æ”¹çš„æ—¶å€™å…ˆå¯¹æ¯”ä¸€ä¸‹ï¼Œè‡ªå·±æ‹¥æœ‰çš„ version å’Œæ•°æ®åº“ç°åœ¨çš„ version æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´å°±ä¸ä¿®æ”¹ï¼Œè¿™æ ·å°±å®ç°äº†ä¹è§‚é”ã€‚</p><p>177ã€mysqlé—®é¢˜æ’æŸ¥éƒ½æœ‰å“ªäº›æ‰‹æ®µï¼Ÿ</p><ul><li>ä½¿ç”¨show processlistå‘½ä»¤æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿æ¥ä¿¡æ¯ã€‚</li><li>ä½¿ç”¨ explain å‘½ä»¤æŸ¥è¯¢ SQL è¯­å¥æ‰§è¡Œè®¡åˆ’ã€‚</li><li>å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒæŸ¥çœ‹æ…¢æŸ¥è¯¢çš„ SQLã€‚</li></ul><p>178ã€å¦‚ä½•åšmysqlçš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</p><ul><li>ä¸ºæœç´¢å­—æ®µåˆ›å»ºç´¢å¼•ã€‚</li><li>é¿å…ä½¿ç”¨ select *ï¼Œåˆ—å‡ºéœ€è¦æŸ¥è¯¢çš„å­—æ®µã€‚</li><li>å‚ç›´åˆ†å‰²åˆ†è¡¨ã€‚</li><li>é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“ã€‚</li></ul><h2 id="åå…«ã€Redis"><a href="#åå…«ã€Redis" class="headerlink" title="åå…«ã€Redis"></a>åå…«ã€Redis</h2><p>179ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿéƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</p><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p><p>Redis ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>æ•°æ®é«˜å¹¶å‘çš„è¯»å†™</li><li>æµ·é‡æ•°æ®çš„è¯»å†™</li><li>å¯¹æ‰©å±•æ€§è¦æ±‚é«˜çš„æ•°æ®</li></ul><p>180ã€redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ</p><ul><li>æ•°æ®ç¼“å­˜åŠŸèƒ½</li><li>åˆ†å¸ƒå¼é”çš„åŠŸèƒ½</li><li>æ”¯æŒæ•°æ®æŒä¹…åŒ–</li><li>æ”¯æŒäº‹åŠ¡</li><li>æ”¯æŒæ¶ˆæ¯é˜Ÿåˆ—</li></ul><p>181ã€<strong>redis å’Œ memecache æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li>memcachedæ‰€æœ‰çš„å€¼å‡æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œredisä½œä¸ºå…¶æ›¿ä»£è€…ï¼Œæ”¯æŒæ›´ä¸ºä¸°å¯Œçš„æ•°æ®ç±»å‹</li><li>redisçš„é€Ÿåº¦æ¯”memcachedå¿«å¾ˆå¤š</li><li>rediså¯ä»¥æŒä¹…åŒ–å…¶æ•°æ®</li></ul><p>182ã€redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</p><p>å› ä¸º cpu ä¸æ˜¯ Redis çš„ç“¶é¢ˆï¼ŒRedis çš„ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯æœºå™¨å†…å­˜æˆ–è€…ç½‘ç»œå¸¦å®½ã€‚æ—¢ç„¶å•çº¿ç¨‹å®¹æ˜“å®ç°ï¼Œè€Œä¸” cpu åˆä¸ä¼šæˆä¸ºç“¶é¢ˆï¼Œé‚£å°±é¡ºç†æˆç« åœ°é‡‡ç”¨å•çº¿ç¨‹çš„æ–¹æ¡ˆäº†ã€‚</p><p>å…³äº Redis çš„æ€§èƒ½ï¼Œå®˜æ–¹ç½‘ç«™ä¹Ÿæœ‰ï¼Œæ™®é€šç¬”è®°æœ¬è½»æ¾å¤„ç†æ¯ç§’å‡ åä¸‡çš„è¯·æ±‚ã€‚</p><p>è€Œä¸”å•çº¿ç¨‹å¹¶ä¸ä»£è¡¨å°±æ…¢ nginx å’Œ nodejs ä¹Ÿéƒ½æ˜¯é«˜æ€§èƒ½å•çº¿ç¨‹çš„ä»£è¡¨ã€‚</p><p>183ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</p><p>ç¼“å­˜ç©¿é€ï¼šæŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶éœ€è¦ä»æ•°æ®åº“æŸ¥è¯¢ï¼ŒæŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°æ•°æ®åº“å»æŸ¥è¯¢ï¼Œé€ æˆç¼“å­˜ç©¿é€ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šæœ€ç®€å•ç²—æš´çš„æ–¹æ³•å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚</p><p>184ã€reidsæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ</p><ul><li>String</li><li>List</li><li>Hash</li><li>Set</li><li>Zset</li></ul><p>185ã€redisæ”¯æŒçš„javaå®¢æˆ·ç«¯æœ‰å“ªäº›ï¼Ÿ</p><p>Redissonã€Jedisã€Lettuceç­‰ç­‰ï¼Œå®˜æ–¹æ¨èä½¿ç”¨Redisson</p><p>186ã€Jediså’Œredissonæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</p><p>Jedisæ˜¯Redisçš„Javaå®ç°çš„å®¢æˆ·ç«¯ï¼Œå…¶APIæä¾›äº†æ¯”è¾ƒå…¨é¢çš„Rediså‘½ä»¤çš„æ”¯æŒã€‚</p><p>Redissonå®ç°äº†åˆ†å¸ƒå¼å’Œå¯æ‰©å±•çš„Javaæ•°æ®ç»“æ„ï¼Œå’ŒJedisç›¸æ¯”ï¼ŒåŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²æ“ä½œï¼Œä¸æ”¯æŒæ’åºã€äº‹åŠ¡ã€ç®¡é“ã€åˆ†åŒºç­‰Redisç‰¹æ€§ã€‚Redissonçš„å®—æ—¨æ˜¯ä¿ƒè¿›ä½¿ç”¨è€…å¯¹Redisçš„å…³æ³¨åˆ†ç¦»ï¼Œä»è€Œè®©ä½¿ç”¨è€…èƒ½å¤Ÿå°†ç²¾åŠ›æ›´é›†ä¸­åœ°æ”¾åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸Šã€‚</p><p>187ã€æ€æ ·ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ</p><ul><li>åˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´</li><li>æ–°å¢ã€æ›´æ”¹ã€åˆ é™¤æ•°æ®åº“æ“ä½œåŒæ­¥æ›´æ–°Redisï¼Œå¯ä»¥ä½¿ç”¨äº‹åŠ¡æœºåˆ¶æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</li></ul><p>188ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ</p><p>Redis çš„æŒä¹…åŒ–æœ‰ä¸¤ç§æ–¹å¼ï¼Œæˆ–è€…è¯´æœ‰ä¸¤ç§ç­–ç•¥ï¼š</p><ul><li>RDBï¼ˆRedis Databaseï¼‰ï¼šæŒ‡å®šçš„æ—¶é—´é—´éš”èƒ½å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨ã€‚</li><li>AOFï¼ˆAppend Only Fileï¼‰ï¼šæ¯ä¸€ä¸ªæ”¶åˆ°çš„å†™å‘½ä»¤éƒ½é€šè¿‡writeå‡½æ•°è¿½åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</li></ul><p>189ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ</p><p>Redis åˆ†å¸ƒå¼é”å…¶å®å°±æ˜¯åœ¨ç³»ç»Ÿé‡Œé¢å ä¸€ä¸ªâ€œå‘â€ï¼Œå…¶ä»–ç¨‹åºä¹Ÿè¦å â€œå‘â€çš„æ—¶å€™ï¼Œå ç”¨æˆåŠŸäº†å°±å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå¤±è´¥äº†å°±åªèƒ½æ”¾å¼ƒæˆ–ç¨åé‡è¯•ã€‚</p><p>å å‘ä¸€èˆ¬ä½¿ç”¨ setnx(set if not exists)æŒ‡ä»¤ï¼Œåªå…è®¸è¢«ä¸€ä¸ªç¨‹åºå æœ‰ï¼Œä½¿ç”¨å®Œè°ƒç”¨ del é‡Šæ”¾é”ã€‚</p><p><strong>190ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ</strong></p><p>Redis åˆ†å¸ƒå¼é”ä¸èƒ½è§£å†³è¶…æ—¶çš„é—®é¢˜ï¼Œåˆ†å¸ƒå¼é”æœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œç¨‹åºçš„æ‰§è¡Œå¦‚æœè¶…å‡ºäº†é”çš„è¶…æ—¶æ—¶é—´å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>191ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ</p><p>å°½å¯èƒ½ä½¿ç”¨æ•£åˆ—è¡¨ï¼ˆhashesï¼‰ï¼Œæ•£åˆ—è¡¨ï¼ˆæ˜¯è¯´æ•£åˆ—è¡¨é‡Œé¢å­˜å‚¨çš„æ•°å°‘ï¼‰ä½¿ç”¨çš„å†…å­˜éå¸¸å°ï¼Œæ‰€ä»¥ä½ åº”è¯¥å°½å¯èƒ½çš„å°†ä½ çš„æ•°æ®æ¨¡å‹æŠ½è±¡åˆ°ä¸€ä¸ªæ•£åˆ—è¡¨é‡Œé¢ã€‚</p><p>æ¯”å¦‚ä½ çš„webç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ï¼Œä¸è¦ä¸ºè¿™ä¸ªç”¨æˆ·çš„åç§°ï¼Œå§“æ°ï¼Œé‚®ç®±ï¼Œå¯†ç è®¾ç½®å•ç‹¬çš„key,è€Œæ˜¯åº”è¯¥æŠŠè¿™ä¸ªç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯å­˜å‚¨åˆ°ä¸€å¼ æ•£åˆ—è¡¨é‡Œé¢ã€‚</p><p>192ã€Redisæ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</p><p>volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver. db[i]. expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚</p><p>volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver. db[i]. expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°ã€‚</p><p>volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver. db[i]. expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</p><p>allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver. db[i]. dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</p><p>allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver. db[i]. dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</p><p>no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®</p><p>193ã€Rediså¸¸è§çš„æ€§èƒ½é—®é¢˜æœ‰å“ªäº›ï¼Ÿè¯¥å¦‚ä½•è§£å†³ï¼Ÿ</p><ul><li>ä¸»æœåŠ¡å™¨å†™å†…å­˜å¿«ç…§ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œå½“å¿«ç…§æ¯”è¾ƒå¤§æ—¶å¯¹æ€§èƒ½å½±å“æ˜¯éå¸¸å¤§çš„ï¼Œä¼šé—´æ–­æ€§æš‚åœæœåŠ¡ï¼Œæ‰€ä»¥ä¸»æœåŠ¡å™¨æœ€å¥½ä¸è¦å†™å†…å­˜å¿«ç…§ã€‚</li><li>Redis ä¸»ä»å¤åˆ¶çš„æ€§èƒ½é—®é¢˜ï¼Œä¸ºäº†ä¸»ä»å¤åˆ¶çš„é€Ÿåº¦å’Œè¿æ¥çš„ç¨³å®šæ€§ï¼Œä¸»ä»åº“æœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ã€‚</li></ul><h2 id="åä¹ã€JVM"><a href="#åä¹ã€JVM" class="headerlink" title="åä¹ã€JVM"></a>åä¹ã€JVM</h2><p>194ã€è¯´ä¸€ä¸‹jvmçš„ä¸»è¦ç»„æˆéƒ¨åˆ†åŠå…¶ä½œç”¨ï¼Ÿ</p><ul><li>ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰</li><li>è¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Areaï¼‰</li><li>æ‰§è¡Œå¼•æ“ï¼ˆExecution Engineï¼‰</li><li>æœ¬åœ°åº“æ¥å£ï¼ˆNative Interfaceï¼‰</li></ul><p>ç»„ä»¶çš„ä½œç”¨ï¼š é¦–å…ˆé€šè¿‡ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰ä¼šæŠŠ Java ä»£ç è½¬æ¢æˆå­—èŠ‚ç ï¼Œè¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Areaï¼‰å†æŠŠå­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œå­—èŠ‚ç æ–‡ä»¶åªæ˜¯ JVM çš„ä¸€å¥—æŒ‡ä»¤é›†è§„èŒƒï¼Œå¹¶ä¸èƒ½ç›´æ¥äº¤ä¸ªåº•å±‚æ“ä½œç³»ç»Ÿå»æ‰§è¡Œï¼Œå› æ­¤éœ€è¦ç‰¹å®šçš„å‘½ä»¤è§£æå™¨æ‰§è¡Œå¼•æ“ï¼ˆExecution Engineï¼‰ï¼Œå°†å­—èŠ‚ç ç¿»è¯‘æˆåº•å±‚ç³»ç»ŸæŒ‡ä»¤ï¼Œå†äº¤ç”± CPU å»æ‰§è¡Œï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦è°ƒç”¨å…¶ä»–è¯­è¨€çš„æœ¬åœ°åº“æ¥å£ï¼ˆNative Interfaceï¼‰æ¥å®ç°æ•´ä¸ªç¨‹åºçš„åŠŸèƒ½ã€‚</p><p>195ã€è¯´ä¸€ä¸‹jvmè¿è¡Œæ—¶æ•°æ®åŒº</p><ul><li>ç¨‹åºè®¡æ•°å™¨</li><li>è™šæ‹Ÿæœºæ ˆ</li><li>æœ¬åœ°æ–¹æ³•æ ˆ</li><li>å †</li><li>æ–¹æ³•åŒº</li></ul><p>æœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰çš„åŒºåŸŸåˆ™ä¾èµ–ç”¨æˆ·è¿›ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œåˆ›å»ºå’Œé”€æ¯ã€‚</p><p><img src="http://ww4.sinaimg.cn/large/006y8mN6gy1g6ncixfpynj30d70b2t9b.jpg" alt="image-20190904115548644"></p><p>196ã€è¯´ä¸€ä¸‹å †æ ˆçš„åŒºåˆ«ï¼Ÿ</p><ol><li>æ ˆå†…å­˜å­˜å‚¨çš„æ˜¯å±€éƒ¨å˜é‡è€Œå †å†…å­˜å­˜å‚¨çš„æ˜¯å®ä½“ï¼›</li><li>æ ˆå†…å­˜çš„æ›´æ–°é€Ÿåº¦è¦å¿«äºå †å†…å­˜ï¼Œå› ä¸ºå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼›</li><li>æ ˆå†…å­˜å­˜æ”¾çš„å˜é‡ç”Ÿå‘½å‘¨æœŸä¸€æ—¦ç»“æŸå°±ä¼šè¢«é‡Šæ”¾ï¼Œè€Œå †å†…å­˜å­˜æ”¾çš„å®ä½“ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶ä¸å®šæ—¶çš„å›æ”¶ã€‚</li></ol><p>197ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>é˜Ÿåˆ—å’Œæ ˆéƒ½æ˜¯è¢«ç”¨æ¥é¢„å­˜å‚¨æ•°æ®çš„ã€‚</li><li>é˜Ÿåˆ—å…è®¸å…ˆè¿›å…ˆå‡ºæ£€ç´¢å…ƒç´ ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–çš„æƒ…å†µï¼ŒDeque æ¥å£å…è®¸ä»ä¸¤ç«¯æ£€ç´¢å…ƒç´ ã€‚</li><li>æ ˆå’Œé˜Ÿåˆ—å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒè¿è¡Œå¯¹å…ƒç´ è¿›è¡Œåè¿›å…ˆå‡ºè¿›è¡Œæ£€ç´¢ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ®æ—¶ä»£</title>
      <link href="2019/08/03/redis-data/"/>
      <url>2019/08/03/redis-data/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤§æ•°æ®æ—¶ä»£ä¸‰V"><a href="#å¤§æ•°æ®æ—¶ä»£ä¸‰V" class="headerlink" title="å¤§æ•°æ®æ—¶ä»£ä¸‰V"></a>å¤§æ•°æ®æ—¶ä»£ä¸‰V</h2><ul><li>æµ·é‡</li><li>å¤šæ ·</li><li>å®æ—¶</li></ul><h2 id="äº’è”ç½‘æ—¶ä»£3é«˜"><a href="#äº’è”ç½‘æ—¶ä»£3é«˜" class="headerlink" title="äº’è”ç½‘æ—¶ä»£3é«˜"></a>äº’è”ç½‘æ—¶ä»£3é«˜</h2><ul><li>é«˜å¹¶å‘</li><li>é«˜å¯æ‰©</li><li>é«˜æ€§èƒ½</li></ul><h2 id="Redisé›†ç¾¤"><a href="#Redisé›†ç¾¤" class="headerlink" title="Redisé›†ç¾¤"></a>Redisé›†ç¾¤</h2><p><code>./redis-trib.rb reshard 127.0.0.1:8001</code></p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaæŠ€æœ¯æ ˆ</title>
      <link href="2019/08/02/technology-stack/"/>
      <url>2019/08/02/technology-stack/</url>
      
        <content type="html"><![CDATA[<ul><li>Docker</li><li>Nginx</li><li>Redis</li><li>SpringBoot</li><li>Mybatis</li><li>RabbitMQ</li><li>Websock</li><li>Spring Security</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>èšé›†å‡½æ•°</title>
      <link href="2019/08/02/sql-learn/"/>
      <url>2019/08/02/sql-learn/</url>
      
        <content type="html"><![CDATA[<h2 id="SQLèšé›†å‡½æ•°"><a href="#SQLèšé›†å‡½æ•°" class="headerlink" title="SQLèšé›†å‡½æ•°"></a>SQLèšé›†å‡½æ•°</h2><ul><li>AVG()  è¿”å›æŸåˆ—çš„å¹³å‡å€¼</li><li>COUNT()   è¿”å›ç‰Ÿçƒˆçš„è¡Œæ•°</li><li>MAX()     è¿”å›æŸåˆ—çš„æœ€å¤§å€¼</li><li>MIN()  è¿”å›æŸåˆ—çš„æœ€å°å€¼</li><li>SUM()    è¿”å›æŸåˆ—çš„æ±‚å’Œ</li></ul><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> sql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sqlLearning</title>
      <link href="2019/07/29/sqllearning/"/>
      <url>2019/07/29/sqllearning/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬å­—ç¬¦åŒ¹é…"><a href="#åŸºæœ¬å­—ç¬¦åŒ¹é…" class="headerlink" title="åŸºæœ¬å­—ç¬¦åŒ¹é…"></a>åŸºæœ¬å­—ç¬¦åŒ¹é…</h1><h2 id="MySQLä½¿ç”¨-Concat-æ¥å®Œæˆå¯¹å­—æ®µçš„æ‹¼æ¥"><a href="#MySQLä½¿ç”¨-Concat-æ¥å®Œæˆå¯¹å­—æ®µçš„æ‹¼æ¥" class="headerlink" title="MySQLä½¿ç”¨ Concat æ¥å®Œæˆå¯¹å­—æ®µçš„æ‹¼æ¥"></a>MySQLä½¿ç”¨ Concat æ¥å®Œæˆå¯¹å­—æ®µçš„æ‹¼æ¥</h2><p>Concat ()</p><p><code>select Concat(vend_name,'()',vend_country,')') from vendors order by vend_name</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootAnnotation</title>
      <link href="2019/07/25/springbootannotation/"/>
      <url>2019/07/25/springbootannotation/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQLæ€§èƒ½ä¼˜åŒ–</title>
      <link href="2019/07/24/sql-1/"/>
      <url>2019/07/24/sql-1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h1><ol><li>å°½é‡ä¸ä½¿ç”¨IN,è€Œé‡‡ç”¨exists </li><li>æ¨¡ç³ŠæŸ¥è¯¢like, å…³é”®è¯å‰é¢ä¸è¦ä½¿ç”¨% æ¯”å¦‚â€™%xxx%â€™ ä¼šå¯¼è‡´æŸ¥è¯¢èµ°æƒæ ‡æ‰«æ</li><li>å°½é‡ä½¿ç”¨whereè¿‡æ»¤ä¹‹åå†åˆ†ç»„ </li><li></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨å°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢</title>
      <link href="2019/07/16/stringnum/"/>
      <url>2019/07/16/stringnum/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨å°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢"><a href="#ä½¿ç”¨å°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢" class="headerlink" title="ä½¿ç”¨å°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢"></a>ä½¿ç”¨å°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢</h1><p>æˆ‘ä»¬å¹³æ—¶åœ¨æ•°æ®åº“ä¸­,å­˜æ”¾ç‰©å“ä½¿ç”¨varcharæ¥å­˜æ”¾,å½“éœ€è¦åšåŠ å‡ä¹˜é™¤è¿ç®—æ—¶,éœ€è¦å°†Stringç±»å‹è½¬æ¢æˆint(æˆ–floatæˆ–long)ç±»å‹,ä»¥ä¸‹é€šè¿‡Integer,Float,Longå°è£…ç±»æ¥Stringè¿›è¡Œè½¬æ¢</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringNum</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> num <span class="token operator">=</span> <span class="token string">"998"</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡Integerå®ç°æ•°æ®è½¬æ¢</span>        <span class="token keyword">int</span> intValue <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡Floatè¿›è¡Œæ•°æ®è½¬æ¢</span>        <span class="token keyword">float</span> floValue <span class="token operator">=</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>floValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡Longå°è£…ç±»è¿›è¡Œæ•°æ®è½¬æ¢</span>        <span class="token class-name">Long</span> longValue <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>longValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LinkTest</title>
      <link href="2019/07/16/linktest/"/>
      <url>2019/07/16/linktest/</url>
      
        <content type="html"><![CDATA[<h1 id="LinkListåŸºæœ¬ç”¨æ³•"><a href="#LinkListåŸºæœ¬ç”¨æ³•" class="headerlink" title="LinkListåŸºæœ¬ç”¨æ³•"></a>LinkListåŸºæœ¬ç”¨æ³•</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//æ’å…¥å…ƒç´ </span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"firstElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"secondElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//è®¿é—®ç´¢å¼•</span>        <span class="token keyword">int</span> first <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"firstElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> second <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"secondElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"the index of firstElement is:"</span><span class="token operator">+</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"the index of secondElement is:"</span><span class="token operator">+</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤å…ƒç´ </span>        <span class="token comment">//æ ¹æ®å…ƒç´ æ¥åˆ é™¤</span>        list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"firstElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®ç´¢å¼•åˆ é™¤</span>        <span class="token class-name">String</span> remove <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤çš„å…ƒç´ :"</span><span class="token operator">+</span>remove<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//éå†å…ƒç´ </span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"element"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//æ¸…ç©ºé“¾è¡¨</span>        list<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¨‹åºè¿è¡Œç»“æœ"><a href="#ç¨‹åºè¿è¡Œç»“æœ" class="headerlink" title="ç¨‹åºè¿è¡Œç»“æœ"></a>ç¨‹åºè¿è¡Œç»“æœ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firstElementsecondElementthe index of firstElement is:0the index of secondElement is:1åˆ é™¤çš„å…ƒç´ :secondElementelement<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LearnDocker</title>
      <link href="2019/07/14/learndocer/"/>
      <url>2019/07/14/learndocer/</url>
      
        <content type="html"><![CDATA[<h2 id="learn-docker"><a href="#learn-docker" class="headerlink" title="learn docker"></a>learn docker</h2><h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><p><code>docker version</code>  æŸ¥çœ‹dockerå®¢æˆ·ç«¯å’ŒæœåŠ¡çš„ç‰ˆæœ¬</p><p><code>docker info</code> æŸ¥çœ‹dockerçš„åŸºæœ¬ä¿¡æ¯,ä¾‹å¦‚æœ‰å¤šå°‘å®¹å™¨,å¤šå°‘é•œåƒ,dockerä¸ªç›®å½•ç­‰</p><p><code>docker â€”help</code> æŸ¥çœ‹dockerçš„å¸®åŠ©ä¿¡æ¯</p><h2 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h2><ol><li><p><code>docker images</code> æŸ¥çœ‹æœ¬åœ°ä¸»æœºä¸Šçš„æ‰€æœ‰é•œåƒ</p></li><li><p><code>docker rmi</code> åˆ é™¤æœ¬åœ°çš„é•œåƒ, å¯ä»¥åŠ ä¸Š<code>-f</code> å‚æ•°è¿›è¡Œå¼ºåˆ¶åˆ é™¤</p><p><code>$ docker rmi -f tomcat</code></p></li><li><p><code>docker search</code> æ ¹æ®é•œåƒåç§°æœç´¢è¿œç¨‹ä»“åº“ä¸­çš„é•œåƒ</p></li><li><p><code>docker pull</code> æœç´¢åˆ°æŸä¸ªé•œåƒä¹‹åå¯ä»¥ä»è¿œç¨‹æ‹‰å–é•œåƒ,ç±»ä¼¼githubçš„pullåŠŸèƒ½</p></li></ol><h2 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h2><ol><li><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code>  å¯ä»¥åŸºäºæŸä¸ªé•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li></ol><blockquote><p><code>-d</code>:å¯åŠ¨å®¹å™¨,å¹¶ä¸”åå°è¿è¡Œ<br><code>-i</code>:ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨<br><code>-t</code>:ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯<br><code>-P</code>:éšæœºç«¯å£æ˜ å°„<br><code>-p</code>:æŒ‡å®šç«¯å£æ˜ å°„<br><code>-v</code>:å»ºç«‹å®¿ä¸»æœºä¸å®¹å™¨ç›®å½•çš„åŒæ­¥<br><code>--name="myTomcat"</code>ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°(å¦‚æœä¸æŒ‡å®š,åˆ™æœ‰ä¸ªéšæœºçš„åå­—)</p></blockquote><ol><li>è¿›å…¥å®¹å™¨åå¯ä»¥é€šè¿‡<code>exit</code>å‘½ä»¤é€€å‡ºå®¹å™¨</li><li><code>docker ps</code> é€šè¿‡è¯¥å‘½ä»¤å¯æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯</li></ol>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="1984/01/24/sql/"/>
      <url>1984/01/24/sql/</url>
      
        <content type="html"><![CDATA[<hr><p>title: SQLæ€§èƒ½ä¼˜åŒ–<br>date: 2019-07-24 06:11:00<br>tags:<br>â€“</p><h1 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h1><ol><li>å°½é‡ä¸ä½¿ç”¨IN,è€Œé‡‡ç”¨exists </li><li>æ¨¡ç³ŠæŸ¥è¯¢like, å…³é”®è¯å‰é¢ä¸è¦ä½¿ç”¨% æ¯”å¦‚â€™%xxx%â€™ ä¼šå¯¼è‡´æŸ¥è¯¢èµ°æƒæ ‡æ‰«æ</li><li>å°½é‡ä½¿ç”¨whereè¿‡æ»¤ä¹‹åå†åˆ†ç»„ </li><li></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="1984/01/24/untitled/"/>
      <url>1984/01/24/untitled/</url>
      
        <content type="html"><![CDATA[<ol><li>åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ã€å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œã€ä½¿ç”¨ != æˆ–è€… &lt;&gt; ã€æˆ–åˆ™å¯¹å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼Œéƒ½ä¼šå¼•å‘å…¨è¡¨æ‰«æï¼Œç›¸å½“äºä½ é…ç½®çš„ç´¢å¼•æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¦å¤–ä¹Ÿè¦å°½é‡é¿å…ä½¿ç”¨ or ï¼Œè¿™æ ·å¦‚æœä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ç´¢å¼•ï¼Œåˆ™ä¹Ÿä¼šå¯¼è‡´å…¨è¡¨æ‰«æï¼›</li><li>åœ¨ä½¿ç”¨ç´¢å¼•å­—æ®µä½œä¸ºæ¡ä»¶æ—¶ï¼Œå¦‚æœè¯¥ç´¢å¼•æ˜¯å¤åˆç´¢å¼•ï¼Œåˆ™å¿…é¡»ä½¿ç”¨åˆ°è¯¥ç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µä½œä¸ºæ¡ä»¶æ‰èƒ½ä¿è¯ç³»ç»Ÿä½¿ç”¨è¯¥ç´¢å¼•ï¼Œå¦åˆ™è¯¥ç´¢å¼•å°†ä¸ä¼šè¢«ä½¿ç”¨ï¼Œå¹¶ä¸”åº”å°½å¯èƒ½çš„è®©å­—æ®µé¡ºåºä¸ç´¢å¼•é¡ºåºç›¸ä¸€è‡´ï¼›</li><li>ä½¿ç”¨likeå…³é”®å­—æ¨¡ç³ŠæŸ¥è¯¢æ—¶ï¼Œ% æ”¾åœ¨å‰é¢ç´¢å¼•ä¸èµ·ä½œç”¨ï¼Œåªæœ‰â€œ%â€ä¸åœ¨ç¬¬ä¸€ä¸ªä½ç½®ï¼Œç´¢å¼•æ‰ä¼šç”Ÿæ•ˆï¼ˆlike â€˜%æ–‡â€™â€“ç´¢å¼•ä¸èµ·ä½œç”¨ï¼‰ï¼Œæ•°æ®é‡å·¨å¤§çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘ä¸Š esã€‚</li><li>å¦‚æœåˆ—ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¸€å®šè¦åœ¨æ¡ä»¶ä¸­å°†æ•°æ®ä½¿ç”¨å¼•å·å¼•ç”¨èµ·æ¥,å¦åˆ™ç´¢å¼•å°†ä¼šå¤±æ•ˆã€‚</li><li>ä¸åœ¨ç´¢å¼•åˆ—ä¸Šåšä»»ä½•æ“ä½œï¼Œä¾‹å¦‚ è®¡ç®—ã€å‡½æ•°è¿ç®—ã€ï¼ˆè‡ªåŠ¨oræ‰‹åŠ¨ï¼‰ç±»å‹è½¬æ¢</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆåªè®¿é—®ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆç´¢å¼•å’ŒæŸ¥è¯¢åˆ—ä¸€è‡´ï¼‰ï¼‰ï¼Œå‡å°‘select*ã€‚</li></ol>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
